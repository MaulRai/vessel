[{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/admin/balance/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'searchResults' is assigned a value but never used.","line":17,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setSearchResults' is assigned a value but never used.","line":17,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":70,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatCurrency' is assigned a value but never used.","line":80,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":80,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState } from 'react';\nimport Link from 'next/link';\n\ninterface GrantResult {\n    success: boolean;\n    message: string;\n    newBalance?: number;\n}\n\nexport default function AdminBalancePage() {\n    const [userIdentifier, setUserIdentifier] = useState('');\n    const [amount, setAmount] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n    const [result, setResult] = useState<GrantResult | null>(null);\n    const [searchResults, setSearchResults] = useState<Array<{ id: string; email: string; username: string; balance: number }>>([]);\n    const [selectedUser, setSelectedUser] = useState<{ id: string; email: string; username: string; balance: number } | null>(null);\n\n    const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8080/api/v1';\n\n    const getAuthToken = () => {\n        return typeof window !== 'undefined' ? localStorage.getItem('vessel_access_token') : null;\n    };\n\n    const handleGrantBalance = async () => {\n        if (!selectedUser || !amount) {\n            setResult({ success: false, message: 'Pilih user dan masukkan jumlah' });\n            return;\n        }\n\n        const amountNum = parseFloat(amount);\n        if (isNaN(amountNum) || amountNum <= 0) {\n            setResult({ success: false, message: 'Jumlah harus berupa angka positif' });\n            return;\n        }\n\n        setIsLoading(true);\n        setResult(null);\n\n        try {\n            const response = await fetch(`${API_BASE_URL}/admin/balance/grant`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    Authorization: `Bearer ${getAuthToken()}`,\n                },\n                body: JSON.stringify({\n                    user_id: selectedUser.id,\n                    amount: amountNum,\n                }),\n            });\n\n            const data = await response.json();\n\n            if (response.ok && data.success) {\n                setResult({\n                    success: true,\n                    message: `Berhasil menambahkan Rp ${amountNum.toLocaleString('id-ID')} ke akun ${selectedUser.email}`,\n                    newBalance: data.data?.new_balance,\n                });\n                setAmount('');\n                setSelectedUser(null);\n            } else {\n                setResult({\n                    success: false,\n                    message: data.error?.message || 'Gagal menambahkan balance',\n                });\n            }\n        } catch (error) {\n            setResult({\n                success: false,\n                message: 'Koneksi gagal. Periksa server.',\n            });\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const formatCurrency = (value: string) => {\n        const num = value.replace(/\\D/g, '');\n        return num.replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.');\n    };\n\n    return (\n        <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 py-8 px-4\">\n            <div className=\"max-w-4xl mx-auto\">\n                <div className=\"mb-6\">\n                    <Link\n                        href=\"/admin/dashboard-verifikasi\"\n                        className=\"inline-flex items-center text-slate-400 hover:text-slate-200 transition-colors\"\n                    >\n                        <svg className=\"w-5 h-5 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n                        </svg>\n                        Kembali ke Dashboard\n                    </Link>\n                </div>\n\n                <header className=\"mb-8\">\n                    <p className=\"text-sm text-amber-300/80 font-semibold tracking-wide\">Admin Panel</p>\n                    <h1 className=\"text-3xl font-bold text-slate-50\">Manajemen Balance User</h1>\n                    <p className=\"text-slate-400 mt-2\">\n                        Tambahkan balance ke akun user untuk keperluan testing (MVP)\n                    </p>\n                </header>\n\n                <div className=\"bg-slate-800/50 backdrop-blur-sm rounded-2xl border border-slate-700/50 p-8\">\n                    <div className=\"space-y-6\">\n                        <div>\n                            <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                                User ID\n                            </label>\n                            <input\n                                type=\"text\"\n                                value={userIdentifier}\n                                onChange={(e) => setUserIdentifier(e.target.value)}\n                                className=\"w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 text-slate-100\"\n                                placeholder=\"Masukkan UUID user\"\n                            />\n                            <p className=\"mt-1 text-xs text-slate-500\">Format: UUID (contoh: 123e4567-e89b-12d3-a456-426614174000)</p>\n                        </div>\n\n                        {userIdentifier && (\n                            <button\n                                onClick={() => {\n                                    setSelectedUser({\n                                        id: userIdentifier,\n                                        email: 'user@example.com',\n                                        username: 'user',\n                                        balance: 0,\n                                    });\n                                }}\n                                className=\"w-full px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg transition-colors\"\n                            >\n                                Pilih User\n                            </button>\n                        )}\n\n                        {selectedUser && (\n                            <div className=\"p-4 bg-amber-500/10 border border-amber-500/30 rounded-lg\">\n                                <div className=\"flex items-center gap-3\">\n                                    <div className=\"w-10 h-10 bg-amber-500/20 rounded-full flex items-center justify-center\">\n                                        <svg className=\"w-5 h-5 text-amber-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                                        </svg>\n                                    </div>\n                                    <div>\n                                        <p className=\"text-slate-200 font-medium\">User ID: {selectedUser.id}</p>\n                                        <p className=\"text-sm text-slate-400\">User terpilih untuk penambahan balance</p>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                                Jumlah Balance (IDR)\n                            </label>\n                            <div className=\"relative\">\n                                <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400\">Rp</span>\n                                <input\n                                    type=\"text\"\n                                    value={amount}\n                                    onChange={(e) => setAmount(e.target.value.replace(/\\D/g, ''))}\n                                    className=\"w-full pl-12 pr-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 text-slate-100\"\n                                    placeholder=\"0\"\n                                />\n                            </div>\n                            {amount && (\n                                <p className=\"mt-1 text-sm text-slate-400\">\n                                    Rp {parseInt(amount).toLocaleString('id-ID')}\n                                </p>\n                            )}\n                        </div>\n\n                        {result && (\n                            <div\n                                className={`p-4 rounded-lg ${result.success\n                                        ? 'bg-green-500/10 border border-green-500/50'\n                                        : 'bg-red-500/10 border border-red-500/50'\n                                    }`}\n                            >\n                                <p className={result.success ? 'text-green-400' : 'text-red-400'}>\n                                    {result.message}\n                                </p>\n                                {result.newBalance !== undefined && (\n                                    <p className=\"text-green-400 text-sm mt-1\">\n                                        Balance baru: Rp {result.newBalance.toLocaleString('id-ID')}\n                                    </p>\n                                )}\n                            </div>\n                        )}\n\n                        <button\n                            onClick={handleGrantBalance}\n                            disabled={isLoading || !selectedUser || !amount}\n                            className=\"w-full px-6 py-3 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-500 hover:to-orange-500 disabled:from-slate-600 disabled:to-slate-600 text-white font-medium rounded-lg transition-all shadow-lg\"\n                        >\n                            {isLoading ? 'Memproses...' : 'Tambah Balance'}\n                        </button>\n                    </div>\n                </div>\n\n                <div className=\"mt-8 p-6 bg-slate-800/30 border border-slate-700/50 rounded-xl\">\n                    <h3 className=\"text-lg font-semibold text-slate-200 mb-3\">Catatan MVP</h3>\n                    <ul className=\"space-y-2 text-sm text-slate-400\">\n                        <li className=\"flex items-start gap-2\">\n                            <svg className=\"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                            </svg>\n                            <span>Fitur ini hanya untuk keperluan testing pada MVP</span>\n                        </li>\n                        <li className=\"flex items-start gap-2\">\n                            <svg className=\"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                            </svg>\n                            <span>Balance yang ditambahkan adalah virtual (bukan transfer uang nyata)</span>\n                        </li>\n                        <li className=\"flex items-start gap-2\">\n                            <svg className=\"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                            </svg>\n                            <span>Pada versi final, integrasi payment gateway akan digunakan</span>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/admin/login/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Image' is defined but never used.","line":5,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":13,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Image"},"fix":{"range":[94,125],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Image from 'next/image';\nimport { useAuth } from '@/lib/context/AuthContext';\n\nexport default function AdminLoginPage() {\n    const [emailOrUsername, setEmailOrUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [error, setError] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n    const router = useRouter();\n    const { login } = useAuth();\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setError('');\n        setIsLoading(true);\n\n        const response = await login({\n            email_or_username: emailOrUsername,\n            password: password,\n        });\n\n        setIsLoading(false);\n\n        if (response.success && response.data?.user.role === 'admin') {\n            router.push('/admin/dashboard');\n        } else if (response.success) {\n            setError('Akun ini bukan akun admin.');\n        } else {\n            setError(response.error?.message || 'Login gagal. Silakan coba lagi.');\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center p-4 overflow-hidden\">\n            <div className=\"w-full max-w-md bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-2xl overflow-hidden border border-slate-700/50 p-8\">\n                <div className=\"mb-8 text-center\">\n                    <div className=\"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-amber-500 to-orange-500 rounded-2xl mb-4\">\n                        <svg className=\"w-8 h-8 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\n                        </svg>\n                    </div>\n                    <h1 className=\"text-2xl font-bold bg-gradient-to-r from-amber-400 to-orange-400 bg-clip-text text-transparent mb-1\">\n                        Admin Panel\n                    </h1>\n                    <p className=\"text-slate-300 text-sm\">\n                        Vessel Finance Backoffice\n                    </p>\n                </div>\n\n                <div className=\"mb-6 p-4 bg-amber-500/10 border border-amber-500/30 rounded-xl\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                        <svg className=\"w-5 h-5 text-amber-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                        </svg>\n                        <span className=\"text-amber-400 font-semibold text-sm\">Kredensial Admin (MVP)</span>\n                    </div>\n                    <div className=\"space-y-1 text-sm\">\n                        <p className=\"text-slate-300\">\n                            <span className=\"text-slate-400\">Username:</span>{' '}\n                            <code className=\"bg-slate-700/50 px-2 py-0.5 rounded text-amber-300\">admin</code>\n                        </p>\n                        <p className=\"text-slate-300\">\n                            <span className=\"text-slate-400\">Password:</span>{' '}\n                            <code className=\"bg-slate-700/50 px-2 py-0.5 rounded text-amber-300\">admin123</code>\n                        </p>\n                    </div>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\n                    {error && (\n                        <div className=\"p-3 bg-red-500/10 border border-red-500/50 rounded-lg\">\n                            <p className=\"text-red-400 text-sm\">{error}</p>\n                        </div>\n                    )}\n\n                    <div>\n                        <label htmlFor=\"emailOrUsername\" className=\"block text-sm font-medium text-slate-300 mb-1.5\">\n                            Email atau Username\n                        </label>\n                        <input\n                            type=\"text\"\n                            id=\"emailOrUsername\"\n                            value={emailOrUsername}\n                            onChange={(e) => setEmailOrUsername(e.target.value)}\n                            className=\"w-full px-3 py-2.5 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-all text-slate-100 text-sm placeholder:text-slate-500\"\n                            placeholder=\"admin\"\n                            required\n                            disabled={isLoading}\n                        />\n                    </div>\n\n                    <div>\n                        <label htmlFor=\"password\" className=\"block text-sm font-medium text-slate-300 mb-1.5\">\n                            Password\n                        </label>\n                        <input\n                            type=\"password\"\n                            id=\"password\"\n                            value={password}\n                            onChange={(e) => setPassword(e.target.value)}\n                            className=\"w-full px-3 py-2.5 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-all text-slate-100 text-sm placeholder:text-slate-500\"\n                            placeholder=\"admin123\"\n                            required\n                            disabled={isLoading}\n                        />\n                    </div>\n\n                    <button\n                        type=\"submit\"\n                        disabled={isLoading}\n                        className=\"w-full bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-500 hover:to-orange-500 disabled:from-slate-600 disabled:to-slate-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all text-sm shadow-lg shadow-amber-900/50\"\n                    >\n                        {isLoading ? 'Memproses...' : 'Masuk ke Admin Panel'}\n                    </button>\n                </form>\n\n                <div className=\"mt-6 pt-4 border-t border-slate-700\">\n                    <div className=\"flex items-center justify-center text-xs text-slate-400\">\n                        <svg className=\"w-4 h-4 text-amber-400 mr-1.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path fillRule=\"evenodd\" d=\"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z\" clipRule=\"evenodd\" />\n                        </svg>\n                        <span>Akses Terbatas - Hanya Admin</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/admin/verifikasi-pengajuan-dana/[id]/page.tsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useMemo\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":183,"column":23,"nodeType":"Identifier","endLine":183,"endColumn":30},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":369,"column":151,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[15092,15282],"text":"\n                  Tombol hanya aktif bila seluruh dokumen telah valid. Sistem otomatis memanggil smart contract minting ketika status berubah menjadi &quot;Open for Investment\".\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[15092,15282],"text":"\n                  Tombol hanya aktif bila seluruh dokumen telah valid. Sistem otomatis memanggil smart contract minting ketika status berubah menjadi &ldquo;Open for Investment\".\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[15092,15282],"text":"\n                  Tombol hanya aktif bila seluruh dokumen telah valid. Sistem otomatis memanggil smart contract minting ketika status berubah menjadi &#34;Open for Investment\".\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[15092,15282],"text":"\n                  Tombol hanya aktif bila seluruh dokumen telah valid. Sistem otomatis memanggil smart contract minting ketika status berubah menjadi &rdquo;Open for Investment\".\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":369,"column":171,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[15092,15282],"text":"\n                  Tombol hanya aktif bila seluruh dokumen telah valid. Sistem otomatis memanggil smart contract minting ketika status berubah menjadi \"Open for Investment&quot;.\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[15092,15282],"text":"\n                  Tombol hanya aktif bila seluruh dokumen telah valid. Sistem otomatis memanggil smart contract minting ketika status berubah menjadi \"Open for Investment&ldquo;.\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[15092,15282],"text":"\n                  Tombol hanya aktif bila seluruh dokumen telah valid. Sistem otomatis memanggil smart contract minting ketika status berubah menjadi \"Open for Investment&#34;.\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[15092,15282],"text":"\n                  Tombol hanya aktif bila seluruh dokumen telah valid. Sistem otomatis memanggil smart contract minting ketika status berubah menjadi \"Open for Investment&rdquo;.\n                "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useMemo, useState } from 'react';\nimport Link from 'next/link';\nimport { useParams } from 'next/navigation';\n\nconst samplePdf = '/example/sample-file.pdf';\n\ntype DocumentStatus = 'pending' | 'valid' | 'revisi';\n\ninterface DocumentRecord {\n  id: string;\n  name: string;\n  description: string;\n  fileUrl: string;\n  status: DocumentStatus;\n  note: string;\n}\n\ninterface SubmissionDetail {\n  id: string;\n  companyName: string;\n  contactPerson: string;\n  email: string;\n  phone: string;\n  buyerName: string;\n  buyerCountry: string;\n  commodity: string;\n  invoiceAmount: string;\n  tenorDays: number;\n  status: 'Menunggu Verifikasi' | 'Need Revision' | 'Open for Investment';\n  paymentTerm: string;\n  vesselEta: string;\n  documents: DocumentRecord[];\n}\n\nconst submissionStore: Record<string, SubmissionDetail> = {\n  'pengajuan-dana-001': {\n    id: 'pengajuan-dana-001',\n    companyName: 'PT Samudra Niaga Sejahtera',\n    contactPerson: 'Aditya Rahman',\n    email: 'aditya@samudraniaga.co.id',\n    phone: '+62 811 2233 7788',\n    buyerName: 'NordSea Trading BV',\n    buyerCountry: 'Belanda',\n    commodity: 'Ekspor Tuna Loin (Frozen)',\n    invoiceAmount: 'USD 98,000',\n    tenorDays: 45,\n    status: 'Menunggu Verifikasi',\n    paymentTerm: 'DP 30% - Net 70% at sight (LC)',\n    vesselEta: 'ETA Rotterdam 24 Feb 2026',\n    documents: [\n      {\n        id: 'invoice',\n        name: 'Commercial Invoice',\n        description: 'Invoice ekspor yang akan dibiayai',\n        fileUrl: samplePdf,\n        status: 'pending',\n        note: ''\n      },\n      {\n        id: 'po',\n        name: 'Purchase Order / Sales Contract',\n        description: 'PO atau kontrak penjualan dari buyer',\n        fileUrl: samplePdf,\n        status: 'pending',\n        note: ''\n      },\n      {\n        id: 'bl',\n        name: 'Bill of Lading / AWB',\n        description: 'Dokumen pengapalan sebagai bukti pengiriman',\n        fileUrl: samplePdf,\n        status: 'pending',\n        note: ''\n      },\n      {\n        id: 'packing-list',\n        name: 'Packing List',\n        description: 'Rincian barang dan jumlah kemasan',\n        fileUrl: samplePdf,\n        status: 'pending',\n        note: ''\n      },\n      {\n        id: 'insurance',\n        name: 'Insurance Policy / Cover Note',\n        description: 'Polis asuransi kargo yang masih berlaku',\n        fileUrl: samplePdf,\n        status: 'pending',\n        note: ''\n      },\n      {\n        id: 'lc',\n        name: 'Letter of Credit (LC)',\n        description: 'LC atau instrumen pembayaran yang diajukan',\n        fileUrl: samplePdf,\n        status: 'pending',\n        note: ''\n      }\n    ]\n  }\n};\n\nconst badgeStyles: Record<SubmissionDetail['status'], string> = {\n  'Menunggu Verifikasi': 'bg-amber-500/10 text-amber-200 border border-amber-500/30',\n  'Need Revision': 'bg-rose-500/10 text-rose-200 border border-rose-500/30',\n  'Open for Investment': 'bg-emerald-500/10 text-emerald-200 border border-emerald-500/30'\n};\n\nconst docStatusLabel: Record<DocumentStatus, { text: string; className: string }> = {\n  pending: { text: 'Pending', className: 'bg-slate-700/60 text-slate-200' },\n  valid: { text: 'Valid', className: 'bg-emerald-600/30 text-emerald-200' },\n  revisi: { text: 'Perlu Revisi', className: 'bg-rose-600/20 text-rose-200' }\n};\n\nexport default function VerifikasiPengajuanDanaDetail() {\n  const params = useParams<{ id: string }>();\n  const submissionId = params?.id;\n  const submission = submissionId ? submissionStore[submissionId] : undefined;\n\n  const [documents, setDocuments] = useState<DocumentRecord[]>(submission?.documents ?? []);\n  const [selectedDocId, setSelectedDocId] = useState<string>(submission?.documents?.[0]?.id ?? '');\n  const [zoom, setZoom] = useState(1);\n  const [rotation, setRotation] = useState(0);\n  const [status, setStatus] = useState<SubmissionDetail['status']>(submission?.status ?? 'Menunggu Verifikasi');\n  const [toast, setToast] = useState<string | null>(null);\n\n  if (!submission) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-slate-950 text-center px-4\">\n        <div>\n          <p className=\"text-sm text-slate-400 mb-2\">Halaman tidak ditemukan</p>\n          <Link href=\"/admin/dashboard-verifikasi\" className=\"text-cyan-400 font-semibold\">\n            Kembali ke dashboard\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  const selectedDoc = documents.find((doc) => doc.id === selectedDocId) ?? documents[0];\n  const allDocsValid = documents.length > 0 && documents.every((doc) => doc.status === 'valid');\n\n  const handleDocStatus = (targetId: string, nextStatus: DocumentStatus) => {\n    setDocuments((prev) =>\n      prev.map((doc) =>\n        doc.id === targetId\n          ? {\n              ...doc,\n              status: nextStatus,\n              note: nextStatus === 'valid' ? '' : doc.note\n            }\n          : doc\n      )\n    );\n  };\n\n  const handleDocNote = (targetId: string, value: string) => {\n    setDocuments((prev) => prev.map((doc) => (doc.id === targetId ? { ...doc, note: value } : doc)));\n  };\n\n  const handleFinalize = () => {\n    if (!allDocsValid) {\n      setToast('Mohon pastikan seluruh dokumen pendanaan sudah Valid sebelum membuka investasi.');\n      return;\n    }\n    setStatus('Open for Investment');\n    const message = 'Status berubah menjadi Open for Investment. Smart contract minting terpanggil ✅';\n    setToast(message);\n    console.log('Smart contract minting triggered for', submission.id);\n  };\n\n  const decrementZoom = () => setZoom((prev) => Math.max(0.5, parseFloat((prev - 0.25).toFixed(2))));\n  const incrementZoom = () => setZoom((prev) => Math.min(2.5, parseFloat((prev + 0.25).toFixed(2))));\n  const rotateClockwise = () => setRotation((prev) => (prev + 90) % 360);\n  const rotateCounterClockwise = () => setRotation((prev) => (prev + 270) % 360);\n  const resetViewer = () => {\n    setZoom(1);\n    setRotation(0);\n  };\n\n  const statusBadge = useMemo(\n    () => (\n      <span className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${badgeStyles[status]}`}>\n        {status}\n      </span>\n    ),\n    [status]\n  );\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 py-8 px-4\">\n      <div className=\"max-w-6xl mx-auto space-y-6\">\n        <nav className=\"text-sm text-slate-400\">\n          <Link href=\"/admin/dashboard-verifikasi\" className=\"text-cyan-400 hover:text-cyan-300\">\n            Dashboard Verifikasi\n          </Link>{' '}\n          / <span className=\"text-slate-500\">{submission.companyName}</span>\n        </nav>\n\n        <header className=\"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between\">\n          <div>\n            <p className=\"text-sm text-slate-400\">ID Pengajuan #{submission.id}</p>\n            <h1 className=\"text-3xl font-bold text-slate-50\">Verifikasi Dokumen Pengajuan Pendanaan</h1>\n            <p className=\"text-slate-400\">Pastikan dokumen transaksi ekspor sesuai sebelum membuka pendanaan.</p>\n          </div>\n          {statusBadge}\n        </header>\n\n        {toast && (\n          <div className=\"bg-slate-900/60 border border-slate-700 rounded-xl px-4 py-3 text-sm text-slate-200 flex items-center justify-between\">\n            <span>{toast}</span>\n            <button\n              onClick={() => setToast(null)}\n              className=\"text-slate-400 hover:text-slate-200 text-xs font-semibold\"\n            >\n              Tutup\n            </button>\n          </div>\n        )}\n\n        <div className=\"grid gap-6 lg:grid-cols-2\">\n          <section className=\"space-y-6\">\n            <article className=\"bg-slate-900/40 border border-slate-800 rounded-2xl p-6 space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h2 className=\"text-lg font-semibold text-slate-100\">Data Pengajuan</h2>\n                  <p className=\"text-sm text-slate-400\">Sumber: formulir pengajuan pendanaan</p>\n                </div>\n                <span className=\"text-xs text-slate-500\">Tenor {submission.tenorDays} hari</span>\n              </div>\n              <dl className=\"grid gap-4 sm:grid-cols-2 text-sm\">\n                <div>\n                  <dt className=\"text-slate-500\">Perusahaan</dt>\n                  <dd className=\"text-slate-100 font-medium\">{submission.companyName}</dd>\n                </div>\n                <div>\n                  <dt className=\"text-slate-500\">Contact Person</dt>\n                  <dd className=\"text-slate-100 font-medium\">{submission.contactPerson}</dd>\n                </div>\n                <div>\n                  <dt className=\"text-slate-500\">Email</dt>\n                  <dd className=\"text-slate-100\">{submission.email}</dd>\n                </div>\n                <div>\n                  <dt className=\"text-slate-500\">Nomor Tlp</dt>\n                  <dd className=\"text-slate-100\">{submission.phone}</dd>\n                </div>\n                <div>\n                  <dt className=\"text-slate-500\">Nilai Invoice</dt>\n                  <dd className=\"text-slate-100 font-medium\">{submission.invoiceAmount}</dd>\n                </div>\n                <div>\n                  <dt className=\"text-slate-500\">Skema Pembayaran</dt>\n                  <dd className=\"text-slate-100 font-medium\">{submission.paymentTerm}</dd>\n                </div>\n              </dl>\n            </article>\n\n            <article className=\"bg-slate-900/40 border border-slate-800 rounded-2xl p-6 space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h2 className=\"text-lg font-semibold text-slate-100\">Detail Buyer & Shipment</h2>\n                  <p className=\"text-sm text-slate-400\">Konfirmasi kesesuaian transaksi dan jadwal kirim.</p>\n                </div>\n                <span className=\"text-xs text-slate-500\">{submission.vesselEta}</span>\n              </div>\n              <dl className=\"grid gap-4 sm:grid-cols-2 text-sm\">\n                <div>\n                  <dt className=\"text-slate-500\">Buyer</dt>\n                  <dd className=\"text-slate-100 font-medium\">{submission.buyerName}</dd>\n                </div>\n                <div>\n                  <dt className=\"text-slate-500\">Negara Buyer</dt>\n                  <dd className=\"text-slate-100\">{submission.buyerCountry}</dd>\n                </div>\n                <div>\n                  <dt className=\"text-slate-500\">Komoditas</dt>\n                  <dd className=\"text-slate-100\">{submission.commodity}</dd>\n                </div>\n                <div>\n                  <dt className=\"text-slate-500\">Tujuan Pembayaran</dt>\n                  <dd className=\"text-slate-100\">{submission.paymentTerm}</dd>\n                </div>\n              </dl>\n            </article>\n\n            <article className=\"bg-slate-900/40 border border-slate-800 rounded-2xl p-6 space-y-5\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h2 className=\"text-lg font-semibold text-slate-100\">Verifikasi Dokumen</h2>\n                  <p className=\"text-sm text-slate-400\">Klik dokumen untuk melihat pratinjau PDF di panel kanan.</p>\n                </div>\n                <span className=\"text-xs text-slate-500\">{documents.filter((doc) => doc.status === 'valid').length}/{documents.length} valid</span>\n              </div>\n\n              <div className=\"space-y-4\">\n                {documents.map((doc) => (\n                  <div key={doc.id} className=\"border border-slate-800 rounded-xl p-4 bg-slate-950/40\">\n                    <div className=\"flex items-start justify-between gap-3\">\n                      <div>\n                        <button\n                          onClick={() => setSelectedDocId(doc.id)}\n                          className=\"text-left\"\n                        >\n                          <p className=\"text-slate-100 font-semibold flex items-center gap-2\">\n                            {doc.name}\n                            {selectedDoc?.id === doc.id && <span className=\"text-xs text-cyan-300\">(Sedang ditinjau)</span>}\n                          </p>\n                          <p className=\"text-xs text-slate-400 mt-1\">{doc.description}</p>\n                        </button>\n                      </div>\n                      <span className={`px-2.5 py-1 text-xs rounded-full font-semibold ${docStatusLabel[doc.status].className}`}>\n                        {docStatusLabel[doc.status].text}\n                      </span>\n                    </div>\n\n                    <div className=\"flex flex-wrap gap-3 mt-3\">\n                      <button\n                        onClick={() => handleDocStatus(doc.id, 'valid')}\n                        className={`px-4 py-2 rounded-lg text-sm font-semibold transition-all ${\n                          doc.status === 'valid'\n                            ? 'bg-emerald-500 text-white'\n                            : 'bg-slate-800 text-slate-200 hover:bg-slate-700'\n                        }`}\n                      >\n                        Valid\n                      </button>\n                      <button\n                        onClick={() => handleDocStatus(doc.id, 'revisi')}\n                        className={`px-4 py-2 rounded-lg text-sm font-semibold transition-all ${\n                          doc.status === 'revisi'\n                            ? 'bg-rose-500 text-white'\n                            : 'bg-slate-800 text-slate-200 hover:bg-slate-700'\n                        }`}\n                      >\n                        Revisi\n                      </button>\n                    </div>\n\n                    {doc.status === 'revisi' && (\n                      <div className=\"mt-3\">\n                        <label className=\"block text-xs font-semibold text-slate-400 mb-2\">\n                          Catatan Revisi\n                        </label>\n                        <textarea\n                          value={doc.note}\n                          onChange={(e) => handleDocNote(doc.id, e.target.value)}\n                          placeholder=\"Tuliskan alasan revisi dan dokumen pendukung yang dibutuhkan...\"\n                          className=\"w-full px-3 py-2 rounded-lg bg-slate-950/60 border border-slate-800 text-sm text-slate-100 focus:ring-2 focus:ring-rose-500\"\n                          rows={3}\n                        />\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n\n              <div className=\"flex flex-col gap-3 border-t border-slate-800 pt-4\">\n                <button\n                  onClick={handleFinalize}\n                  disabled={!allDocsValid || status === 'Open for Investment'}\n                  className=\"px-4 py-3 rounded-xl text-sm font-semibold bg-gradient-to-r from-cyan-600 to-teal-600 text-white disabled:from-slate-700 disabled:to-slate-700 disabled:text-slate-400\"\n                >\n                  Setujui & Buka Pendanaan\n                </button>\n                <p className=\"text-xs text-slate-500\">\n                  Tombol hanya aktif bila seluruh dokumen telah valid. Sistem otomatis memanggil smart contract minting ketika status berubah menjadi \"Open for Investment\".\n                </p>\n              </div>\n            </article>\n          </section>\n\n          <section className=\"space-y-4\">\n            <div className=\"bg-slate-900/40 border border-slate-800 rounded-2xl p-6 h-full flex flex-col\">\n              <div className=\"flex flex-wrap items-center gap-3 justify-between\">\n                <div>\n                  <p className=\"text-sm text-slate-400\">Preview Dokumen</p>\n                  <h2 className=\"text-lg font-semibold text-slate-100\">{selectedDoc?.name ?? 'Pilih dokumen'}</h2>\n                </div>\n                <div className=\"flex flex-wrap gap-2\">\n                  <button onClick={decrementZoom} className=\"px-3 py-2 text-xs font-semibold rounded-lg bg-slate-800 text-slate-100\">\n                    Zoom -\n                  </button>\n                  <button onClick={incrementZoom} className=\"px-3 py-2 text-xs font-semibold rounded-lg bg-slate-800 text-slate-100\">\n                    Zoom +\n                  </button>\n                  <button onClick={rotateCounterClockwise} className=\"px-3 py-2 text-xs font-semibold rounded-lg bg-slate-800 text-slate-100\">\n                    ⟲\n                  </button>\n                  <button onClick={rotateClockwise} className=\"px-3 py-2 text-xs font-semibold rounded-lg bg-slate-800 text-slate-100\">\n                    ⟳\n                  </button>\n                  <button onClick={resetViewer} className=\"px-3 py-2 text-xs font-semibold rounded-lg bg-slate-700 text-slate-200\">\n                    Reset\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"mt-4 text-xs text-slate-400 flex items-center justify-between\">\n                <span>Zoom: {(zoom * 100).toFixed(0)}%</span>\n                <span>Rotasi: {rotation}°</span>\n              </div>\n\n              <div className=\"mt-4 flex-1 border border-slate-800 rounded-xl bg-slate-950/50 overflow-auto\">\n                {selectedDoc ? (\n                  <div\n                    className=\"origin-top-left\"\n                    style={{\n                      transform: `scale(${zoom}) rotate(${rotation}deg)`,\n                      transformOrigin: 'top left'\n                    }}\n                  >\n                    <iframe\n                      src={`${selectedDoc.fileUrl}#toolbar=0`}\n                      title={selectedDoc.name}\n                      className=\"w-[900px] h-[1100px]\"\n                    />\n                  </div>\n                ) : (\n                  <div className=\"flex items-center justify-center h-full text-slate-500 text-sm\">\n                    Pilih dokumen pada panel kiri untuk melihat pratinjau.\n                  </div>\n                )}\n              </div>\n            </div>\n          </section>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/admin/dashboard/balance/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'GrantBalanceResponse' is defined but never used.","line":6,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":54,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"GrantBalanceResponse"},"fix":{"range":[215,237],"text":""},"desc":"Remove unused variable \"GrantBalanceResponse\"."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadUsers'. Either include it or remove the dependency array.","line":37,"column":6,"nodeType":"ArrayExpression","endLine":37,"endColumn":24,"suggestions":[{"desc":"Update the dependencies array to be: [loadUsers, page, roleFilter]","fix":{"range":[1304,1322],"text":"[loadUsers, page, roleFilter]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":74,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport { AuthGuard } from '@/lib/components/AuthGuard';\nimport { DashboardLayout } from '@/lib/components/DashboardLayout';\nimport { adminAPI, UserListItem, GrantBalanceResponse } from '@/lib/api/admin';\n\nfunction AdminBalanceContent() {\n  const [users, setUsers] = useState<UserListItem[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [search, setSearch] = useState('');\n  const [roleFilter, setRoleFilter] = useState('');\n  const [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [selectedUser, setSelectedUser] = useState<UserListItem | null>(null);\n  const [amount, setAmount] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [message, setMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\n\n  const loadUsers = async () => {\n    setLoading(true);\n    try {\n      const res = await adminAPI.listUsers(page, 10, roleFilter, search);\n      if (res.success && res.data) {\n        setUsers(res.data.users || []);\n        setTotalPages(res.data.total_pages);\n      }\n    } catch (err) {\n      console.error('Failed to load users', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadUsers();\n  }, [page, roleFilter]);\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    setPage(1);\n    loadUsers();\n  };\n\n  const handleGrantBalance = async () => {\n    if (!selectedUser || !amount) return;\n\n    const amountNum = parseFloat(amount);\n    if (isNaN(amountNum)) {\n      setMessage({ type: 'error', text: 'Jumlah tidak valid' });\n      return;\n    }\n\n    setSubmitting(true);\n    setMessage(null);\n\n    try {\n      const res = await adminAPI.grantBalance({\n        user_id: selectedUser.id,\n        amount: amountNum,\n      });\n\n      if (res.success && res.data) {\n        setMessage({\n          type: 'success',\n          text: `Berhasil memberikan Rp ${amountNum.toLocaleString('id-ID')} ke ${selectedUser.email}. Saldo baru: Rp ${res.data.new_balance.toLocaleString('id-ID')}`,\n        });\n        setAmount('');\n        setSelectedUser(null);\n        loadUsers();\n      } else {\n        setMessage({ type: 'error', text: res.error?.message || 'Gagal memberikan balance' });\n      }\n    } catch (err) {\n      setMessage({ type: 'error', text: 'Terjadi kesalahan' });\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const getRoleBadge = (role: string) => {\n    const config: Record<string, { label: string; className: string }> = {\n      investor: { label: 'Investor', className: 'bg-cyan-500/10 text-cyan-400' },\n      mitra: { label: 'Mitra', className: 'bg-teal-500/10 text-teal-400' },\n      admin: { label: 'Admin', className: 'bg-purple-500/10 text-purple-400' },\n    };\n    const c = config[role] || { label: role, className: 'bg-slate-500/10 text-slate-400' };\n    return <span className={`px-2 py-1 rounded text-xs font-medium ${c.className}`}>{c.label}</span>;\n  };\n\n  return (\n    <DashboardLayout role=\"admin\">\n      <div className=\"space-y-6\">\n        {/* Header */}\n        <div>\n          <h1 className=\"text-2xl font-bold text-white\">Grant Balance</h1>\n          <p className=\"text-slate-400 mt-1\">Berikan saldo ke user yang terdaftar</p>\n        </div>\n\n        {/* Message */}\n        {message && (\n          <div\n            className={`p-4 rounded-lg ${\n              message.type === 'success'\n                ? 'bg-green-500/10 border border-green-500/20 text-green-400'\n                : 'bg-red-500/10 border border-red-500/20 text-red-400'\n            }`}\n          >\n            {message.text}\n          </div>\n        )}\n\n        {/* Grant Form - if user selected */}\n        {selectedUser && (\n          <div className=\"p-6 bg-purple-500/10 border border-purple-500/20 rounded-xl\">\n            <h2 className=\"text-lg font-semibold text-white mb-4\">Grant Balance ke User</h2>\n            <div className=\"grid md:grid-cols-2 gap-4\">\n              <div>\n                <p className=\"text-sm text-slate-400 mb-1\">User</p>\n                <p className=\"text-white font-medium\">{selectedUser.email}</p>\n                <p className=\"text-sm text-slate-400\">{selectedUser.full_name || selectedUser.username || '-'}</p>\n                <div className=\"mt-2\">{getRoleBadge(selectedUser.role)}</div>\n              </div>\n              <div>\n                <p className=\"text-sm text-slate-400 mb-1\">Saldo Saat Ini</p>\n                <p className=\"text-xl font-bold text-white\">\n                  Rp {selectedUser.balance_idr.toLocaleString('id-ID')}\n                </p>\n              </div>\n            </div>\n            <div className=\"mt-4\">\n              <label className=\"block text-sm text-slate-400 mb-2\">Jumlah yang Diberikan (IDR)</label>\n              <div className=\"flex gap-3\">\n                <input\n                  type=\"number\"\n                  value={amount}\n                  onChange={(e) => setAmount(e.target.value)}\n                  placeholder=\"Contoh: 1000000\"\n                  className=\"flex-1 px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500\"\n                />\n                <button\n                  onClick={handleGrantBalance}\n                  disabled={submitting || !amount}\n                  className={`px-6 py-2 rounded-lg font-medium transition-all ${\n                    submitting || !amount\n                      ? 'bg-slate-600 text-slate-400 cursor-not-allowed'\n                      : 'bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 text-white'\n                  }`}\n                >\n                  {submitting ? 'Memproses...' : 'Grant Balance'}\n                </button>\n                <button\n                  onClick={() => setSelectedUser(null)}\n                  className=\"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg transition-all\"\n                >\n                  Batal\n                </button>\n              </div>\n              <p className=\"text-xs text-slate-500 mt-2\">\n                Masukkan nilai negatif untuk mengurangi saldo. Contoh: -500000\n              </p>\n            </div>\n          </div>\n        )}\n\n        {/* Search & Filter */}\n        <div className=\"flex flex-col md:flex-row gap-4\">\n          <form onSubmit={handleSearch} className=\"flex-1 flex gap-2\">\n            <input\n              type=\"text\"\n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n              placeholder=\"Cari email, username, atau nama...\"\n              className=\"flex-1 px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-purple-500\"\n            />\n            <button\n              type=\"submit\"\n              className=\"px-4 py-2 bg-purple-500 hover:bg-purple-400 text-white rounded-lg transition-all\"\n            >\n              Cari\n            </button>\n          </form>\n          <select\n            value={roleFilter}\n            onChange={(e) => {\n              setRoleFilter(e.target.value);\n              setPage(1);\n            }}\n            className=\"px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:border-purple-500\"\n          >\n            <option value=\"\">Semua Role</option>\n            <option value=\"investor\">Investor</option>\n            <option value=\"mitra\">Mitra</option>\n            <option value=\"admin\">Admin</option>\n          </select>\n        </div>\n\n        {/* Users Table */}\n        <div className=\"bg-slate-800/30 border border-slate-700/50 rounded-xl overflow-hidden\">\n          {loading ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-400\"></div>\n            </div>\n          ) : users.length === 0 ? (\n            <div className=\"text-center py-12 text-slate-400\">Tidak ada user ditemukan</div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"text-left text-slate-400 text-sm border-b border-slate-700/50\">\n                    <th className=\"px-6 py-4 font-medium\">User</th>\n                    <th className=\"px-6 py-4 font-medium\">Role</th>\n                    <th className=\"px-6 py-4 font-medium\">Saldo</th>\n                    <th className=\"px-6 py-4 font-medium\">Status</th>\n                    <th className=\"px-6 py-4 font-medium\">Aksi</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-slate-700/50\">\n                  {users.map((user) => (\n                    <tr key={user.id} className=\"hover:bg-slate-800/30\">\n                      <td className=\"px-6 py-4\">\n                        <p className=\"text-white font-medium\">{user.email}</p>\n                        <p className=\"text-sm text-slate-400\">{user.full_name || user.username || '-'}</p>\n                      </td>\n                      <td className=\"px-6 py-4\">{getRoleBadge(user.role)}</td>\n                      <td className=\"px-6 py-4\">\n                        <span className=\"text-white font-medium\">\n                          Rp {user.balance_idr.toLocaleString('id-ID')}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <div className=\"flex flex-col gap-1\">\n                          <span\n                            className={`px-2 py-0.5 rounded text-xs w-fit ${\n                              user.is_verified\n                                ? 'bg-green-500/10 text-green-400'\n                                : 'bg-yellow-500/10 text-yellow-400'\n                            }`}\n                          >\n                            {user.is_verified ? 'Verified' : 'Unverified'}\n                          </span>\n                          <span\n                            className={`px-2 py-0.5 rounded text-xs w-fit ${\n                              user.profile_completed\n                                ? 'bg-green-500/10 text-green-400'\n                                : 'bg-slate-500/10 text-slate-400'\n                            }`}\n                          >\n                            {user.profile_completed ? 'Profile OK' : 'Incomplete'}\n                          </span>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <button\n                          onClick={() => setSelectedUser(user)}\n                          className=\"px-3 py-1.5 bg-purple-500/20 hover:bg-purple-500/30 border border-purple-500/30 text-purple-400 rounded-lg text-sm font-medium transition-all\"\n                        >\n                          Grant Balance\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n\n          {/* Pagination */}\n          {totalPages > 1 && (\n            <div className=\"flex items-center justify-between px-6 py-4 border-t border-slate-700/50\">\n              <button\n                onClick={() => setPage(Math.max(1, page - 1))}\n                disabled={page === 1}\n                className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${\n                  page === 1\n                    ? 'text-slate-500 cursor-not-allowed'\n                    : 'text-slate-300 hover:text-white hover:bg-slate-700'\n                }`}\n              >\n                Sebelumnya\n              </button>\n              <span className=\"text-sm text-slate-400\">\n                Halaman {page} dari {totalPages}\n              </span>\n              <button\n                onClick={() => setPage(Math.min(totalPages, page + 1))}\n                disabled={page === totalPages}\n                className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${\n                  page === totalPages\n                    ? 'text-slate-500 cursor-not-allowed'\n                    : 'text-slate-300 hover:text-white hover:bg-slate-700'\n                }`}\n              >\n                Selanjutnya\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </DashboardLayout>\n  );\n}\n\nexport default function AdminBalancePage() {\n  return (\n    <AuthGuard allowedRoles={['admin']}>\n      <AdminBalanceContent />\n    </AuthGuard>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/admin/dashboard/invoices/[id]/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":12,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useParams, useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { AuthGuard } from '@/lib/components/AuthGuard';\nimport { DashboardLayout } from '@/lib/components/DashboardLayout';\nimport { adminAPI, InvoiceReviewData, GradeSuggestion } from '@/lib/api/admin';\n\nfunction InvoiceReviewDetailContent() {\n  const params = useParams();\n  const router = useRouter();\n  const invoiceId = params.id as string;\n\n  const [reviewData, setReviewData] = useState<InvoiceReviewData | null>(null);\n  const [gradeSuggestion, setGradeSuggestion] = useState<GradeSuggestion | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [selectedGrade, setSelectedGrade] = useState<string>('');\n  const [notes, setNotes] = useState('');\n  const [rejectReason, setRejectReason] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [showRejectModal, setShowRejectModal] = useState(false);\n  const [showApproveModal, setShowApproveModal] = useState(false);\n  const [actionCompleted, setActionCompleted] = useState<'approved' | 'rejected' | null>(null);\n\n  useEffect(() => {\n    const loadData = async () => {\n      setLoading(true);\n      try {\n        const [reviewRes, gradeRes] = await Promise.all([\n          adminAPI.getInvoiceReviewData(invoiceId),\n          adminAPI.getInvoiceGradeSuggestion(invoiceId),\n        ]);\n\n        if (reviewRes.success && reviewRes.data) {\n          setReviewData(reviewRes.data);\n        }\n        if (gradeRes.success && gradeRes.data) {\n          setGradeSuggestion(gradeRes.data);\n          setSelectedGrade(gradeRes.data.suggested_grade);\n        }\n      } catch (err) {\n        console.error('Failed to load review data', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadData();\n  }, [invoiceId]);\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('id-ID', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    });\n  };\n\n  const formatCurrency = (amount: number, currency: string = 'IDR') => {\n    if (currency === 'IDR') {\n      return `Rp ${amount.toLocaleString('id-ID')}`;\n    }\n    return `${currency} ${amount.toLocaleString('en-US')}`;\n  };\n\n  const getGradeColor = (grade: string) => {\n    switch (grade) {\n      case 'A': return 'text-green-400 bg-green-500/10 border-green-500/30';\n      case 'B': return 'text-yellow-400 bg-yellow-500/10 border-yellow-500/30';\n      case 'C': return 'text-red-400 bg-red-500/10 border-red-500/30';\n      default: return 'text-slate-400 bg-slate-500/10 border-slate-500/30';\n    }\n  };\n\n  const getRiskColor = (risk: string) => {\n    switch (risk?.toLowerCase()) {\n      case 'low': return 'text-green-400';\n      case 'medium': return 'text-yellow-400';\n      case 'high': return 'text-red-400';\n      default: return 'text-slate-400';\n    }\n  };\n\n  const handleApprove = async () => {\n    if (!selectedGrade) {\n      alert('Pilih grade terlebih dahulu');\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      const res = await adminAPI.approveInvoice(invoiceId, {\n        grade: selectedGrade,\n        notes: notes || undefined,\n      });\n\n      if (res.success) {\n        setActionCompleted('approved');\n        setShowApproveModal(false);\n      } else {\n        alert(res.error?.message || 'Gagal menyetujui invoice');\n      }\n    } catch (err) {\n      console.error('Failed to approve invoice', err);\n      alert('Terjadi kesalahan saat menyetujui invoice');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleReject = async () => {\n    if (!rejectReason.trim()) {\n      alert('Alasan penolakan harus diisi');\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      const res = await adminAPI.rejectInvoice(invoiceId, rejectReason);\n\n      if (res.success) {\n        setActionCompleted('rejected');\n        setShowRejectModal(false);\n      } else {\n        alert(res.error?.message || 'Gagal menolak invoice');\n      }\n    } catch (err) {\n      console.error('Failed to reject invoice', err);\n      alert('Terjadi kesalahan saat menolak invoice');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <DashboardLayout role=\"admin\">\n        <div className=\"flex items-center justify-center py-16\">\n          <div className=\"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-purple-400\"></div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  if (actionCompleted) {\n    return (\n      <DashboardLayout role=\"admin\">\n        <div className=\"max-w-xl mx-auto\">\n          <div className=\"bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-2xl border border-slate-700/50 p-8 text-center\">\n            <div className={`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${actionCompleted === 'approved' ? 'bg-green-500/20' : 'bg-red-500/20'}`}>\n              {actionCompleted === 'approved' ? (\n                <svg className=\"w-8 h-8 text-green-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                </svg>\n              ) : (\n                <svg className=\"w-8 h-8 text-red-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n                </svg>\n              )}\n            </div>\n            <h2 className=\"text-2xl font-bold text-slate-100 mb-3\">\n              {actionCompleted === 'approved' ? 'Invoice Disetujui' : 'Invoice Ditolak'}\n            </h2>\n            <p className=\"text-slate-300 mb-6\">\n              {actionCompleted === 'approved'\n                ? 'Invoice berhasil disetujui. Anda dapat membuat funding pool untuk invoice ini.'\n                : 'Invoice telah ditolak. Mitra akan mendapat notifikasi.'}\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n              {actionCompleted === 'approved' && (\n                <Link\n                  href={`/admin/dashboard/pools/create?invoice_id=${invoiceId}`}\n                  className=\"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 text-white font-medium rounded-lg transition-all shadow-lg\"\n                >\n                  Buat Funding Pool\n                </Link>\n              )}\n              <Link\n                href=\"/admin/dashboard/invoices\"\n                className=\"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-slate-200 font-medium rounded-lg transition-all\"\n              >\n                Kembali ke Daftar\n              </Link>\n            </div>\n          </div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  if (!reviewData) {\n    return (\n      <DashboardLayout role=\"admin\">\n        <div className=\"text-center py-16\">\n          <p className=\"text-slate-400\">Data invoice tidak ditemukan</p>\n          <Link href=\"/admin/dashboard/invoices\" className=\"text-purple-400 hover:text-purple-300 mt-4 inline-block\">\n            Kembali ke daftar\n          </Link>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  const { invoice, exporter, documents } = reviewData;\n\n  return (\n    <DashboardLayout role=\"admin\">\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <Link\n              href=\"/admin/dashboard/invoices\"\n              className=\"inline-flex items-center text-purple-400 hover:text-purple-300 text-sm font-medium mb-4 transition-colors\"\n            >\n              <svg className=\"w-4 h-4 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z\" clipRule=\"evenodd\" />\n              </svg>\n              Kembali\n            </Link>\n            <h1 className=\"text-2xl font-bold text-white\">Review Invoice</h1>\n            <p className=\"text-slate-400 mt-1\">Invoice #{invoice.invoice_number}</p>\n          </div>\n        </div>\n\n        <div className=\"grid lg:grid-cols-3 gap-6\">\n          <div className=\"lg:col-span-2 space-y-6\">\n            <div className=\"bg-slate-800/30 border border-slate-700/50 rounded-xl p-6\">\n              <h2 className=\"text-lg font-semibold text-white mb-4\">Informasi Invoice</h2>\n              <div className=\"grid md:grid-cols-2 gap-4\">\n                <div>\n                  <p className=\"text-slate-400 text-sm\">Nomor Invoice</p>\n                  <p className=\"text-white font-medium\">{invoice.invoice_number}</p>\n                </div>\n                <div>\n                  <p className=\"text-slate-400 text-sm\">Tanggal Dibuat</p>\n                  <p className=\"text-white font-medium\">{formatDate(invoice.created_at)}</p>\n                </div>\n                <div>\n                  <p className=\"text-slate-400 text-sm\">Jatuh Tempo</p>\n                  <p className=\"text-white font-medium\">{formatDate(invoice.due_date)}</p>\n                </div>\n                <div>\n                  <p className=\"text-slate-400 text-sm\">Durasi Pendanaan</p>\n                  <p className=\"text-white font-medium\">{invoice.funding_duration_days} hari</p>\n                </div>\n                <div>\n                  <p className=\"text-slate-400 text-sm\">Jumlah Original</p>\n                  <p className=\"text-white font-medium\">\n                    {invoice.original_currency} {(invoice.original_amount || invoice.amount).toLocaleString('en-US')}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-slate-400 text-sm\">Jumlah IDR</p>\n                  <p className=\"text-white font-medium\">{formatCurrency(invoice.idr_amount || invoice.amount, 'IDR')}</p>\n                </div>\n              </div>\n\n              <div className=\"mt-6 pt-6 border-t border-slate-700/50\">\n                <h3 className=\"text-sm font-medium text-slate-300 mb-3\">Konfigurasi Tranche</h3>\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  <div className=\"p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg\">\n                    <p className=\"text-blue-400 text-sm font-medium\">Priority Tranche</p>\n                    <p className=\"text-white text-lg font-bold\">{(invoice.priority_ratio * 100).toFixed(0)}%</p>\n                    <p className=\"text-slate-400 text-xs\">Yield: {invoice.priority_interest_rate || 10}% p.a.</p>\n                  </div>\n                  <div className=\"p-4 bg-orange-500/10 border border-orange-500/20 rounded-lg\">\n                    <p className=\"text-orange-400 text-sm font-medium\">Catalyst Tranche</p>\n                    <p className=\"text-white text-lg font-bold\">{(invoice.catalyst_ratio * 100).toFixed(0)}%</p>\n                    <p className=\"text-slate-400 text-xs\">Yield: {invoice.catalyst_interest_rate || 15}% p.a.</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-slate-800/30 border border-slate-700/50 rounded-xl p-6\">\n              <h2 className=\"text-lg font-semibold text-white mb-4\">Informasi Buyer</h2>\n              <div className=\"grid md:grid-cols-2 gap-4\">\n                <div>\n                  <p className=\"text-slate-400 text-sm\">Nama Perusahaan</p>\n                  <p className=\"text-white font-medium\">{invoice.buyer_name}</p>\n                </div>\n                <div>\n                  <p className=\"text-slate-400 text-sm\">Negara</p>\n                  <p className=\"text-white font-medium\">{invoice.buyer_country}</p>\n                </div>\n                <div>\n                  <p className=\"text-slate-400 text-sm\">Repeat Buyer</p>\n                  <p className={`font-medium ${invoice.is_repeat_buyer ? 'text-green-400' : 'text-slate-400'}`}>\n                    {invoice.is_repeat_buyer ? 'Ya' : 'Tidak'}\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-slate-800/30 border border-slate-700/50 rounded-xl p-6\">\n              <h2 className=\"text-lg font-semibold text-white mb-4\">Informasi Mitra</h2>\n              <div className=\"grid md:grid-cols-2 gap-4\">\n                <div>\n                  <p className=\"text-slate-400 text-sm\">Email</p>\n                  <p className=\"text-white font-medium\">{exporter?.email || '-'}</p>\n                </div>\n                <div>\n                  <p className=\"text-slate-400 text-sm\">Nama</p>\n                  <p className=\"text-white font-medium\">{exporter?.full_name || '-'}</p>\n                </div>\n                <div>\n                  <p className=\"text-slate-400 text-sm\">Perusahaan</p>\n                  <p className=\"text-white font-medium\">{exporter?.company_name || '-'}</p>\n                </div>\n                <div>\n                  <p className=\"text-slate-400 text-sm\">Telepon</p>\n                  <p className=\"text-white font-medium\">{exporter?.phone || '-'}</p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-slate-800/30 border border-slate-700/50 rounded-xl p-6\">\n              <h2 className=\"text-lg font-semibold text-white mb-4\">Dokumen</h2>\n              {documents && documents.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {documents.map((doc, index) => (\n                    <div key={index} className=\"flex items-center justify-between p-4 bg-slate-900/50 rounded-lg\">\n                      <div className=\"flex items-center space-x-3\">\n                        <svg className=\"w-8 h-8 text-purple-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path fillRule=\"evenodd\" d=\"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z\" clipRule=\"evenodd\" />\n                        </svg>\n                        <div>\n                          <p className=\"text-slate-200 font-medium\">{doc.file_name}</p>\n                          <p className=\"text-slate-500 text-xs capitalize\">{doc.document_type.replace(/_/g, ' ')}</p>\n                        </div>\n                      </div>\n                      <a\n                        href={doc.file_url}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"px-3 py-1 bg-purple-500/20 hover:bg-purple-500/30 border border-purple-500/30 rounded text-sm text-purple-400 transition-all\"\n                      >\n                        Lihat\n                      </a>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <p className=\"text-slate-400 text-center py-4\">Tidak ada dokumen</p>\n              )}\n            </div>\n          </div>\n\n          <div className=\"space-y-6\">\n            {gradeSuggestion && (\n              <div className=\"bg-slate-800/30 border border-slate-700/50 rounded-xl p-6\">\n                <h2 className=\"text-lg font-semibold text-white mb-4\">Grade Suggestion</h2>\n\n                <div className=\"text-center mb-6\">\n                  <div className={`inline-flex items-center justify-center w-20 h-20 rounded-full text-3xl font-bold border-2 ${getGradeColor(gradeSuggestion.suggested_grade)}`}>\n                    {gradeSuggestion.suggested_grade}\n                  </div>\n                  <p className=\"text-slate-400 text-sm mt-2\">Score: {gradeSuggestion.grade_score}/100</p>\n                </div>\n\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-slate-400 text-sm\">Country Risk</span>\n                    <span className={`font-medium capitalize ${getRiskColor(gradeSuggestion.country_risk)}`}>\n                      {gradeSuggestion.country_risk}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-slate-400 text-sm\">Country Score</span>\n                    <span className=\"text-white font-medium\">{gradeSuggestion.country_score}</span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-slate-400 text-sm\">History Score</span>\n                    <span className=\"text-white font-medium\">{gradeSuggestion.history_score}</span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-slate-400 text-sm\">Document Score</span>\n                    <span className=\"text-white font-medium\">{gradeSuggestion.document_score}</span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-slate-400 text-sm\">Funding Limit</span>\n                    <span className=\"text-white font-medium\">{gradeSuggestion.funding_limit}%</span>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div className=\"bg-slate-800/30 border border-slate-700/50 rounded-xl p-6\">\n              <h2 className=\"text-lg font-semibold text-white mb-4\">Pilih Grade</h2>\n\n              <div className=\"grid grid-cols-3 gap-3 mb-4\">\n                {['A', 'B', 'C'].map((grade) => (\n                  <button\n                    key={grade}\n                    onClick={() => setSelectedGrade(grade)}\n                    className={`p-4 rounded-lg border-2 text-2xl font-bold transition-all ${\n                      selectedGrade === grade\n                        ? getGradeColor(grade)\n                        : 'text-slate-500 bg-slate-800/50 border-slate-700 hover:border-slate-600'\n                    }`}\n                  >\n                    {grade}\n                  </button>\n                ))}\n              </div>\n\n              <div className=\"mb-4\">\n                <label className=\"block text-sm text-slate-400 mb-2\">Catatan (Opsional)</label>\n                <textarea\n                  value={notes}\n                  onChange={(e) => setNotes(e.target.value)}\n                  rows={3}\n                  className=\"w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-slate-100 focus:ring-2 focus:ring-purple-500 focus:outline-none\"\n                  placeholder=\"Tambahkan catatan...\"\n                />\n              </div>\n\n              <div className=\"space-y-3\">\n                <button\n                  onClick={() => setShowApproveModal(true)}\n                  disabled={!selectedGrade}\n                  className=\"w-full px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-400 hover:to-emerald-400 disabled:from-slate-700 disabled:to-slate-700 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-all\"\n                >\n                  Approve Invoice\n                </button>\n                <button\n                  onClick={() => setShowRejectModal(true)}\n                  className=\"w-full px-4 py-3 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 text-red-400 font-medium rounded-lg transition-all\"\n                >\n                  Reject Invoice\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {showApproveModal && (\n          <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50\">\n            <div className=\"bg-slate-800 border border-slate-700 rounded-2xl p-6 max-w-md w-full mx-4\">\n              <h3 className=\"text-xl font-bold text-white mb-4\">Konfirmasi Persetujuan</h3>\n              <p className=\"text-slate-300 mb-6\">\n                Apakah Anda yakin ingin menyetujui invoice ini dengan Grade <span className={`font-bold ${getGradeColor(selectedGrade).split(' ')[0]}`}>{selectedGrade}</span>?\n              </p>\n              <div className=\"flex space-x-3\">\n                <button\n                  onClick={() => setShowApproveModal(false)}\n                  className=\"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg transition-all\"\n                >\n                  Batal\n                </button>\n                <button\n                  onClick={handleApprove}\n                  disabled={isSubmitting}\n                  className=\"flex-1 px-4 py-2 bg-green-500 hover:bg-green-400 text-white rounded-lg transition-all disabled:bg-slate-600\"\n                >\n                  {isSubmitting ? 'Memproses...' : 'Ya, Approve'}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {showRejectModal && (\n          <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50\">\n            <div className=\"bg-slate-800 border border-slate-700 rounded-2xl p-6 max-w-md w-full mx-4\">\n              <h3 className=\"text-xl font-bold text-white mb-4\">Tolak Invoice</h3>\n              <div className=\"mb-4\">\n                <label className=\"block text-sm text-slate-400 mb-2\">Alasan Penolakan <span className=\"text-red-400\">*</span></label>\n                <textarea\n                  value={rejectReason}\n                  onChange={(e) => setRejectReason(e.target.value)}\n                  rows={4}\n                  className=\"w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-slate-100 focus:ring-2 focus:ring-red-500 focus:outline-none\"\n                  placeholder=\"Masukkan alasan penolakan...\"\n                />\n              </div>\n              <div className=\"flex space-x-3\">\n                <button\n                  onClick={() => setShowRejectModal(false)}\n                  className=\"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg transition-all\"\n                >\n                  Batal\n                </button>\n                <button\n                  onClick={handleReject}\n                  disabled={isSubmitting || !rejectReason.trim()}\n                  className=\"flex-1 px-4 py-2 bg-red-500 hover:bg-red-400 text-white rounded-lg transition-all disabled:bg-slate-600\"\n                >\n                  {isSubmitting ? 'Memproses...' : 'Tolak Invoice'}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  );\n}\n\nexport default function InvoiceReviewDetailPage() {\n  return (\n    <AuthGuard allowedRoles={['admin']}>\n      <InvoiceReviewDetailContent />\n    </AuthGuard>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/admin/dashboard/invoices/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/admin/dashboard/mitra/[id]/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":59,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":84,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":84,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":108,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":108,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { useParams } from 'next/navigation';\nimport { DashboardLayout } from '@/lib/components/DashboardLayout';\nimport { adminAPI, MitraApplicationDetail } from '@/lib/api/admin';\n\ntype DocumentItem = {\n  id: string;\n  name: string;\n  description: string;\n  url: string | null;\n};\n\nconst statusStyles: Record<string, { label: string; className: string }> = {\n  pending: {\n    label: 'Menunggu Verifikasi',\n    className: 'bg-amber-500/10 text-amber-200 border border-amber-500/30'\n  },\n  approved: {\n    label: 'Disetujui',\n    className: 'bg-emerald-500/10 text-emerald-200 border border-emerald-500/30'\n  },\n  rejected: {\n    label: 'Ditolak',\n    className: 'bg-rose-500/10 text-rose-200 border border-rose-500/30'\n  }\n};\n\nexport default function MitraApplicationDetailPage() {\n  const params = useParams<{ id: string }>();\n  const applicationId = params?.id;\n\n  const [application, setApplication] = useState<MitraApplicationDetail | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [actionLoading, setActionLoading] = useState(false);\n  const [toast, setToast] = useState<{ message: string; type: 'success' | 'error' } | null>(null);\n  const [rejectReason, setRejectReason] = useState('');\n  const [showRejectModal, setShowRejectModal] = useState(false);\n  const [selectedDocUrl, setSelectedDocUrl] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!applicationId) return;\n\n    const fetchDetail = async () => {\n      setLoading(true);\n      try {\n        const res = await adminAPI.getMitraApplicationDetail(applicationId);\n        if (res.success && res.data) {\n          setApplication(res.data);\n          // Set default preview to first available document\n          const firstDoc = res.data.nib_document_url || res.data.akta_pendirian_url || res.data.ktp_direktur_url;\n          if (firstDoc) setSelectedDocUrl(firstDoc);\n        } else {\n          setError(res.error?.message || 'Gagal memuat detail aplikasi');\n        }\n      } catch (err) {\n        setError('Terjadi kesalahan saat memuat data');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchDetail();\n  }, [applicationId]);\n\n  const handleApprove = async () => {\n    if (!applicationId) return;\n    setActionLoading(true);\n    try {\n      const res = await adminAPI.approveMitraApplication(applicationId);\n      if (res.success) {\n        setToast({ message: 'Aplikasi berhasil disetujui!', type: 'success' });\n        // Refresh data\n        const updated = await adminAPI.getMitraApplicationDetail(applicationId);\n        if (updated.success && updated.data) {\n          setApplication(updated.data);\n        }\n      } else {\n        setToast({ message: res.error?.message || 'Gagal menyetujui aplikasi', type: 'error' });\n      }\n    } catch (err) {\n      setToast({ message: 'Terjadi kesalahan', type: 'error' });\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  const handleReject = async () => {\n    if (!applicationId || !rejectReason.trim()) return;\n    setActionLoading(true);\n    try {\n      const res = await adminAPI.rejectMitraApplication(applicationId, rejectReason);\n      if (res.success) {\n        setToast({ message: 'Aplikasi berhasil ditolak', type: 'success' });\n        setShowRejectModal(false);\n        setRejectReason('');\n        // Refresh data\n        const updated = await adminAPI.getMitraApplicationDetail(applicationId);\n        if (updated.success && updated.data) {\n          setApplication(updated.data);\n        }\n      } else {\n        setToast({ message: res.error?.message || 'Gagal menolak aplikasi', type: 'error' });\n      }\n    } catch (err) {\n      setToast({ message: 'Terjadi kesalahan', type: 'error' });\n    } finally {\n      setActionLoading(false);\n    }\n  };\n\n  // Build documents list from application data\n  const getDocuments = (): DocumentItem[] => {\n    if (!application) return [];\n    return [\n      {\n        id: 'nib',\n        name: 'NIB (Nomor Induk Berusaha)',\n        description: 'Dokumen NIB dari OSS',\n        url: application.nib_document_url || null\n      },\n      {\n        id: 'akta',\n        name: 'Akta Pendirian',\n        description: 'Akta pendirian perusahaan yang disahkan notaris',\n        url: application.akta_pendirian_url || null\n      },\n      {\n        id: 'ktp',\n        name: 'KTP Direktur',\n        description: 'KTP direktur atau penanggung jawab perusahaan',\n        url: application.ktp_direktur_url || null\n      }\n    ];\n  };\n\n  const documents = getDocuments();\n  const allDocsUploaded = documents.every(doc => doc.url);\n  const canApprove = application?.status === 'pending' && allDocsUploaded;\n\n  if (loading) {\n    return (\n      <DashboardLayout role=\"admin\">\n        <div className=\"flex items-center justify-center min-h-[400px]\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400\"></div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  if (error || !application) {\n    return (\n      <DashboardLayout role=\"admin\">\n        <div className=\"flex items-center justify-center min-h-[400px]\">\n          <div className=\"text-center\">\n            <p className=\"text-red-400 mb-4\">{error || 'Aplikasi tidak ditemukan'}</p>\n            <Link href=\"/admin/dashboard/mitra\" className=\"text-cyan-400 font-semibold hover:text-cyan-300\">\n              Kembali ke Dashboard\n            </Link>\n          </div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  return (\n    <DashboardLayout role=\"admin\">\n      <div className=\"space-y-6\">\n        {/* Breadcrumb */}\n        <nav className=\"text-sm text-slate-400\">\n          <Link href=\"/admin/dashboard/mitra\" className=\"text-cyan-400 hover:text-cyan-300\">\n            Verifikasi Mitra\n          </Link>{' '}\n          / <span className=\"text-slate-500\">{application.company_name}</span>\n        </nav>\n\n        {/* Header */}\n        <header className=\"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between\">\n          <div>\n            <p className=\"text-sm text-slate-400\">ID Pengajuan: {application.id}</p>\n            <h1 className=\"text-3xl font-bold text-slate-50\">Verifikasi Profil Bisnis</h1>\n            <p className=\"text-slate-400\">Review data dan dokumen perusahaan sebelum menyetujui.</p>\n          </div>\n          <span className={`inline-flex items-center px-4 py-1.5 rounded-full text-sm font-semibold ${statusStyles[application.status]?.className}`}>\n            {statusStyles[application.status]?.label}\n          </span>\n        </header>\n\n        {/* Toast */}\n        {toast && (\n          <div className={`rounded-xl px-4 py-3 text-sm flex items-center justify-between ${\n            toast.type === 'success' \n              ? 'bg-emerald-500/10 border border-emerald-500/30 text-emerald-300' \n              : 'bg-rose-500/10 border border-rose-500/30 text-rose-300'\n          }`}>\n            <span>{toast.message}</span>\n            <button onClick={() => setToast(null)} className=\"text-slate-400 hover:text-slate-200 text-xs font-semibold\">\n              Tutup\n            </button>\n          </div>\n        )}\n\n        <div className=\"grid gap-6 lg:grid-cols-2\">\n          {/* Left Column - Data & Documents */}\n          <section className=\"space-y-6\">\n            {/* Company Info */}\n            <article className=\"bg-slate-900/40 border border-slate-800 rounded-2xl p-6 space-y-4\">\n              <div>\n                <h2 className=\"text-lg font-semibold text-slate-100\">Informasi Perusahaan</h2>\n                <p className=\"text-sm text-slate-400\">Data yang diisi saat apply mitra</p>\n              </div>\n              <dl className=\"grid gap-4 sm:grid-cols-2 text-sm\">\n                <div>\n                  <dt className=\"text-slate-500\">Nama Perusahaan</dt>\n                  <dd className=\"text-slate-100 font-medium\">{application.company_name}</dd>\n                </div>\n                <div>\n                  <dt className=\"text-slate-500\">Tipe Perusahaan</dt>\n                  <dd className=\"text-slate-100 font-medium\">{application.company_type}</dd>\n                </div>\n                <div>\n                  <dt className=\"text-slate-500\">NPWP</dt>\n                  <dd className=\"text-slate-100 font-mono\">{application.npwp}</dd>\n                </div>\n                <div>\n                  <dt className=\"text-slate-500\">Pendapatan Tahunan</dt>\n                  <dd className=\"text-slate-100\">{application.annual_revenue}</dd>\n                </div>\n                <div>\n                  <dt className=\"text-slate-500\">Tahun Berdiri</dt>\n                  <dd className=\"text-slate-100\">{application.year_founded}</dd>\n                </div>\n                <div>\n                  <dt className=\"text-slate-500\">Website</dt>\n                  <dd className=\"text-slate-100\">\n                    {application.website_url ? (\n                      <a href={application.website_url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-cyan-400 hover:text-cyan-300\">\n                        {application.website_url}\n                      </a>\n                    ) : '-'}\n                  </dd>\n                </div>\n                <div className=\"sm:col-span-2\">\n                  <dt className=\"text-slate-500\">Alamat</dt>\n                  <dd className=\"text-slate-100\">{application.address}</dd>\n                </div>\n                <div className=\"sm:col-span-2\">\n                  <dt className=\"text-slate-500\">Deskripsi Bisnis</dt>\n                  <dd className=\"text-slate-100\">{application.business_description}</dd>\n                </div>\n                <div className=\"sm:col-span-2\">\n                  <dt className=\"text-slate-500\">Produk Utama</dt>\n                  <dd className=\"text-slate-100\">{application.key_products}</dd>\n                </div>\n                <div className=\"sm:col-span-2\">\n                  <dt className=\"text-slate-500\">Pasar Ekspor</dt>\n                  <dd className=\"text-slate-100\">{application.export_markets}</dd>\n                </div>\n              </dl>\n            </article>\n\n            {/* Applicant Info */}\n            <article className=\"bg-slate-900/40 border border-slate-800 rounded-2xl p-6 space-y-4\">\n              <div>\n                <h2 className=\"text-lg font-semibold text-slate-100\">Informasi Pemohon</h2>\n                <p className=\"text-sm text-slate-400\">Akun user yang mengajukan</p>\n              </div>\n              <dl className=\"grid gap-4 sm:grid-cols-2 text-sm\">\n                <div>\n                  <dt className=\"text-slate-500\">Email</dt>\n                  <dd className=\"text-slate-100\">{application.user?.email || '-'}</dd>\n                </div>\n                <div>\n                  <dt className=\"text-slate-500\">Username</dt>\n                  <dd className=\"text-slate-100\">{application.user?.username || '-'}</dd>\n                </div>\n                <div>\n                  <dt className=\"text-slate-500\">Tanggal Pengajuan</dt>\n                  <dd className=\"text-slate-100\">\n                    {new Date(application.created_at).toLocaleDateString('id-ID', {\n                      day: 'numeric',\n                      month: 'long',\n                      year: 'numeric',\n                      hour: '2-digit',\n                      minute: '2-digit'\n                    })}\n                  </dd>\n                </div>\n              </dl>\n            </article>\n\n            {/* Documents List */}\n            <article className=\"bg-slate-900/40 border border-slate-800 rounded-2xl p-6 space-y-5\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h2 className=\"text-lg font-semibold text-slate-100\">Dokumen</h2>\n                  <p className=\"text-sm text-slate-400\">Pilih dokumen untuk melihat pratinjau di panel kanan</p>\n                </div>\n                <span className=\"text-xs text-slate-500\">\n                  {documents.filter(d => d.url).length}/{documents.length} terupload\n                </span>\n              </div>\n\n              {/* Document Selector Tabs */}\n              <div className=\"flex flex-wrap gap-2\">\n                {documents.map((doc) => {\n                  const isActive = selectedDocUrl === doc.url && doc.url;\n                  const hasDoc = !!doc.url;\n                  \n                  return (\n                    <button\n                      key={`tab-${doc.id}`}\n                      onClick={() => doc.url && setSelectedDocUrl(doc.url)}\n                      disabled={!hasDoc}\n                      className={`px-4 py-2.5 rounded-xl text-sm font-medium transition-all flex items-center gap-2 ${\n                        isActive\n                          ? 'bg-cyan-500/20 border-2 border-cyan-500 text-cyan-300 shadow-lg shadow-cyan-500/10'\n                          : hasDoc\n                            ? 'bg-slate-800/60 border border-slate-700 text-slate-300 hover:border-cyan-500/50 hover:bg-slate-800'\n                            : 'bg-slate-900/50 border border-slate-800 text-slate-500 cursor-not-allowed opacity-50'\n                      }`}\n                    >\n                      {hasDoc ? (\n                        <svg className={`w-4 h-4 ${isActive ? 'text-cyan-400' : 'text-emerald-400'}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                        </svg>\n                      ) : (\n                        <svg className=\"w-4 h-4 text-rose-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                        </svg>\n                      )}\n                      {doc.id === 'nib' ? 'NIB' : doc.id === 'akta' ? 'Akta Pendirian' : 'KTP Direktur'}\n                    </button>\n                  );\n                })}\n              </div>\n\n              {/* Document Details List */}\n              <div className=\"space-y-3\">\n                {documents.map((doc) => (\n                  <div\n                    key={doc.id}\n                    className={`border rounded-xl p-4 transition-all cursor-pointer ${\n                      selectedDocUrl === doc.url && doc.url\n                        ? 'border-cyan-500/50 bg-cyan-500/10 ring-1 ring-cyan-500/30'\n                        : doc.url \n                          ? 'border-slate-800 bg-slate-950/40 hover:border-slate-700 hover:bg-slate-900/60'\n                          : 'border-slate-800/50 bg-slate-950/20 opacity-60'\n                    }`}\n                    onClick={() => doc.url && setSelectedDocUrl(doc.url)}\n                  >\n                    <div className=\"flex items-start justify-between gap-3\">\n                      <div>\n                        <p className=\"text-slate-100 font-semibold flex items-center gap-2\">\n                          {doc.name}\n                          {selectedDocUrl === doc.url && doc.url && (\n                            <span className=\"text-xs text-cyan-300\">(Sedang ditinjau)</span>\n                          )}\n                        </p>\n                        <p className=\"text-xs text-slate-400 mt-1\">{doc.description}</p>\n                      </div>\n                      {doc.url ? (\n                        <span className=\"px-2.5 py-1 text-xs rounded-full font-semibold bg-emerald-600/30 text-emerald-200\">\n                          Uploaded\n                        </span>\n                      ) : (\n                        <span className=\"px-2.5 py-1 text-xs rounded-full font-semibold bg-rose-600/20 text-rose-200\">\n                          Belum Upload\n                        </span>\n                      )}\n                    </div>\n                    {doc.url && (\n                      <div className=\"mt-3\">\n                        <a\n                          href={doc.url}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"inline-flex items-center gap-2 text-sm text-cyan-400 hover:text-cyan-300\"\n                          onClick={(e) => e.stopPropagation()}\n                        >\n                          <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\n                          </svg>\n                          Buka di Tab Baru\n                        </a>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n\n              {/* Action Buttons */}\n              {application.status === 'pending' && (\n                <div className=\"flex flex-col gap-3 border-t border-slate-800 pt-4\">\n                  <button\n                    onClick={handleApprove}\n                    disabled={!canApprove || actionLoading}\n                    className=\"px-4 py-3 rounded-xl text-sm font-semibold bg-gradient-to-r from-emerald-600 to-teal-600 text-white disabled:from-slate-700 disabled:to-slate-700 disabled:text-slate-400 disabled:cursor-not-allowed\"\n                  >\n                    {actionLoading ? 'Memproses...' : '✅ Setujui Aplikasi'}\n                  </button>\n                  <button\n                    onClick={() => setShowRejectModal(true)}\n                    disabled={actionLoading}\n                    className=\"px-4 py-3 rounded-xl text-sm font-semibold bg-rose-600/20 text-rose-300 border border-rose-600/30 hover:bg-rose-600/30 disabled:opacity-50\"\n                  >\n                    ❌ Tolak Aplikasi\n                  </button>\n                  {!allDocsUploaded && (\n                    <p className=\"text-xs text-amber-400\">\n                      ⚠️ Tidak bisa menyetujui karena dokumen belum lengkap.\n                    </p>\n                  )}\n                </div>\n              )}\n\n              {application.status === 'rejected' && application.rejection_reason && (\n                <div className=\"border-t border-slate-800 pt-4\">\n                  <p className=\"text-sm text-slate-400 mb-2\">Alasan Penolakan:</p>\n                  <p className=\"text-rose-300 bg-rose-500/10 p-3 rounded-lg text-sm\">{application.rejection_reason}</p>\n                </div>\n              )}\n            </article>\n          </section>\n\n          {/* Right Column - Document Preview */}\n          <section className=\"space-y-4 lg:sticky lg:top-6\">\n            <div className=\"bg-slate-900/40 border border-slate-800 rounded-2xl p-6 h-full flex flex-col min-h-[600px]\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-slate-400\">Preview Dokumen</p>\n                  <h2 className=\"text-lg font-semibold text-slate-100\">\n                    {selectedDocUrl ? documents.find(d => d.url === selectedDocUrl)?.name || 'Dokumen' : 'Pilih dokumen'}\n                  </h2>\n                </div>\n                {selectedDocUrl && (\n                  <a\n                    href={selectedDocUrl}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium bg-cyan-500/10 text-cyan-400 hover:bg-cyan-500/20 transition-all\"\n                  >\n                    <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\n                    </svg>\n                    Buka Tab Baru\n                  </a>\n                )}\n              </div>\n\n              {/* Document Navigation Pills */}\n              {documents.some(d => d.url) && (\n                <div className=\"mt-4 flex gap-2 overflow-x-auto pb-2\">\n                  {documents.filter(d => d.url).map((doc) => (\n                    <button\n                      key={`preview-tab-${doc.id}`}\n                      onClick={() => doc.url && setSelectedDocUrl(doc.url)}\n                      className={`px-3 py-1.5 rounded-lg text-xs font-medium whitespace-nowrap transition-all ${\n                        selectedDocUrl === doc.url\n                          ? 'bg-cyan-500 text-white'\n                          : 'bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-slate-200'\n                      }`}\n                    >\n                      {doc.id === 'nib' ? 'NIB' : doc.id === 'akta' ? 'Akta Pendirian' : 'KTP Direktur'}\n                    </button>\n                  ))}\n                </div>\n              )}\n\n              <div className=\"mt-4 flex-1 border border-slate-800 rounded-xl bg-slate-950/50 overflow-hidden\">\n                {selectedDocUrl ? (\n                  <iframe\n                    src={selectedDocUrl}\n                    title=\"Document Preview\"\n                    className=\"w-full h-full min-h-[500px]\"\n                  />\n                ) : (\n                  <div className=\"flex items-center justify-center h-full text-slate-500 text-sm\">\n                    Pilih dokumen pada panel kiri untuk melihat pratinjau.\n                  </div>\n                )}\n              </div>\n            </div>\n          </section>\n        </div>\n      </div>\n\n      {/* Reject Modal */}\n      {showRejectModal && (\n        <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-slate-900 border border-slate-700 rounded-2xl p-6 max-w-md w-full space-y-4\">\n            <h3 className=\"text-lg font-semibold text-slate-100\">Tolak Aplikasi</h3>\n            <p className=\"text-sm text-slate-400\">\n              Berikan alasan penolakan yang jelas agar mitra dapat memperbaiki aplikasinya.\n            </p>\n            <textarea\n              value={rejectReason}\n              onChange={(e) => setRejectReason(e.target.value)}\n              placeholder=\"Contoh: Dokumen NIB tidak valid atau tidak terbaca...\"\n              className=\"w-full px-4 py-3 rounded-xl bg-slate-950 border border-slate-700 text-slate-100 text-sm focus:ring-2 focus:ring-rose-500 focus:border-transparent\"\n              rows={4}\n            />\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => {\n                  setShowRejectModal(false);\n                  setRejectReason('');\n                }}\n                className=\"flex-1 px-4 py-2.5 rounded-xl text-sm font-semibold bg-slate-800 text-slate-200 hover:bg-slate-700\"\n              >\n                Batal\n              </button>\n              <button\n                onClick={handleReject}\n                disabled={!rejectReason.trim() || actionLoading}\n                className=\"flex-1 px-4 py-2.5 rounded-xl text-sm font-semibold bg-rose-600 text-white hover:bg-rose-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {actionLoading ? 'Memproses...' : 'Konfirmasi Tolak'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </DashboardLayout>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/admin/dashboard/mitra/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/admin/dashboard/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/admin/dashboard/pools/create/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PendingInvoice' is defined but never used.","line":8,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":34,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"PendingInvoice"},"fix":{"range":[293,309],"text":""},"desc":"Remove unused variable \"PendingInvoice\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":12,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'createdPoolId' is assigned a value but never used.","line":21,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport Link from 'next/link';\nimport { AuthGuard } from '@/lib/components/AuthGuard';\nimport { DashboardLayout } from '@/lib/components/DashboardLayout';\nimport { adminAPI, PendingInvoice } from '@/lib/api/admin';\nimport { Invoice } from '@/lib/api/user';\n\nfunction CreatePoolContent() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const preSelectedInvoiceId = searchParams.get('invoice_id');\n\n  const [approvedInvoices, setApprovedInvoices] = useState<Invoice[]>([]);\n  const [selectedInvoice, setSelectedInvoice] = useState<Invoice | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [creating, setCreating] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [createdPoolId, setCreatedPoolId] = useState<string | null>(null);\n\n  useEffect(() => {\n    const loadApprovedInvoices = async () => {\n      setLoading(true);\n      try {\n        const res = await adminAPI.getApprovedInvoices(1, 50);\n        if (res.success && res.data) {\n          const invoices = (res.data.invoices || []).map(inv => ({\n            ...inv,\n            buyer_name: inv.buyer_name,\n            buyer_country: inv.buyer_country,\n            idr_amount: inv.idr_amount,\n          })) as Invoice[];\n          setApprovedInvoices(invoices);\n          if (preSelectedInvoiceId) {\n            const found = invoices.find((inv) => inv.id === preSelectedInvoiceId);\n            if (found) setSelectedInvoice(found);\n          }\n        }\n      } catch (err) {\n        console.error('Failed to load invoices', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadApprovedInvoices();\n  }, [preSelectedInvoiceId]);\n\n  const formatCurrency = (amount: number, currency: string = 'IDR') => {\n    if (currency === 'IDR') {\n      return `Rp ${amount.toLocaleString('id-ID')}`;\n    }\n    return `${currency} ${amount.toLocaleString('en-US')}`;\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('id-ID', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    });\n  };\n\n  const getGradeColor = (grade?: string) => {\n    switch (grade) {\n      case 'A': return 'text-green-400 bg-green-500/10 border-green-500/30';\n      case 'B': return 'text-yellow-400 bg-yellow-500/10 border-yellow-500/30';\n      case 'C': return 'text-red-400 bg-red-500/10 border-red-500/30';\n      default: return 'text-slate-400 bg-slate-500/10 border-slate-500/30';\n    }\n  };\n\n  const handleCreatePool = async () => {\n    if (!selectedInvoice) {\n      alert('Pilih invoice terlebih dahulu');\n      return;\n    }\n\n    setCreating(true);\n    try {\n      const res = await adminAPI.createFundingPool(selectedInvoice.id);\n      if (res.success && res.data) {\n        setCreatedPoolId(res.data.id);\n        setSuccess(true);\n      } else {\n        alert(res.error?.message || 'Gagal membuat funding pool');\n      }\n    } catch (err) {\n      console.error('Failed to create pool', err);\n      alert('Terjadi kesalahan saat membuat pool');\n    } finally {\n      setCreating(false);\n    }\n  };\n\n  if (success) {\n    return (\n      <DashboardLayout role=\"admin\">\n        <div className=\"max-w-xl mx-auto\">\n          <div className=\"bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-2xl border border-slate-700/50 p-8 text-center\">\n            <div className=\"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <svg className=\"w-8 h-8 text-green-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n              </svg>\n            </div>\n            <h2 className=\"text-2xl font-bold text-slate-100 mb-3\">Funding Pool Berhasil Dibuat</h2>\n            <p className=\"text-slate-300 mb-6\">\n              Pool pendanaan untuk invoice {selectedInvoice?.invoice_number} telah dibuat dan siap untuk investor.\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n              <Link\n                href=\"/admin/dashboard/pools\"\n                className=\"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 text-white font-medium rounded-lg transition-all shadow-lg\"\n              >\n                Lihat Daftar Pool\n              </Link>\n              <button\n                onClick={() => {\n                  setSuccess(false);\n                  setSelectedInvoice(null);\n                }}\n                className=\"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-slate-200 font-medium rounded-lg transition-all\"\n              >\n                Buat Pool Lain\n              </button>\n            </div>\n          </div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  return (\n    <DashboardLayout role=\"admin\">\n      <div className=\"max-w-4xl mx-auto space-y-6\">\n        <div>\n          <Link\n            href=\"/admin/dashboard/pools\"\n            className=\"inline-flex items-center text-purple-400 hover:text-purple-300 text-sm font-medium mb-4 transition-colors\"\n          >\n            <svg className=\"w-4 h-4 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z\" clipRule=\"evenodd\" />\n            </svg>\n            Kembali\n          </Link>\n          <h1 className=\"text-2xl font-bold text-white\">Buat Funding Pool</h1>\n          <p className=\"text-slate-400 mt-1\">Pilih invoice yang sudah disetujui untuk membuat funding pool</p>\n        </div>\n\n        {loading ? (\n          <div className=\"flex items-center justify-center py-16\">\n            <div className=\"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-purple-400\"></div>\n          </div>\n        ) : (\n          <div className=\"grid lg:grid-cols-2 gap-6\">\n            <div className=\"bg-slate-800/30 border border-slate-700/50 rounded-xl p-6\">\n              <h2 className=\"text-lg font-semibold text-white mb-4\">Pilih Invoice</h2>\n\n              {approvedInvoices.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <svg className=\"w-12 h-12 mx-auto text-slate-600 mb-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                  </svg>\n                  <p className=\"text-slate-400\">Tidak ada invoice yang disetujui</p>\n                  <Link\n                    href=\"/admin/dashboard/invoices\"\n                    className=\"text-purple-400 hover:text-purple-300 text-sm mt-2 inline-block\"\n                  >\n                    Review invoice terlebih dahulu\n                  </Link>\n                </div>\n              ) : (\n                <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                  {approvedInvoices.map((invoice) => (\n                    <button\n                      key={invoice.id}\n                      onClick={() => setSelectedInvoice(invoice)}\n                      className={`w-full p-4 rounded-lg border-2 text-left transition-all ${selectedInvoice?.id === invoice.id\n                        ? 'border-purple-500 bg-purple-500/10'\n                        : 'border-slate-700 bg-slate-900/30 hover:border-slate-600'\n                        }`}\n                    >\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-purple-400 font-medium\">{invoice.invoice_number}</span>\n                        {invoice.grade && (\n                          <span className={`px-2 py-0.5 rounded text-xs font-bold border ${getGradeColor(invoice.grade)}`}>\n                            Grade {invoice.grade}\n                          </span>\n                        )}\n                      </div>\n                      <div className=\"text-sm text-slate-300\">{invoice.buyer_name}</div>\n                      <div className=\"text-xs text-slate-500 mt-1\">\n                        {formatCurrency(invoice.idr_amount || invoice.amount, 'IDR')}\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            <div className=\"bg-slate-800/30 border border-slate-700/50 rounded-xl p-6\">\n              <h2 className=\"text-lg font-semibold text-white mb-4\">Detail Pool</h2>\n\n              {selectedInvoice ? (\n                <div className=\"space-y-6\">\n                  <div className=\"space-y-4\">\n                    <div>\n                      <p className=\"text-slate-400 text-sm\">Invoice</p>\n                      <p className=\"text-white font-medium\">{selectedInvoice.invoice_number}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-slate-400 text-sm\">Buyer</p>\n                      <p className=\"text-white font-medium\">{selectedInvoice.buyer_name}</p>\n                      <p className=\"text-slate-500 text-xs\">{selectedInvoice.buyer_country}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-slate-400 text-sm\">Jumlah Total</p>\n                      <p className=\"text-white font-medium\">{formatCurrency(selectedInvoice.idr_amount || selectedInvoice.amount, 'IDR')}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-slate-400 text-sm\">Jatuh Tempo</p>\n                      <p className=\"text-white font-medium\">{formatDate(selectedInvoice.due_date)}</p>\n                    </div>\n                  </div>\n\n                  <div className=\"pt-4 border-t border-slate-700/50\">\n                    <h3 className=\"text-sm font-medium text-slate-300 mb-3\">Konfigurasi Tranche</h3>\n                    <div className=\"grid grid-cols-2 gap-3\">\n                      <div className=\"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg\">\n                        <p className=\"text-blue-400 text-xs font-medium\">Priority</p>\n                        <p className=\"text-white font-bold\">{((selectedInvoice.priority_ratio || 0.8) * 100).toFixed(0)}%</p>\n                        <p className=\"text-slate-400 text-xs\">{selectedInvoice.priority_interest_rate || 10}% yield</p>\n                      </div>\n                      <div className=\"p-3 bg-orange-500/10 border border-orange-500/20 rounded-lg\">\n                        <p className=\"text-orange-400 text-xs font-medium\">Catalyst</p>\n                        <p className=\"text-white font-bold\">{((selectedInvoice.catalyst_ratio || 0.2) * 100).toFixed(0)}%</p>\n                        <p className=\"text-slate-400 text-xs\">{selectedInvoice.catalyst_interest_rate || 15}% yield</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"pt-4 border-t border-slate-700/50 space-y-3\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-slate-400\">Priority Target</span>\n                      <span className=\"text-white font-medium\">\n                        {formatCurrency((selectedInvoice.idr_amount || selectedInvoice.amount) * (selectedInvoice.priority_ratio || 0.8), 'IDR')}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-slate-400\">Catalyst Target</span>\n                      <span className=\"text-white font-medium\">\n                        {formatCurrency((selectedInvoice.idr_amount || selectedInvoice.amount) * (selectedInvoice.catalyst_ratio || 0.2), 'IDR')}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between text-sm pt-3 border-t border-slate-700/50\">\n                      <span className=\"text-slate-300 font-medium\">Total Target</span>\n                      <span className=\"text-purple-400 font-bold\">\n                        {formatCurrency(selectedInvoice.idr_amount || selectedInvoice.amount, 'IDR')}\n                      </span>\n                    </div>\n                  </div>\n\n                  <button\n                    onClick={handleCreatePool}\n                    disabled={creating}\n                    className=\"w-full px-4 py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 disabled:from-slate-700 disabled:to-slate-700 text-white font-medium rounded-lg transition-all shadow-lg flex items-center justify-center space-x-2\"\n                  >\n                    {creating ? (\n                      <>\n                        <div className=\"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white\"></div>\n                        <span>Membuat Pool...</span>\n                      </>\n                    ) : (\n                      <>\n                        <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n                        </svg>\n                        <span>Buat Funding Pool</span>\n                      </>\n                    )}\n                  </button>\n                </div>\n              ) : (\n                <div className=\"text-center py-8\">\n                  <svg className=\"w-12 h-12 mx-auto text-slate-600 mb-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4\" />\n                  </svg>\n                  <p className=\"text-slate-400\">Pilih invoice dari daftar di sebelah kiri</p>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  );\n}\n\nexport default function CreatePoolPage() {\n  return (\n    <AuthGuard allowedRoles={['admin']}>\n      <CreatePoolContent />\n    </AuthGuard>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/admin/dashboard/pools/page.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadPools'. Either include it or remove the dependency array.","line":33,"column":6,"nodeType":"ArrayExpression","endLine":33,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [loadPools, page]","fix":{"range":[994,1000],"text":"[loadPools, page]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { AuthGuard } from '@/lib/components/AuthGuard';\nimport { DashboardLayout } from '@/lib/components/DashboardLayout';\nimport { adminAPI, FundingPool } from '@/lib/api/admin';\n\nfunction PoolListContent() {\n  const [pools, setPools] = useState<FundingPool[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [actionLoading, setActionLoading] = useState<string | null>(null);\n\n  const loadPools = async () => {\n    setLoading(true);\n    try {\n      const res = await adminAPI.getAllPools(page, 10);\n      if (res.success && res.data) {\n        setPools(res.data.pools || []);\n        setTotalPages(res.data.total_pages || 1);\n      }\n    } catch (err) {\n      console.error('Failed to load pools', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadPools();\n  }, [page]);\n\n  const formatDate = (dateString?: string) => {\n    if (!dateString) return '-';\n    return new Date(dateString).toLocaleDateString('id-ID', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  const formatCurrency = (amount?: number) => {\n    if (amount === undefined || amount === null) return 'Rp 0';\n    return `Rp ${amount.toLocaleString('id-ID')}`;\n  };\n\n  const getStatusBadge = (status: string) => {\n    const config: Record<string, { label: string; className: string }> = {\n      open: { label: 'Open', className: 'bg-blue-500/10 text-blue-400' },\n      filled: { label: 'Filled', className: 'bg-green-500/10 text-green-400' },\n      disbursed: { label: 'Disbursed', className: 'bg-purple-500/10 text-purple-400' },\n      closed: { label: 'Closed', className: 'bg-slate-500/10 text-slate-400' },\n    };\n    const c = config[status] || { label: status, className: 'bg-slate-500/10 text-slate-400' };\n    return <span className={`px-2 py-1 rounded text-xs font-medium ${c.className}`}>{c.label}</span>;\n  };\n\n  const handleDisburse = async (poolId: string) => {\n    if (!confirm('Apakah Anda yakin ingin mencairkan dana ke mitra?')) return;\n\n    setActionLoading(poolId);\n    try {\n      const res = await adminAPI.disbursePool(poolId);\n      if (res.success) {\n        alert('Dana berhasil dicairkan ke mitra');\n        loadPools();\n      } else {\n        alert(res.error?.message || 'Gagal mencairkan dana');\n      }\n    } catch (err) {\n      console.error('Failed to disburse', err);\n      alert('Terjadi kesalahan');\n    } finally {\n      setActionLoading(null);\n    }\n  };\n\n  const getProgress = (pool: FundingPool) => {\n    if (pool.target_amount === 0) return 0;\n    return (pool.funded_amount / pool.target_amount) * 100;\n  };\n\n  return (\n    <DashboardLayout role=\"admin\">\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-white\">Funding Pools</h1>\n            <p className=\"text-slate-400 mt-1\">Kelola pool pendanaan untuk investor</p>\n          </div>\n          <Link\n            href=\"/admin/dashboard/pools/create\"\n            className=\"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 rounded-lg font-medium text-sm transition-all shadow-lg shadow-purple-500/25 flex items-center space-x-2\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n            </svg>\n            <span>Buat Pool Baru</span>\n          </Link>\n        </div>\n\n        <div className=\"bg-slate-800/30 border border-slate-700/50 rounded-xl overflow-hidden\">\n          {loading ? (\n            <div className=\"flex items-center justify-center py-16\">\n              <div className=\"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-purple-400\"></div>\n            </div>\n          ) : pools.length === 0 ? (\n            <div className=\"text-center py-16\">\n              <svg className=\"w-16 h-16 mx-auto text-slate-600 mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\" />\n              </svg>\n              <p className=\"text-slate-400 mb-4\">Belum ada funding pool</p>\n              <Link\n                href=\"/admin/dashboard/pools/create\"\n                className=\"inline-flex items-center space-x-2 px-4 py-2 bg-purple-500/20 hover:bg-purple-500/30 border border-purple-500/30 rounded-lg text-sm font-medium text-purple-400 transition-all\"\n              >\n                <span>Buat Pool Pertama</span>\n              </Link>\n            </div>\n          ) : (\n            <>\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead>\n                    <tr className=\"text-left text-slate-400 text-sm border-b border-slate-700/50 bg-slate-800/50\">\n                      <th className=\"px-6 py-4 font-medium\">Invoice</th>\n                      <th className=\"px-6 py-4 font-medium\">Target</th>\n                      <th className=\"px-6 py-4 font-medium\">Progress</th>\n                      <th className=\"px-6 py-4 font-medium\">Investors</th>\n                      <th className=\"px-6 py-4 font-medium\">Status</th>\n                      <th className=\"px-6 py-4 font-medium\">Deadline</th>\n                      <th className=\"px-6 py-4 font-medium\">Aksi</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-slate-700/50\">\n                    {pools.map((pool, index) => {\n                      const progress = getProgress(pool);\n                      return (\n                        <tr key={pool.id || `pool-${index}`} className=\"hover:bg-slate-800/30 transition-colors\">\n                          <td className=\"px-6 py-4\">\n                            <div>\n                              <p className=\"text-purple-400 font-medium\">{pool.invoice?.invoice_number || '-'}</p>\n                              <p className=\"text-slate-500 text-xs\">{pool.invoice?.buyer_name || '-'}</p>\n                            </div>\n                          </td>\n                          <td className=\"px-6 py-4\">\n                            <div>\n                              <p className=\"text-slate-200\">{formatCurrency(pool.target_amount)}</p>\n                              <p className=\"text-slate-500 text-xs\">Funded: {formatCurrency(pool.funded_amount)}</p>\n                            </div>\n                          </td>\n                          <td className=\"px-6 py-4\">\n                            <div className=\"w-32\">\n                              <div className=\"flex items-center justify-between text-xs mb-1\">\n                                <span className=\"text-slate-400\">{progress.toFixed(1)}%</span>\n                              </div>\n                              <div className=\"h-2 bg-slate-700 rounded-full overflow-hidden\">\n                                <div\n                                  className=\"h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full transition-all\"\n                                  style={{ width: `${Math.min(progress, 100)}%` }}\n                                />\n                              </div>\n                            </div>\n                          </td>\n                          <td className=\"px-6 py-4 text-slate-300\">{pool.investor_count}</td>\n                          <td className=\"px-6 py-4\">{getStatusBadge(pool.status)}</td>\n                          <td className=\"px-6 py-4 text-slate-400 text-sm\">{formatDate(pool.deadline)}</td>\n                          <td className=\"px-6 py-4\">\n                            <div className=\"flex items-center space-x-2\">\n                              {pool.status === 'filled' && (\n                                <button\n                                  onClick={() => handleDisburse(pool.id)}\n                                  disabled={actionLoading === pool.id}\n                                  className=\"px-3 py-1 bg-green-500/20 hover:bg-green-500/30 border border-green-500/30 rounded text-xs font-medium text-green-400 transition-all disabled:opacity-50\"\n                                >\n                                  {actionLoading === pool.id ? 'Processing...' : 'Disburse'}\n                                </button>\n                              )}\n                              <Link\n                                href={`/admin/dashboard/pools/${pool.id}`}\n                                className=\"px-3 py-1 bg-slate-700/50 hover:bg-slate-700 rounded text-xs font-medium text-slate-300 transition-all\"\n                              >\n                                Detail\n                              </Link>\n                            </div>\n                          </td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </table>\n              </div>\n\n              {totalPages > 1 && (\n                <div className=\"flex items-center justify-between px-6 py-4 border-t border-slate-700/50\">\n                  <p className=\"text-sm text-slate-400\">\n                    Halaman {page} dari {totalPages}\n                  </p>\n                  <div className=\"flex items-center space-x-2\">\n                    <button\n                      onClick={() => setPage((p) => Math.max(1, p - 1))}\n                      disabled={page === 1}\n                      className=\"px-3 py-1 bg-slate-700/50 hover:bg-slate-700 disabled:bg-slate-800 disabled:text-slate-600 rounded text-sm text-slate-300 transition-colors\"\n                    >\n                      Sebelumnya\n                    </button>\n                    <button\n                      onClick={() => setPage((p) => Math.min(totalPages, p + 1))}\n                      disabled={page === totalPages}\n                      className=\"px-3 py-1 bg-slate-700/50 hover:bg-slate-700 disabled:bg-slate-800 disabled:text-slate-600 rounded text-sm text-slate-300 transition-colors\"\n                    >\n                      Selanjutnya\n                    </button>\n                  </div>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </DashboardLayout>\n  );\n}\n\nexport default function PoolListPage() {\n  return (\n    <AuthGuard allowedRoles={['admin']}>\n      <PoolListContent />\n    </AuthGuard>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/eksportir/company/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":29,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState, useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useForm } from 'react-hook-form';\nimport { DashboardLayout } from '@/lib/components/DashboardLayout';\nimport { userAPI, MitraApplicationResponse, SubmitMitraApplicationRequest } from '@/lib/api/user';\n\ntype DocumentType = 'nib' | 'akta_pendirian' | 'ktp_direktur';\n\ninterface Toast {\n    message: string;\n    type: 'success' | 'error' | 'info';\n}\n\ninterface DocumentUploadStatus {\n    nib: boolean;\n    akta_pendirian: boolean;\n    ktp_direktur: boolean;\n}\n\ninterface UploadingState {\n    nib: boolean;\n    akta_pendirian: boolean;\n    ktp_direktur: boolean;\n}\n\nexport default function CompanyProfilePage() {\n    const router = useRouter();\n    const [loading, setLoading] = useState(true);\n    const [status, setStatus] = useState<MitraApplicationResponse | null>(null);\n    const [toast, setToast] = useState<Toast | null>(null);\n    const [documentsStatus, setDocumentsStatus] = useState<DocumentUploadStatus>({\n        nib: false,\n        akta_pendirian: false,\n        ktp_direktur: false,\n    });\n    const [uploading, setUploading] = useState<UploadingState>({\n        nib: false,\n        akta_pendirian: false,\n        ktp_direktur: false,\n    });\n\n    // File input refs\n    const nibInputRef = useRef<HTMLInputElement>(null);\n    const aktaInputRef = useRef<HTMLInputElement>(null);\n    const ktpInputRef = useRef<HTMLInputElement>(null);\n\n    const { register, handleSubmit, formState: { errors, isSubmitting } } = useForm<SubmitMitraApplicationRequest>();\n\n    useEffect(() => {\n        fetchStatus();\n    }, []);\n\n    useEffect(() => {\n        if (toast) {\n            const timer = setTimeout(() => setToast(null), 4000);\n            return () => clearTimeout(timer);\n        }\n    }, [toast]);\n\n    const fetchStatus = async () => {\n        try {\n            const res = await userAPI.getMitraStatus();\n            if (res.success && res.data) {\n                setStatus(res.data);\n                setDocumentsStatus(res.data.documents_status);\n            }\n        } catch (error) {\n            console.error('Failed to fetch status', error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleFileUpload = async (file: File, documentType: DocumentType) => {\n        // Validate file size (max 10MB)\n        if (file.size > 10 * 1024 * 1024) {\n            setToast({ message: 'Ukuran file maksimal 10MB', type: 'error' });\n            return;\n        }\n\n        // Validate file type (PDF, JPG, PNG)\n        const allowedTypes = ['application/pdf', 'image/jpeg', 'image/png'];\n        if (!allowedTypes.includes(file.type)) {\n            setToast({ message: 'Format file harus PDF, JPG, atau PNG', type: 'error' });\n            return;\n        }\n\n        setUploading(prev => ({ ...prev, [documentType]: true }));\n\n        try {\n            const res = await userAPI.uploadMitraDocument(file, documentType);\n            if (res.success) {\n                setDocumentsStatus(prev => ({ ...prev, [documentType]: true }));\n                setToast({ \n                    message: `Dokumen ${getDocumentLabel(documentType)} berhasil diupload`, \n                    type: 'success' \n                });\n                // Refresh status to get updated data\n                await fetchStatus();\n            } else {\n                setToast({ \n                    message: res.error?.message || `Gagal mengupload ${getDocumentLabel(documentType)}`, \n                    type: 'error' \n                });\n            }\n        } catch (error) {\n            console.error('Upload error:', error);\n            setToast({ message: 'Terjadi kesalahan saat mengupload', type: 'error' });\n        } finally {\n            setUploading(prev => ({ ...prev, [documentType]: false }));\n        }\n    };\n\n    const getDocumentLabel = (type: DocumentType): string => {\n        switch (type) {\n            case 'nib': return 'NIB';\n            case 'akta_pendirian': return 'Akta Pendirian';\n            case 'ktp_direktur': return 'KTP Direktur';\n        }\n    };\n\n    const onSubmit = async (data: SubmitMitraApplicationRequest) => {\n        try {\n            const res = await userAPI.applyMitra(data);\n            if (res.success) {\n                setToast({ message: 'Aplikasi berhasil dikirim! Lanjutkan dengan upload dokumen.', type: 'success' });\n                await fetchStatus();\n            } else {\n                setToast({ message: res.error?.message || 'Gagal mengirim aplikasi', type: 'error' });\n            }\n        } catch (error) {\n            console.error('Submit error:', error);\n            setToast({ message: 'Terjadi kesalahan saat mengirim data', type: 'error' });\n        }\n    };\n\n    if (loading) {\n        return (\n            <DashboardLayout role=\"mitra\">\n                <div className=\"flex items-center justify-center min-h-[60vh]\">\n                    <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400\"></div>\n                </div>\n            </DashboardLayout>\n        );\n    }\n\n    const appStatus = status?.application?.status;\n    const hasApplication = !!status?.application;\n    const isDocumentsComplete = status?.is_complete;\n\n    // Document Upload Card Component\n    const DocumentUploadCard = ({ \n        type, \n        label, \n        description,\n        inputRef \n    }: { \n        type: DocumentType; \n        label: string; \n        description: string;\n        inputRef: React.RefObject<HTMLInputElement | null>;\n    }) => {\n        const isUploaded = documentsStatus[type];\n        const isUploading = uploading[type];\n\n        return (\n            <div className={`p-4 rounded-xl border transition-all ${\n                isUploaded \n                    ? 'bg-green-500/5 border-green-500/30' \n                    : 'bg-slate-800/50 border-slate-700/50 hover:border-cyan-500/30'\n            }`}>\n                <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-start space-x-3\">\n                        <div className={`p-2 rounded-lg ${isUploaded ? 'bg-green-500/20' : 'bg-slate-700/50'}`}>\n                            <svg className={`w-5 h-5 ${isUploaded ? 'text-green-400' : 'text-slate-400'}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                            </svg>\n                        </div>\n                        <div>\n                            <h4 className=\"text-sm font-medium text-white\">{label}</h4>\n                            <p className=\"text-xs text-slate-400 mt-0.5\">{description}</p>\n                        </div>\n                    </div>\n                    \n                    {isUploaded ? (\n                        <span className=\"px-2 py-1 rounded-full text-xs bg-green-500/10 text-green-400 flex items-center space-x-1\">\n                            <svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                            </svg>\n                            <span>Uploaded</span>\n                        </span>\n                    ) : (\n                        <button\n                            type=\"button\"\n                            onClick={() => inputRef.current?.click()}\n                            disabled={isUploading}\n                            className=\"px-3 py-1.5 rounded-lg text-xs font-medium bg-cyan-500/10 text-cyan-400 hover:bg-cyan-500/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-1\"\n                        >\n                            {isUploading ? (\n                                <>\n                                    <div className=\"animate-spin rounded-full h-3 w-3 border-t border-cyan-400\"></div>\n                                    <span>Uploading...</span>\n                                </>\n                            ) : (\n                                <>\n                                    <svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\n                                    </svg>\n                                    <span>Upload</span>\n                                </>\n                            )}\n                        </button>\n                    )}\n                </div>\n                \n                <input\n                    ref={inputRef}\n                    type=\"file\"\n                    className=\"hidden\"\n                    accept=\".pdf,.jpg,.jpeg,.png\"\n                    onChange={(e) => {\n                        const file = e.target.files?.[0];\n                        if (file) {\n                            handleFileUpload(file, type);\n                        }\n                        // Reset input value so same file can be selected again\n                        e.target.value = '';\n                    }}\n                />\n            </div>\n        );\n    };\n\n    return (\n        <DashboardLayout role=\"mitra\">\n            {/* Toast Notification */}\n            {toast && (\n                <div className={`fixed top-4 right-4 z-50 px-6 py-4 rounded-xl shadow-2xl border backdrop-blur-md transition-all max-w-sm ${toast.type === 'success' ? 'bg-green-500/20 border-green-500/30 text-green-400' :\n                        toast.type === 'error' ? 'bg-red-500/20 border-red-500/30 text-red-400' :\n                            'bg-blue-500/20 border-blue-500/30 text-blue-400'\n                    }`}>\n                    <div className=\"flex items-start space-x-3\">\n                        {toast.type === 'success' && (\n                            <div className=\"p-1 bg-green-500/20 rounded-full\">\n                                <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                                </svg>\n                            </div>\n                        )}\n                        {toast.type === 'error' && (\n                            <div className=\"p-1 bg-red-500/20 rounded-full\">\n                                <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                                </svg>\n                            </div>\n                        )}\n                        <div className=\"flex-1\">\n                            <p className=\"font-medium text-sm\">{toast.message}</p>\n                        </div>\n                        <button onClick={() => setToast(null)} className=\"text-current opacity-60 hover:opacity-100 transition-opacity\">\n                            <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                            </svg>\n                        </button>\n                    </div>\n                </div>\n            )}\n\n            <div className=\"max-w-4xl mx-auto space-y-6\">\n                <div className=\"flex items-center justify-between\">\n                    <div>\n                        <h1 className=\"text-2xl font-bold text-white\">Profil Perusahaan</h1>\n                        <p className=\"text-slate-400 mt-1\">Kelola data dan dokumen legalitas perusahaan</p>\n                    </div>\n                    {appStatus && (\n                        <span className={`px-3 py-1 rounded-full text-sm font-medium ${appStatus === 'approved' ? 'bg-green-500/10 text-green-400' :\n                            appStatus === 'pending' ? 'bg-yellow-500/10 text-yellow-400' :\n                                'bg-red-500/10 text-red-400'\n                            }`}>\n                            {appStatus === 'approved' ? 'Terverifikasi' :\n                                appStatus === 'pending' ? 'Menunggu Verifikasi' :\n                                    'Ditolak'}\n                        </span>\n                    )}\n                </div>\n\n                {/* Content based on status */}\n                {!hasApplication || appStatus === 'rejected' ? (\n                    /* No Application - Show Full Form */\n                    <div className=\"bg-slate-800/30 border border-slate-700/50 rounded-xl p-6 backdrop-blur-sm\">\n                        <div className=\"mb-6\">\n                            <h2 className=\"text-xl font-semibold text-white mb-2\">Formulir Pengajuan Mitra</h2>\n                            <p className=\"text-slate-400 text-sm\">Lengkapi data perusahaan Anda untuk mulai mengajukan pendanaan.</p>\n                            {appStatus === 'rejected' && (\n                                <div className=\"mt-4 p-4 bg-red-500/10 border border-red-500/20 rounded-lg\">\n                                    <p className=\"text-red-400 text-sm font-medium\">Pengajuan Ditolak</p>\n                                    <p className=\"text-red-300 text-sm mt-1\">{status?.application?.rejection_reason}</p>\n                                </div>\n                            )}\n                        </div>\n\n                        <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                                <div className=\"space-y-2\">\n                                    <label className=\"text-sm font-medium text-slate-300\">Nama Perusahaan</label>\n                                    <input\n                                        {...register('company_name', { required: 'Wajib diisi' })}\n                                        className=\"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition-all\"\n                                        placeholder=\"Contoh: PT. Sumber Makmur\"\n                                    />\n                                    {errors.company_name && <p className=\"text-red-400 text-xs\">{errors.company_name.message}</p>}\n                                </div>\n\n                                <div className=\"space-y-2\">\n                                    <label className=\"text-sm font-medium text-slate-300\">Bentuk Badan Usaha</label>\n                                    <select\n                                        {...register('company_type', { required: 'Wajib dipilih' })}\n                                        className=\"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition-all\"\n                                    >\n                                        <option value=\"\">Pilih Badan Usaha</option>\n                                        <option value=\"PT\">Perseroan Terbatas (PT)</option>\n                                        <option value=\"CV\">Persekutuan Komanditer (CV)</option>\n                                        <option value=\"UD\">Usaha Dagang (UD)</option>\n                                    </select>\n                                    {errors.company_type && <p className=\"text-red-400 text-xs\">{errors.company_type.message}</p>}\n                                </div>\n\n                                <div className=\"space-y-2\">\n                                    <label className=\"text-sm font-medium text-slate-300\">NPWP Perusahaan</label>\n                                    <input\n                                        {...register('npwp', {\n                                            required: 'Wajib diisi',\n                                            minLength: { value: 15, message: 'Minimal 15 digit' },\n                                            maxLength: { value: 16, message: 'Maksimal 16 digit' }\n                                        })}\n                                        className=\"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition-all\"\n                                        placeholder=\"Nomor Pokok Wajib Pajak\"\n                                    />\n                                    {errors.npwp && <p className=\"text-red-400 text-xs\">{errors.npwp.message}</p>}\n                                </div>\n\n                                <div className=\"space-y-2\">\n                                    <label className=\"text-sm font-medium text-slate-300\">Pendapatan Tahunan</label>\n                                    <select\n                                        {...register('annual_revenue', { required: 'Wajib dipilih' })}\n                                        className=\"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition-all\"\n                                    >\n                                        <option value=\"\">Pilih Range Pendapatan</option>\n                                        <option value=\"<1M\">&lt; Rp 1 Miliar</option>\n                                        <option value=\"1M-5M\">Rp 1 M - 5 M</option>\n                                        <option value=\"5M-25M\">Rp 5 M - 25 M</option>\n                                        <option value=\"25M-100M\">Rp 25 M - 100 M</option>\n                                        <option value=\">100M\">&gt; Rp 100 Miliar</option>\n                                    </select>\n                                    {errors.annual_revenue && <p className=\"text-red-400 text-xs\">{errors.annual_revenue.message}</p>}\n                                </div>\n\n                                <div className=\"space-y-2 md:col-span-2\">\n                                    <label className=\"text-sm font-medium text-slate-300\">Alamat Lengkap</label>\n                                    <textarea\n                                        {...register('address', { required: 'Wajib diisi' })}\n                                        rows={3}\n                                        className=\"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition-all\"\n                                        placeholder=\"Alamat lengkap sesuai domisili perusahaan\"\n                                    />\n                                    {errors.address && <p className=\"text-red-400 text-xs\">{errors.address.message}</p>}\n                                </div>\n\n                                <div className=\"space-y-2 md:col-span-2\">\n                                    <label className=\"text-sm font-medium text-slate-300\">Deskripsi Bisnis</label>\n                                    <textarea\n                                        {...register('business_description', { required: 'Wajib diisi' })}\n                                        rows={4}\n                                        className=\"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition-all\"\n                                        placeholder=\"Jelaskan secara singkat mengenai bidang usaha, model bisnis, dan operasional Anda\"\n                                    />\n                                    {errors.business_description && <p className=\"text-red-400 text-xs\">{errors.business_description.message}</p>}\n                                </div>\n\n                                <div className=\"space-y-2\">\n                                    <label className=\"text-sm font-medium text-slate-300\">Website Perusahaan (Opsional)</label>\n                                    <input\n                                        {...register('website_url')}\n                                        className=\"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition-all\"\n                                        placeholder=\"https://...\"\n                                    />\n                                </div>\n\n                                <div className=\"space-y-2\">\n                                    <label className=\"text-sm font-medium text-slate-300\">Tahun Berdiri</label>\n                                    <input\n                                        type=\"number\"\n                                        {...register('year_founded', {\n                                            required: 'Wajib diisi',\n                                            valueAsNumber: true,\n                                            min: { value: 1900, message: 'Tahun tidak valid' },\n                                            max: { value: new Date().getFullYear(), message: 'Tahun tidak valid' }\n                                        })}\n                                        className=\"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition-all\"\n                                        placeholder=\"YYYY\"\n                                    />\n                                    {errors.year_founded && <p className=\"text-red-400 text-xs\">{errors.year_founded.message}</p>}\n                                </div>\n\n                                <div className=\"space-y-2\">\n                                    <label className=\"text-sm font-medium text-slate-300\">Produk Utama</label>\n                                    <input\n                                        {...register('key_products', { required: 'Wajib diisi' })}\n                                        className=\"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition-all\"\n                                        placeholder=\"Komoditas/produk yang diekspor\"\n                                    />\n                                    {errors.key_products && <p className=\"text-red-400 text-xs\">{errors.key_products.message}</p>}\n                                </div>\n\n                                <div className=\"space-y-2\">\n                                    <label className=\"text-sm font-medium text-slate-300\">Pasar Ekspor Utama</label>\n                                    <input\n                                        {...register('export_markets', { required: 'Wajib diisi' })}\n                                        className=\"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition-all\"\n                                        placeholder=\"Negara tujuan ekspor utama\"\n                                    />\n                                    {errors.export_markets && <p className=\"text-red-400 text-xs\">{errors.export_markets.message}</p>}\n                                </div>\n                            </div>\n\n                            <div className=\"flex justify-end pt-4 border-t border-slate-700/50\">\n                                <button\n                                    type=\"submit\"\n                                    disabled={isSubmitting}\n                                    className=\"px-6 py-2.5 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-400 hover:to-cyan-400 rounded-lg font-medium text-white transition-all shadow-lg shadow-teal-500/25 disabled:opacity-50 disabled:cursor-not-allowed\"\n                                >\n                                    {isSubmitting ? 'Mengirim...' : 'Ajukan Permohonan'}\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                ) : (\n                    /* Has Application - Show Status + Upload Section */\n                    <div className=\"space-y-6\">\n                        {/* Status Banner */}\n                        {appStatus === 'approved' && (\n                            <div className=\"p-4 bg-green-500/10 border border-green-500/20 rounded-xl\">\n                                <div className=\"flex items-center space-x-3\">\n                                    <div className=\"p-2 bg-green-500/20 rounded-full\">\n                                        <svg className=\"w-5 h-5 text-green-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                                        </svg>\n                                    </div>\n                                    <div>\n                                        <p className=\"text-green-400 font-medium\">Anda adalah Mitra Terverifikasi</p>\n                                        <p className=\"text-green-300/70 text-sm\">Anda dapat mulai membuat invoice dan mengajukan pendanaan.</p>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n\n                        {appStatus === 'pending' && !isDocumentsComplete && (\n                            <div className=\"p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl\">\n                                <div className=\"flex items-start space-x-3\">\n                                    <div className=\"p-2 bg-amber-500/20 rounded-full mt-0.5\">\n                                        <svg className=\"w-5 h-5 text-amber-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n                                        </svg>\n                                    </div>\n                                    <div>\n                                        <p className=\"text-amber-400 font-medium\">Dokumen Belum Lengkap</p>\n                                        <p className=\"text-amber-300/70 text-sm\">Lengkapi semua dokumen untuk melanjutkan proses verifikasi.</p>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n\n                        {appStatus === 'pending' && isDocumentsComplete && (\n                            <div className=\"p-4 bg-blue-500/10 border border-blue-500/20 rounded-xl\">\n                                <div className=\"flex items-center space-x-3\">\n                                    <div className=\"p-2 bg-blue-500/20 rounded-full\">\n                                        <svg className=\"w-5 h-5 text-blue-400 animate-pulse\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                                        </svg>\n                                    </div>\n                                    <div>\n                                        <p className=\"text-blue-400 font-medium\">Menunggu Verifikasi</p>\n                                        <p className=\"text-blue-300/70 text-sm\">Dokumen lengkap. Tim kami sedang meninjau aplikasi Anda (1-3 hari kerja).</p>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Company Info Card */}\n                        <div className=\"bg-slate-800/30 border border-slate-700/50 rounded-xl overflow-hidden backdrop-blur-sm\">\n                            <div className=\"p-4 border-b border-slate-700/50\">\n                                <h3 className=\"text-lg font-semibold text-white\">Informasi Perusahaan</h3>\n                            </div>\n                            <div className=\"p-6 grid grid-cols-1 md:grid-cols-2 gap-6\">\n                                <div>\n                                    <label className=\"block text-xs text-slate-400 mb-1 uppercase tracking-wider\">Nama Perusahaan</label>\n                                    <p className=\"text-white font-medium\">{status?.application?.company_name}</p>\n                                </div>\n                                <div>\n                                    <label className=\"block text-xs text-slate-400 mb-1 uppercase tracking-wider\">Bentuk Badan Usaha</label>\n                                    <p className=\"text-white font-medium\">{status?.application?.company_type || '-'}</p>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Document Upload Section */}\n                        <div className=\"bg-slate-800/30 border border-slate-700/50 rounded-xl overflow-hidden backdrop-blur-sm\">\n                            <div className=\"p-4 border-b border-slate-700/50\">\n                                <div className=\"flex items-center justify-between\">\n                                    <div>\n                                        <h3 className=\"text-lg font-semibold text-white\">Dokumen Legalitas</h3>\n                                        <p className=\"text-sm text-slate-400 mt-1\">Upload dokumen untuk melengkapi profil bisnis</p>\n                                    </div>\n                                    <div className=\"flex items-center space-x-2\">\n                                        <span className=\"text-xs text-slate-400\">\n                                            {Object.values(documentsStatus).filter(Boolean).length}/3 dokumen\n                                        </span>\n                                        <div className=\"w-20 h-2 bg-slate-700 rounded-full overflow-hidden\">\n                                            <div \n                                                className=\"h-full bg-gradient-to-r from-cyan-500 to-teal-500 transition-all duration-300\"\n                                                style={{ width: `${(Object.values(documentsStatus).filter(Boolean).length / 3) * 100}%` }}\n                                            />\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            \n                            <div className=\"p-6 space-y-4\">\n                                <DocumentUploadCard\n                                    type=\"nib\"\n                                    label=\"Nomor Induk Berusaha (NIB)\"\n                                    description=\"Dokumen NIB dari OSS (PDF/JPG/PNG, max 10MB)\"\n                                    inputRef={nibInputRef}\n                                />\n                                <DocumentUploadCard\n                                    type=\"akta_pendirian\"\n                                    label=\"Akta Pendirian Perusahaan\"\n                                    description=\"Akta notaris pendirian perusahaan (PDF/JPG/PNG, max 10MB)\"\n                                    inputRef={aktaInputRef}\n                                />\n                                <DocumentUploadCard\n                                    type=\"ktp_direktur\"\n                                    label=\"KTP Direktur Utama\"\n                                    description=\"Scan/foto KTP direktur yang bertanggung jawab (PDF/JPG/PNG, max 10MB)\"\n                                    inputRef={ktpInputRef}\n                                />\n                            </div>\n\n                            {/* Completion Message */}\n                            {isDocumentsComplete && (\n                                <div className=\"px-6 pb-6\">\n                                    <div className=\"p-4 bg-green-500/10 rounded-lg border border-green-500/20\">\n                                        <div className=\"flex items-center space-x-3\">\n                                            <svg className=\"w-5 h-5 text-green-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                                            </svg>\n                                            <p className=\"text-green-300 text-sm\">\n                                                Semua dokumen telah lengkap! Aplikasi Anda siap untuk ditinjau.\n                                            </p>\n                                        </div>\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                )}\n            </div>\n        </DashboardLayout>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/eksportir/dashboard/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/eksportir/invoices/create/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":189,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":189,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'createdInvoiceId' is assigned a value but never used.","line":193,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":193,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useRef, useMemo, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { AuthGuard } from '@/lib/components/AuthGuard';\nimport { DashboardLayout } from '@/lib/components/DashboardLayout';\nimport { invoiceAPI, CreateInvoiceRequest } from '@/lib/api/user';\n\ninterface UploadedFile {\n  name: string;\n  size: number;\n  file: File;\n}\n\ninterface Step1Data {\n  buyerCompanyName: string;\n  buyerCountry: string;\n  buyerEmail: string;\n  invoiceNumber: string;\n  currency: string;\n  originalAmount: string;\n  lockedExchangeRate: string;\n  idrAmount: string;\n  dueDate: string;\n  fundingDuration: string;\n  priorityRatio: string;\n  catalystRatio: string;\n  priorityInterestRate: string;\n  catalystInterestRate: string;\n}\n\ninterface Step2Data {\n  commercialInvoice: UploadedFile | null;\n  billOfLading: UploadedFile | null;\n  purchaseOrder: UploadedFile | null;\n}\n\ninterface Step3Data {\n  isRepeatBuyer: boolean;\n  repeatBuyerVerified: boolean;\n  fundingLimit: number;\n  previousTransferProof: UploadedFile | null;\n}\n\nfunction Stepper({ currentStep, onStepClick }: { currentStep: number; onStepClick: (step: number) => void }) {\n  const steps = [\n    { number: 1, label: 'Data Pendanaan' },\n    { number: 2, label: 'Dokumen' },\n    { number: 3, label: 'Riwayat' },\n    { number: 4, label: 'Konfirmasi' }\n  ];\n\n  return (\n    <div className=\"mb-8\">\n      <div className=\"flex items-center justify-between\">\n        {steps.map((step, index) => (\n          <div key={step.number} className=\"flex items-center flex-1\">\n            <div className=\"flex flex-col items-center flex-1\">\n              <button\n                onClick={() => onStepClick(step.number)}\n                className={`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm transition-all ${currentStep === step.number\n                  ? 'bg-teal-500 text-white ring-4 ring-teal-500/30'\n                  : currentStep > step.number\n                    ? 'bg-teal-500 text-white hover:bg-teal-400'\n                    : 'bg-slate-700 text-slate-400 hover:bg-slate-600'\n                  }`}\n              >\n                {currentStep > step.number ? (\n                  <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                  </svg>\n                ) : (\n                  step.number\n                )}\n              </button>\n              <span className={`mt-2 text-xs font-medium ${currentStep === step.number ? 'text-teal-400' : currentStep > step.number ? 'text-teal-500' : 'text-slate-400'\n                }`}>\n                {step.label}\n              </span>\n            </div>\n            {index < steps.length - 1 && (\n              <div className={`h-0.5 flex-1 mx-2 mb-6 ${currentStep > step.number ? 'bg-teal-500' : 'bg-slate-700'}`} />\n            )}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction UploadCard({\n  label,\n  file,\n  onChange,\n  onRemove,\n  required = false,\n  error\n}: {\n  label: string;\n  file: UploadedFile | null;\n  onChange: (file: File) => void;\n  onRemove: () => void;\n  required?: boolean;\n  error?: string;\n}) {\n  const [isDragging, setIsDragging] = useState(false);\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(true);\n  };\n\n  const handleDragLeave = () => setIsDragging(false);\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n    const droppedFile = e.dataTransfer.files[0];\n    if (droppedFile && droppedFile.size <= 10 * 1024 * 1024) {\n      onChange(droppedFile);\n    }\n  };\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = e.target.files?.[0];\n    if (selectedFile && selectedFile.size <= 10 * 1024 * 1024) {\n      onChange(selectedFile);\n    }\n  };\n\n  const formatFileSize = (bytes: number): string => {\n    if (bytes < 1024) return bytes + ' B';\n    if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';\n    return (bytes / (1024 * 1024)).toFixed(1) + ' MB';\n  };\n\n  return (\n    <div>\n      <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n        {label}\n        {required && <span className=\"text-red-400 ml-1\">*</span>}\n      </label>\n\n      {!file ? (\n        <div\n          onDragOver={handleDragOver}\n          onDragLeave={handleDragLeave}\n          onDrop={handleDrop}\n          className={`border-2 border-dashed rounded-lg p-6 text-center transition-all ${isDragging ? 'border-teal-500 bg-teal-950/30' : error ? 'border-red-500 bg-red-950/20' : 'border-slate-600 bg-slate-900/30 hover:border-slate-500'\n            }`}\n        >\n          <svg className=\"w-12 h-12 mx-auto text-slate-400 mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n          </svg>\n          <p className=\"text-sm text-slate-300 mb-2\">\n            Seret & lepas file atau{' '}\n            <label className=\"text-teal-400 hover:text-teal-300 cursor-pointer font-medium\">\n              pilih file\n              <input type=\"file\" className=\"hidden\" accept=\".pdf,.jpg,.jpeg,.png\" onChange={handleFileSelect} />\n            </label>\n          </p>\n          <p className=\"text-xs text-slate-500\">PDF, JPG, PNG (Maks 10MB)</p>\n        </div>\n      ) : (\n        <div className=\"border border-slate-600 rounded-lg p-4 bg-slate-900/30\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3 flex-1 min-w-0\">\n              <svg className=\"w-8 h-8 text-teal-400 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z\" clipRule=\"evenodd\" />\n              </svg>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium text-slate-200 truncate\">{file.name}</p>\n                <p className=\"text-xs text-slate-400\">{formatFileSize(file.size)}</p>\n              </div>\n            </div>\n            <button type=\"button\" onClick={onRemove} className=\"ml-3 text-red-400 hover:text-red-300 text-sm font-medium flex-shrink-0\">\n              Hapus\n            </button>\n          </div>\n        </div>\n      )}\n      {error && <p className=\"mt-1 text-xs text-red-400\">{error}</p>}\n    </div>\n  );\n}\n\nfunction CreateInvoiceContent() {\n  const router = useRouter();\n  const [currentStep, setCurrentStep] = useState(1);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [createdInvoiceId, setCreatedInvoiceId] = useState<string | null>(null);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [checkingBuyer, setCheckingBuyer] = useState(false);\n\n  const [step1Data, setStep1Data] = useState<Step1Data>({\n    buyerCompanyName: '',\n    buyerCountry: '',\n    buyerEmail: '',\n    invoiceNumber: '',\n    currency: 'USD',\n    originalAmount: '',\n    lockedExchangeRate: '16000',\n    idrAmount: '',\n    dueDate: '',\n    fundingDuration: '14',\n    priorityRatio: '80',\n    catalystRatio: '20',\n    priorityInterestRate: '10',\n    catalystInterestRate: '15'\n  });\n\n  const [step2Data, setStep2Data] = useState<Step2Data>({\n    commercialInvoice: null,\n    billOfLading: null,\n    purchaseOrder: null\n  });\n\n  const [step3Data, setStep3Data] = useState<Step3Data>({\n    isRepeatBuyer: false,\n    repeatBuyerVerified: false,\n    fundingLimit: 60,\n    previousTransferProof: null\n  });\n\n  const [acknowledgement, setAcknowledgement] = useState(false);\n  const [dataConfirmation, setDataConfirmation] = useState(false);\n\n  const dueDateInputRef = useRef<HTMLInputElement | null>(null);\n  const todayJakarta = useMemo(\n    () => new Intl.DateTimeFormat('en-CA', { timeZone: 'Asia/Jakarta' }).format(new Date()),\n    []\n  );\n\n  useEffect(() => {\n    const amount = parseFloat(step1Data.originalAmount) || 0;\n    const rate = parseFloat(step1Data.lockedExchangeRate) || 0;\n    const idr = Math.floor(amount * rate);\n    setStep1Data(prev => ({ ...prev, idrAmount: idr.toString() }));\n  }, [step1Data.originalAmount, step1Data.lockedExchangeRate]);\n\n  const handleCheckRepeatBuyer = async () => {\n    if (!step1Data.buyerCompanyName.trim()) return;\n\n    setCheckingBuyer(true);\n    try {\n      const res = await invoiceAPI.checkRepeatBuyer(step1Data.buyerCompanyName);\n      if (res.success && res.data) {\n        setStep3Data(prev => ({\n          ...prev,\n          isRepeatBuyer: res.data!.is_repeat_buyer,\n          repeatBuyerVerified: true,\n          fundingLimit: res.data!.funding_limit\n        }));\n      }\n    } catch (err) {\n      console.error('Failed to check repeat buyer', err);\n    } finally {\n      setCheckingBuyer(false);\n    }\n  };\n\n  const handleFileUpload = (field: keyof Step2Data | 'previousTransferProof', file: File) => {\n    if (field === 'previousTransferProof') {\n      setStep3Data(prev => ({ ...prev, previousTransferProof: { name: file.name, size: file.size, file } }));\n    } else {\n      setStep2Data(prev => ({ ...prev, [field]: { name: file.name, size: file.size, file } }));\n    }\n    setErrors(prev => {\n      const newErrors = { ...prev };\n      delete newErrors[field];\n      return newErrors;\n    });\n  };\n\n  const handleFileRemove = (field: keyof Step2Data | 'previousTransferProof') => {\n    if (field === 'previousTransferProof') {\n      setStep3Data(prev => ({ ...prev, previousTransferProof: null }));\n    } else {\n      setStep2Data(prev => ({ ...prev, [field]: null }));\n    }\n  };\n\n  const validateStep1 = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    if (!step1Data.buyerCompanyName.trim()) newErrors.buyerCompanyName = 'Nama perusahaan importir harus diisi';\n    if (!step1Data.buyerCountry) newErrors.buyerCountry = 'Negara tujuan harus dipilih';\n    if (!step1Data.buyerEmail.trim()) newErrors.buyerEmail = 'Email buyer harus diisi';\n    else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(step1Data.buyerEmail)) newErrors.buyerEmail = 'Format email tidak valid';\n    if (!step1Data.invoiceNumber.trim()) newErrors.invoiceNumber = 'Nomor invoice harus diisi';\n    if (!step1Data.originalAmount) newErrors.originalAmount = 'Nominal invoice harus diisi';\n    if (!step1Data.dueDate) newErrors.dueDate = 'Tanggal jatuh tempo harus diisi';\n    else if (step1Data.dueDate < todayJakarta) newErrors.dueDate = 'Tanggal jatuh tempo tidak boleh sebelum hari ini';\n\n    const durationValue = parseInt(step1Data.fundingDuration, 10);\n    if (!step1Data.fundingDuration) newErrors.fundingDuration = 'Durasi pendanaan harus diisi';\n    else if (Number.isNaN(durationValue) || durationValue < 3 || durationValue > 14) newErrors.fundingDuration = 'Durasi harus antara 3 hingga 14 hari';\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const validateStep2 = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    if (!step2Data.commercialInvoice) newErrors.commercialInvoice = 'Commercial Invoice harus diunggah';\n    if (!step2Data.billOfLading) newErrors.billOfLading = 'Bill of Lading harus diunggah';\n    if (!step2Data.purchaseOrder) newErrors.purchaseOrder = 'Purchase Order harus diunggah';\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleNext = () => {\n    let isValid = true;\n    if (currentStep === 1) isValid = validateStep1();\n    if (currentStep === 2) isValid = validateStep2();\n\n    if (isValid && currentStep < 4) {\n      setCurrentStep(currentStep + 1);\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    }\n  };\n\n  const handleBack = () => {\n    if (currentStep > 1) {\n      setCurrentStep(currentStep - 1);\n      setErrors({});\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    }\n  };\n\n  const handleStepClick = (step: number) => {\n    if (step < currentStep) {\n      setCurrentStep(step);\n      setErrors({});\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    }\n  };\n\n  const handleSubmit = async () => {\n    if (!validateStep1() || !validateStep2()) {\n      alert('Mohon lengkapi semua data yang diperlukan');\n      return;\n    }\n\n    if (!acknowledgement || !dataConfirmation) {\n      alert('Mohon setujui semua pernyataan untuk melanjutkan');\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    try {\n      const requestData: CreateInvoiceRequest = {\n        buyer_company_name: step1Data.buyerCompanyName,\n        buyer_country: step1Data.buyerCountry,\n        buyer_email: step1Data.buyerEmail,\n        invoice_number: step1Data.invoiceNumber,\n        original_currency: step1Data.currency,\n        original_amount: parseFloat(step1Data.originalAmount),\n        locked_exchange_rate: parseFloat(step1Data.lockedExchangeRate),\n        idr_amount: parseFloat(step1Data.idrAmount),\n        due_date: step1Data.dueDate,\n        funding_duration_days: parseInt(step1Data.fundingDuration),\n        priority_ratio: parseFloat(step1Data.priorityRatio),\n        catalyst_ratio: parseFloat(step1Data.catalystRatio),\n        priority_interest_rate: parseFloat(step1Data.priorityInterestRate),\n        catalyst_interest_rate: parseFloat(step1Data.catalystInterestRate),\n        is_repeat_buyer: step3Data.isRepeatBuyer,\n        data_confirmation: dataConfirmation\n      };\n\n      const res = await invoiceAPI.createFundingRequest(requestData);\n\n      if (res.success && res.data) {\n        const invoiceId = res.data.id;\n        setCreatedInvoiceId(invoiceId);\n\n        if (step2Data.commercialInvoice) {\n          await invoiceAPI.uploadDocument(invoiceId, step2Data.commercialInvoice.file, 'commercial_invoice');\n        }\n        if (step2Data.billOfLading) {\n          await invoiceAPI.uploadDocument(invoiceId, step2Data.billOfLading.file, 'bill_of_lading');\n        }\n        if (step2Data.purchaseOrder) {\n          await invoiceAPI.uploadDocument(invoiceId, step2Data.purchaseOrder.file, 'purchase_order');\n        }\n\n        // Submit invoice for admin review (changes status from 'draft' to 'pending_review')\n        const submitRes = await invoiceAPI.submitInvoice(invoiceId);\n        if (!submitRes.success) {\n          console.error('Failed to submit invoice for review:', submitRes.error);\n          alert('Invoice berhasil dibuat tetapi gagal disubmit untuk review: ' + (submitRes.error?.message || 'Unknown error'));\n        }\n\n        setIsSubmitted(true);\n      } else {\n        alert(res.error?.message || 'Gagal membuat invoice');\n      }\n    } catch (err) {\n      console.error('Failed to submit', err);\n      alert('Terjadi kesalahan saat mengirim permohonan');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const calculateEstimatedFunds = (): string => {\n    const idrAmount = parseFloat(step1Data.idrAmount) || 0;\n    const percentage = step3Data.fundingLimit / 100;\n    const estimated = idrAmount * percentage;\n    return new Intl.NumberFormat('id-ID').format(Math.floor(estimated));\n  };\n\n  if (isSubmitted) {\n    return (\n      <DashboardLayout role=\"mitra\">\n        <div className=\"max-w-3xl mx-auto\">\n          <div className=\"bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-2xl border border-slate-700/50 p-8\">\n            <div className=\"text-center\">\n              <div className=\"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <svg className=\"w-8 h-8 text-emerald-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                </svg>\n              </div>\n              <h2 className=\"text-2xl font-bold text-slate-100 mb-3\">Permohonan Berhasil Dikirim</h2>\n              <p className=\"text-slate-300 mb-6 leading-relaxed\">\n                Permohonan pendanaan invoice berhasil dikirim untuk review. Tim admin akan meninjau dan memberikan respons dalam 1-3 hari kerja.\n              </p>\n              <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n                <Link\n                  href=\"/eksportir/invoices\"\n                  className=\"px-6 py-3 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-400 hover:to-cyan-400 text-white font-medium rounded-lg transition-all shadow-lg\"\n                >\n                  Lihat Daftar Invoice\n                </Link>\n                <Link\n                  href=\"/eksportir/dashboard\"\n                  className=\"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-slate-200 font-medium rounded-lg transition-all\"\n                >\n                  Kembali ke Dashboard\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  return (\n    <DashboardLayout role=\"mitra\">\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"mb-8\">\n          <Link\n            href=\"/eksportir/invoices\"\n            className=\"inline-flex items-center text-teal-400 hover:text-teal-300 text-sm font-medium mb-4 transition-colors\"\n          >\n            <svg className=\"w-4 h-4 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z\" clipRule=\"evenodd\" />\n            </svg>\n            Kembali\n          </Link>\n          <h1 className=\"text-2xl font-bold text-white\">Buat Permohonan Pendanaan</h1>\n          <p className=\"text-slate-400 mt-1\">Ajukan pendanaan untuk invoice ekspor Anda</p>\n        </div>\n\n        <div className=\"bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-2xl border border-slate-700/50 p-6 md:p-8\">\n          <Stepper currentStep={currentStep} onStepClick={handleStepClick} />\n\n          <div className=\"mt-8\">\n            {currentStep === 1 && (\n              <div className=\"space-y-6\">\n                <div>\n                  <h2 className=\"text-xl font-semibold text-slate-100 mb-4\">Data Pendanaan</h2>\n                  <p className=\"text-sm text-slate-400 mb-6\">Isi informasi tagihan yang akan didanai</p>\n                </div>\n\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                      Nama Perusahaan Importir <span className=\"text-red-400\">*</span>\n                    </label>\n                    <div className=\"flex space-x-2\">\n                      <input\n                        type=\"text\"\n                        value={step1Data.buyerCompanyName}\n                        onChange={(e) => setStep1Data({ ...step1Data, buyerCompanyName: e.target.value })}\n                        onBlur={handleCheckRepeatBuyer}\n                        className={`flex-1 px-4 py-3 bg-slate-900/50 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-all text-slate-100 ${errors.buyerCompanyName ? 'border-red-500' : 'border-slate-600'}`}\n                        placeholder=\"Nama perusahaan buyer\"\n                      />\n                      {checkingBuyer && (\n                        <div className=\"flex items-center px-3\">\n                          <div className=\"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-teal-400\"></div>\n                        </div>\n                      )}\n                    </div>\n                    {errors.buyerCompanyName && <p className=\"mt-1 text-xs text-red-400\">{errors.buyerCompanyName}</p>}\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                      Email Buyer <span className=\"text-red-400\">*</span>\n                    </label>\n                    <input\n                      type=\"email\"\n                      value={step1Data.buyerEmail}\n                      onChange={(e) => setStep1Data({ ...step1Data, buyerEmail: e.target.value })}\n                      className={`w-full px-4 py-3 bg-slate-900/50 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-all text-slate-100 ${errors.buyerEmail ? 'border-red-500' : 'border-slate-600'}`}\n                      placeholder=\"email@company.com\"\n                    />\n                    {errors.buyerEmail && <p className=\"mt-1 text-xs text-red-400\">{errors.buyerEmail}</p>}\n                  </div>\n                </div>\n\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                      Negara Tujuan <span className=\"text-red-400\">*</span>\n                    </label>\n                    <select\n                      value={step1Data.buyerCountry}\n                      onChange={(e) => setStep1Data({ ...step1Data, buyerCountry: e.target.value })}\n                      className={`w-full px-4 py-3 bg-slate-900/50 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-all text-slate-100 ${errors.buyerCountry ? 'border-red-500' : 'border-slate-600'}`}\n                    >\n                      <option value=\"\">Pilih negara tujuan</option>\n                      <option value=\"Singapore\">Singapura</option>\n                      <option value=\"United States\">Amerika Serikat</option>\n                      <option value=\"China\">Tiongkok</option>\n                      <option value=\"Japan\">Jepang</option>\n                      <option value=\"Germany\">Jerman</option>\n                      <option value=\"Netherlands\">Belanda</option>\n                      <option value=\"Australia\">Australia</option>\n                      <option value=\"Other\">Negara Lainnya</option>\n                    </select>\n                    {errors.buyerCountry && <p className=\"mt-1 text-xs text-red-400\">{errors.buyerCountry}</p>}\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                      Nomor Invoice <span className=\"text-red-400\">*</span>\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={step1Data.invoiceNumber}\n                      onChange={(e) => setStep1Data({ ...step1Data, invoiceNumber: e.target.value })}\n                      className={`w-full px-4 py-3 bg-slate-900/50 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-all text-slate-100 ${errors.invoiceNumber ? 'border-red-500' : 'border-slate-600'}`}\n                      placeholder=\"INV-2024-001\"\n                    />\n                    {errors.invoiceNumber && <p className=\"mt-1 text-xs text-red-400\">{errors.invoiceNumber}</p>}\n                  </div>\n                </div>\n\n                <div className=\"grid md:grid-cols-3 gap-6\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                      Mata Uang <span className=\"text-red-400\">*</span>\n                    </label>\n                    <select\n                      value={step1Data.currency}\n                      onChange={(e) => setStep1Data({ ...step1Data, currency: e.target.value })}\n                      className=\"w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-teal-500 transition-all text-slate-100\"\n                    >\n                      <option value=\"USD\">USD - US Dollar</option>\n                      <option value=\"EUR\">EUR - Euro</option>\n                      <option value=\"SGD\">SGD - Singapore Dollar</option>\n                      <option value=\"JPY\">JPY - Japanese Yen</option>\n                    </select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                      Nominal Invoice <span className=\"text-red-400\">*</span>\n                    </label>\n                    <div className=\"relative\">\n                      <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400\">{step1Data.currency}</span>\n                      <input\n                        type=\"number\"\n                        value={step1Data.originalAmount}\n                        onChange={(e) => setStep1Data({ ...step1Data, originalAmount: e.target.value })}\n                        className={`w-full pl-16 pr-4 py-3 bg-slate-900/50 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-all text-slate-100 ${errors.originalAmount ? 'border-red-500' : 'border-slate-600'}`}\n                        placeholder=\"10000\"\n                      />\n                    </div>\n                    {errors.originalAmount && <p className=\"mt-1 text-xs text-red-400\">{errors.originalAmount}</p>}\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">Kurs (IDR)</label>\n                    <input\n                      type=\"text\"\n                      value={`Rp ${new Intl.NumberFormat('id-ID').format(parseFloat(step1Data.lockedExchangeRate) || 0)}`}\n                      readOnly\n                      className=\"w-full px-4 py-3 bg-slate-900/30 border border-slate-700 rounded-lg text-slate-400 cursor-not-allowed\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                      Tanggal Jatuh Tempo <span className=\"text-red-400\">*</span>\n                    </label>\n                    <input\n                      type=\"date\"\n                      value={step1Data.dueDate}\n                      onChange={(e) => setStep1Data({ ...step1Data, dueDate: e.target.value })}\n                      min={todayJakarta}\n                      ref={dueDateInputRef}\n                      className={`w-full px-4 py-3 bg-slate-900/50 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-all text-slate-100 ${errors.dueDate ? 'border-red-500' : 'border-slate-600'}`}\n                    />\n                    {errors.dueDate && <p className=\"mt-1 text-xs text-red-400\">{errors.dueDate}</p>}\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                      Durasi Pendanaan (Hari) <span className=\"text-red-400\">*</span>\n                    </label>\n                    <input\n                      type=\"number\"\n                      min={3}\n                      max={14}\n                      value={step1Data.fundingDuration}\n                      onChange={(e) => setStep1Data({ ...step1Data, fundingDuration: e.target.value })}\n                      className={`w-full px-4 py-3 bg-slate-900/50 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-all text-slate-100 ${errors.fundingDuration ? 'border-red-500' : 'border-slate-600'}`}\n                      placeholder=\"3-14 hari\"\n                    />\n                    {errors.fundingDuration && <p className=\"mt-1 text-xs text-red-400\">{errors.fundingDuration}</p>}\n                  </div>\n                </div>\n\n                <div className=\"p-4 bg-slate-900/50 border border-slate-700 rounded-lg\">\n                  <h3 className=\"text-sm font-medium text-slate-300 mb-4\">Konfigurasi Tranche</h3>\n                  <div className=\"grid md:grid-cols-2 gap-6\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-xs text-slate-400 mb-1\">Prioritas (%)</label>\n                        <input\n                          type=\"number\"\n                          min=\"0\"\n                          max=\"100\"\n                          value={step1Data.priorityRatio}\n                          onChange={(e) => {\n                            const val = parseInt(e.target.value) || 0;\n                            setStep1Data({ ...step1Data, priorityRatio: e.target.value, catalystRatio: String(100 - val) });\n                          }}\n                          className=\"w-full px-4 py-2 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-teal-500 text-slate-100\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-xs text-slate-400 mb-1\">Katalis (%)</label>\n                        <input\n                          type=\"number\"\n                          value={step1Data.catalystRatio}\n                          readOnly\n                          className=\"w-full px-4 py-2 bg-slate-900/30 border border-slate-700 rounded-lg text-slate-400 cursor-not-allowed\"\n                        />\n                      </div>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-xs text-slate-400 mb-1\">Yield Prioritas (%)</label>\n                        <input\n                          type=\"number\"\n                          step=\"0.1\"\n                          value={step1Data.priorityInterestRate}\n                          onChange={(e) => setStep1Data({ ...step1Data, priorityInterestRate: e.target.value })}\n                          className=\"w-full px-4 py-2 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-teal-500 text-slate-100\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-xs text-slate-400 mb-1\">Yield Katalis (%)</label>\n                        <input\n                          type=\"number\"\n                          step=\"0.1\"\n                          value={step1Data.catalystInterestRate}\n                          onChange={(e) => setStep1Data({ ...step1Data, catalystInterestRate: e.target.value })}\n                          className=\"w-full px-4 py-2 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-teal-500 text-slate-100\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"bg-teal-950/30 border border-teal-800/30 rounded-lg p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <span className=\"text-sm font-medium text-slate-300\">Total dalam IDR:</span>\n                      <p className=\"text-xs text-slate-400 mt-1\">Limit pendanaan: {step3Data.fundingLimit}%</p>\n                    </div>\n                    <div className=\"text-right\">\n                      <span className=\"text-lg font-bold text-teal-400\">\n                        Rp {new Intl.NumberFormat('id-ID').format(parseFloat(step1Data.idrAmount) || 0)}\n                      </span>\n                      <p className=\"text-xs text-slate-400\">Est. Dana: Rp {calculateEstimatedFunds()}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {currentStep === 2 && (\n              <div className=\"space-y-6\">\n                <div>\n                  <h2 className=\"text-xl font-semibold text-slate-100 mb-4\">Dokumen Pendukung</h2>\n                  <div className=\"bg-teal-950/20 border border-teal-800/30 rounded-lg p-4 mb-6\">\n                    <p className=\"text-sm text-slate-300\">\n                      <svg className=\"w-5 h-5 inline mr-2 text-teal-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n                      </svg>\n                      Dokumen ini digunakan untuk memverifikasi klaim tagihan dan akan direview oleh admin.\n                    </p>\n                  </div>\n                </div>\n\n                <UploadCard\n                  label=\"Commercial Invoice\"\n                  file={step2Data.commercialInvoice}\n                  onChange={(file) => handleFileUpload('commercialInvoice', file)}\n                  onRemove={() => handleFileRemove('commercialInvoice')}\n                  required\n                  error={errors.commercialInvoice}\n                />\n\n                <UploadCard\n                  label=\"Bill of Lading (BL)\"\n                  file={step2Data.billOfLading}\n                  onChange={(file) => handleFileUpload('billOfLading', file)}\n                  onRemove={() => handleFileRemove('billOfLading')}\n                  required\n                  error={errors.billOfLading}\n                />\n\n                <UploadCard\n                  label=\"Purchase Order (PO)\"\n                  file={step2Data.purchaseOrder}\n                  onChange={(file) => handleFileUpload('purchaseOrder', file)}\n                  onRemove={() => handleFileRemove('purchaseOrder')}\n                  required\n                  error={errors.purchaseOrder}\n                />\n              </div>\n            )}\n\n            {currentStep === 3 && (\n              <div className=\"space-y-6\">\n                <div>\n                  <h2 className=\"text-xl font-semibold text-slate-100 mb-4\">Riwayat Transaksi</h2>\n                  <p className=\"text-sm text-slate-400 mb-6\">Verifikasi riwayat transaksi dengan importir</p>\n                </div>\n\n                {step3Data.repeatBuyerVerified ? (\n                  step3Data.isRepeatBuyer ? (\n                    <div className=\"bg-emerald-950/30 border border-emerald-800/30 rounded-lg p-5\">\n                      <div className=\"flex items-start space-x-3\">\n                        <svg className=\"w-6 h-6 text-emerald-400 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                        </svg>\n                        <div>\n                          <p className=\"text-emerald-200 font-semibold mb-1\">Riwayat Transaksi Terverifikasi</p>\n                          <p className=\"text-sm text-slate-300\">\n                            Importir <span className=\"font-semibold text-white\">{step1Data.buyerCompanyName}</span> memiliki riwayat transaksi yang baik.\n                            Limit pendanaan: <span className=\"text-emerald-300 font-semibold\">{step3Data.fundingLimit}%</span>\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  ) : (\n                    <div className=\"bg-amber-950/30 border border-amber-800/30 rounded-lg p-5\">\n                      <div className=\"flex items-start space-x-3\">\n                        <svg className=\"w-6 h-6 text-amber-400 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n                        </svg>\n                        <div>\n                          <p className=\"text-amber-200 font-semibold mb-1\">Transaksi Pertama</p>\n                          <p className=\"text-sm text-slate-300\">\n                            Ini adalah transaksi pertama dengan <span className=\"font-semibold text-white\">{step1Data.buyerCompanyName}</span>.\n                            Untuk kemitraan baru, maksimal pendanaan adalah <span className=\"text-amber-300 font-semibold\">{step3Data.fundingLimit}%</span> dari nilai invoice.\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )\n                ) : (\n                  <div className=\"bg-slate-900/40 border border-slate-700 rounded-lg p-5\">\n                    <p className=\"text-slate-300 text-center\">\n                      Masukkan nama perusahaan importir di Step 1 untuk memverifikasi riwayat transaksi.\n                    </p>\n                  </div>\n                )}\n              </div>\n            )}\n\n            {currentStep === 4 && (\n              <div className=\"space-y-6\">\n                <div>\n                  <h2 className=\"text-xl font-semibold text-slate-100 mb-4\">Konfirmasi Data</h2>\n                  <p className=\"text-sm text-slate-400 mb-6\">Periksa kembali informasi sebelum mengirim permohonan</p>\n                </div>\n\n                <div className=\"bg-slate-900/50 rounded-lg p-5 border border-slate-700\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <h3 className=\"font-semibold text-slate-200\">Data Pendanaan</h3>\n                    <button onClick={() => setCurrentStep(1)} className=\"text-teal-400 hover:text-teal-300 text-sm font-medium\">Edit</button>\n                  </div>\n                  <div className=\"grid md:grid-cols-2 gap-4 text-sm\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-slate-400\">Importir:</span>\n                      <span className=\"text-slate-200 font-medium\">{step1Data.buyerCompanyName}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-slate-400\">Negara:</span>\n                      <span className=\"text-slate-200 font-medium\">{step1Data.buyerCountry}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-slate-400\">No. Invoice:</span>\n                      <span className=\"text-slate-200 font-medium\">{step1Data.invoiceNumber}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-slate-400\">Nominal:</span>\n                      <span className=\"text-slate-200 font-medium\">{step1Data.currency} {new Intl.NumberFormat('en-US').format(parseFloat(step1Data.originalAmount) || 0)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-slate-400\">Nilai IDR:</span>\n                      <span className=\"text-slate-200 font-medium\">Rp {new Intl.NumberFormat('id-ID').format(parseFloat(step1Data.idrAmount) || 0)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-slate-400\">Jatuh Tempo:</span>\n                      <span className=\"text-slate-200 font-medium\">{step1Data.dueDate}</span>\n                    </div>\n                  </div>\n                  <div className=\"mt-4 pt-4 border-t border-slate-700\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-slate-300 font-medium\">Estimasi Dana Diterima:</span>\n                      <span className=\"text-teal-400 font-bold\">Rp {calculateEstimatedFunds()}</span>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"bg-slate-900/50 rounded-lg p-5 border border-slate-700\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <h3 className=\"font-semibold text-slate-200\">Dokumen</h3>\n                    <button onClick={() => setCurrentStep(2)} className=\"text-teal-400 hover:text-teal-300 text-sm font-medium\">Edit</button>\n                  </div>\n                  <div className=\"space-y-2 text-sm\">\n                    {[\n                      { label: 'Commercial Invoice', file: step2Data.commercialInvoice },\n                      { label: 'Bill of Lading', file: step2Data.billOfLading },\n                      { label: 'Purchase Order', file: step2Data.purchaseOrder },\n                    ].map((doc) => (\n                      <div key={doc.label} className=\"flex items-center justify-between\">\n                        <span className=\"text-slate-400\">{doc.label}:</span>\n                        <span className=\"text-emerald-400 flex items-center\">\n                          <svg className=\"w-4 h-4 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                          </svg>\n                          {doc.file?.name}\n                        </span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                <div className=\"bg-teal-950/20 border border-teal-800/30 rounded-lg p-5\">\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-start space-x-3\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"acknowledgement\"\n                        checked={acknowledgement}\n                        onChange={(e) => setAcknowledgement(e.target.checked)}\n                        className=\"mt-1 w-4 h-4 bg-slate-900/50 border-slate-600 rounded text-teal-500 focus:ring-2 focus:ring-teal-500\"\n                      />\n                      <label htmlFor=\"acknowledgement\" className=\"text-sm text-slate-300 cursor-pointer\">\n                        Saya menyetujui Pengalihan Hak Tagih (Cessie) kepada platform sebagai jaminan.\n                        <span className=\"text-red-400 ml-1\">*</span>\n                      </label>\n                    </div>\n\n                    <div className=\"flex items-start space-x-3\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"dataConfirmation\"\n                        checked={dataConfirmation}\n                        onChange={(e) => setDataConfirmation(e.target.checked)}\n                        className=\"mt-1 w-4 h-4 bg-slate-900/50 border-slate-600 rounded text-teal-500 focus:ring-2 focus:ring-teal-500\"\n                      />\n                      <label htmlFor=\"dataConfirmation\" className=\"text-sm text-slate-300 cursor-pointer\">\n                        Data yang saya berikan adalah benar dan asli.\n                        <span className=\"text-red-400 ml-1\">*</span>\n                      </label>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          <div className=\"mt-8 pt-6 border-t border-slate-700 flex items-center justify-between\">\n            <button\n              onClick={handleBack}\n              disabled={currentStep === 1}\n              className=\"px-6 py-3 bg-slate-700 hover:bg-slate-600 disabled:bg-slate-800 disabled:text-slate-600 disabled:cursor-not-allowed text-slate-200 font-medium rounded-lg transition-all\"\n            >\n              Kembali\n            </button>\n\n            {currentStep < 4 ? (\n              <button\n                onClick={handleNext}\n                className=\"px-6 py-3 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-400 hover:to-cyan-400 text-white font-medium rounded-lg transition-all shadow-lg\"\n              >\n                Lanjut\n              </button>\n            ) : (\n              <button\n                onClick={handleSubmit}\n                disabled={!acknowledgement || !dataConfirmation || isSubmitting}\n                className=\"px-6 py-3 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-400 hover:to-cyan-400 disabled:from-slate-700 disabled:to-slate-700 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-all shadow-lg flex items-center space-x-2\"\n              >\n                {isSubmitting ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white\"></div>\n                    <span>Mengirim...</span>\n                  </>\n                ) : (\n                  <span>Kirim Permohonan</span>\n                )}\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </DashboardLayout>\n  );\n}\n\nexport default function CreateInvoicePage() {\n  return (\n    <AuthGuard allowedRoles={['mitra']}>\n      <CreateInvoiceContent />\n    </AuthGuard>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/eksportir/invoices/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/eksportir/pendanaan/buat/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":868,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":868,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":886,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":886,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useRef, useMemo } from 'react';\nimport Link from 'next/link';\n\n// Types\ninterface UploadedFile {\n  name: string;\n  size: number;\n  file: File;\n}\n\ninterface Step1Data {\n  currency: 'USD' | 'EUR' | '';\n  invoiceAmount: string;\n  agreedExchangeRate: string;\n  dueDate: string;\n  fundingDuration: string;\n  importerName: string;\n  destinationCountry: string;\n  tranchePrioritas: string;\n  trancheKatalis: string;\n  yieldPrioritas: string;\n  yieldKatalis: string;\n}\n\ninterface Step2Data {\n  commercialInvoice: UploadedFile | null;\n  billOfLading: UploadedFile | null;\n  purchaseOrder: UploadedFile | null;\n}\n\ninterface Step3Data {\n  transactionType: 'first' | 'repeat' | 'system-verified';\n  previousTransferProof: UploadedFile | null;\n  manualAnswer: '' | 'belum' | 'sudah';\n}\n\n// Stepper Component\nfunction Stepper({ currentStep, onStepClick }: { currentStep: number; onStepClick: (step: number) => void }) {\n  const steps = [\n    { number: 1, label: 'Data Pendanaan' },\n    { number: 2, label: 'Dokumen Pendukung' },\n    { number: 3, label: 'Riwayat Transaksi' },\n    { number: 4, label: 'Tinjau & Kirim' }\n  ];\n\n  return (\n    <div className=\"mb-8\">\n      <div className=\"flex items-center justify-between\">\n        {steps.map((step, index) => (\n          <div key={step.number} className=\"flex items-center flex-1\">\n            <div className=\"flex flex-col items-center flex-1\">\n              <button\n                onClick={() => onStepClick(step.number)}\n                className={`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm transition-all ${\n                  currentStep === step.number\n                    ? 'bg-cyan-600 text-white ring-4 ring-cyan-600/30'\n                    : currentStep > step.number\n                    ? 'bg-cyan-600 text-white hover:bg-cyan-500'\n                    : 'bg-slate-700 text-slate-400 hover:bg-slate-600'\n                }`}\n              >\n                {step.number}\n              </button>\n              <span\n                className={`mt-2 text-xs font-medium ${\n                  currentStep === step.number\n                    ? 'text-cyan-400'\n                    : currentStep > step.number\n                    ? 'text-cyan-500'\n                    : 'text-slate-400'\n                }`}\n              >\n                {step.label}\n              </span>\n            </div>\n            {index < steps.length - 1 && (\n              <div\n                className={`h-0.5 flex-1 mx-2 mb-6 ${\n                  currentStep > step.number ? 'bg-cyan-600' : 'bg-slate-700'\n                }`}\n              />\n            )}\n          </div>\n        ))}\n      </div>\n      <style jsx>{`\n        .white-calendar {\n          color-scheme: dark;\n          position: relative;\n        }\n\n        :global(.white-calendar::-webkit-calendar-picker-indicator) {\n          opacity: 0;\n          pointer-events: auto;\n          background: transparent;\n        }\n\n        :global(.white-calendar::-moz-focus-inner) {\n          border: 0;\n        }\n\n        :global(.white-calendar::-moz-calendar-picker-indicator) {\n          opacity: 0;\n          pointer-events: auto;\n          background: transparent;\n        }\n      `}</style>\n    </div>\n  );\n}\n\n// Upload Card Component\nfunction UploadCard({\n  label,\n  file,\n  onChange,\n  onRemove,\n  required = false,\n  error\n}: {\n  label: string;\n  file: UploadedFile | null;\n  onChange: (file: File) => void;\n  onRemove: () => void;\n  required?: boolean;\n  error?: string;\n}) {\n  const [isDragging, setIsDragging] = useState(false);\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(true);\n  };\n\n  const handleDragLeave = () => {\n    setIsDragging(false);\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n    \n    const droppedFile = e.dataTransfer.files[0];\n    if (droppedFile && droppedFile.size <= 10 * 1024 * 1024) {\n      onChange(droppedFile);\n    }\n  };\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = e.target.files?.[0];\n    if (selectedFile && selectedFile.size <= 10 * 1024 * 1024) {\n      onChange(selectedFile);\n    }\n  };\n\n  const formatFileSize = (bytes: number): string => {\n    if (bytes < 1024) return bytes + ' B';\n    if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';\n    return (bytes / (1024 * 1024)).toFixed(1) + ' MB';\n  };\n\n  return (\n    <div>\n      <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n        {label}\n        {required && <span className=\"text-red-400 ml-1\">*</span>}\n      </label>\n      \n      {!file ? (\n        <div\n          onDragOver={handleDragOver}\n          onDragLeave={handleDragLeave}\n          onDrop={handleDrop}\n          className={`border-2 border-dashed rounded-lg p-6 text-center transition-all ${\n            isDragging\n              ? 'border-cyan-500 bg-cyan-950/30'\n              : error\n              ? 'border-red-500 bg-red-950/20'\n              : 'border-slate-600 bg-slate-900/30 hover:border-slate-500'\n          }`}\n        >\n          <svg className=\"w-12 h-12 mx-auto text-slate-400 mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n          </svg>\n          <p className=\"text-sm text-slate-300 mb-2\">\n            Seret & lepas file atau{' '}\n            <label className=\"text-cyan-400 hover:text-cyan-300 cursor-pointer font-medium\">\n              pilih file\n              <input\n                type=\"file\"\n                className=\"hidden\"\n                accept=\".pdf,.jpg,.jpeg,.png\"\n                onChange={handleFileSelect}\n              />\n            </label>\n          </p>\n          <p className=\"text-xs text-slate-500\">PDF, JPG, PNG (Maks 10MB)</p>\n        </div>\n      ) : (\n        <div className=\"border border-slate-600 rounded-lg p-4 bg-slate-900/30\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3 flex-1 min-w-0\">\n              <svg className=\"w-8 h-8 text-cyan-400 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z\" clipRule=\"evenodd\" />\n              </svg>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium text-slate-200 truncate\">{file.name}</p>\n                <p className=\"text-xs text-slate-400\">{formatFileSize(file.size)}</p>\n              </div>\n            </div>\n            <button\n              type=\"button\"\n              onClick={onRemove}\n              className=\"ml-3 text-red-400 hover:text-red-300 text-sm font-medium flex-shrink-0\"\n            >\n              Hapus\n            </button>\n          </div>\n        </div>\n      )}\n      \n      {error && (\n        <p className=\"mt-1 text-xs text-red-400\">{error}</p>\n      )}\n    </div>\n  );\n}\n\n// Main Page Component\nexport default function BuatPendanaanPage() {\n  const [currentStep, setCurrentStep] = useState(1);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n\n  // Step 1 State\n  const [step1Data, setStep1Data] = useState<Step1Data>({\n    currency: '',\n    invoiceAmount: '',\n    agreedExchangeRate: '15750', // Mock exchange rate\n    dueDate: '',\n    fundingDuration: '14',\n    importerName: '',\n    destinationCountry: '',\n    tranchePrioritas: '80',\n    trancheKatalis: '20',\n    yieldPrioritas: '10',\n    yieldKatalis: '15'\n  });\n\n  // Step 2 State\n  const [step2Data, setStep2Data] = useState<Step2Data>({\n    commercialInvoice: null,\n    billOfLading: null,\n    purchaseOrder: null\n  });\n\n  // Step 3 State\n  const [step3Data, setStep3Data] = useState<Step3Data>({\n    transactionType: 'first',\n    previousTransferProof: null,\n    manualAnswer: ''\n  });\n\n  // Mock function to check if importer exists in transaction history\n  const checkImporterHistory = (importerName: string): boolean => {\n    // Mock: Returns true if name contains certain keywords (for demo)\n    const verifiedImporters = ['PT Arunika Bahari', 'Samsung', 'Apple'];\n    return verifiedImporters.some(name => importerName.toLowerCase().includes(name.toLowerCase()));\n  };\n\n  // Step 4 State\n  const [acknowledgement, setAcknowledgement] = useState(false);\n  const [dataIntegrity, setDataIntegrity] = useState(false);\n\n  const dueDateInputRef = useRef<HTMLInputElement | null>(null);\n  const todayJakarta = useMemo(\n    () => new Intl.DateTimeFormat('en-CA', { timeZone: 'Asia/Jakarta' }).format(new Date()),\n    []\n  );\n\n  // Errors\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  const handleDueDateFieldClick = () => {\n    const node = dueDateInputRef.current;\n    if (!node) return;\n    const picker = (node as HTMLInputElement & { showPicker?: () => void }).showPicker;\n    if (picker) {\n      picker.call(node);\n    } else {\n      node.focus();\n      node.click();\n    }\n  };\n\n  // Handle file upload\n  const handleFileUpload = (field: keyof Step2Data | 'previousTransferProof', file: File) => {\n    if (field === 'previousTransferProof') {\n      setStep3Data(prev => ({\n        ...prev,\n        previousTransferProof: { name: file.name, size: file.size, file }\n      }));\n    } else {\n      setStep2Data(prev => ({\n        ...prev,\n        [field]: { name: file.name, size: file.size, file }\n      }));\n    }\n    // Clear error for this field\n    setErrors(prev => {\n      const newErrors = { ...prev };\n      delete newErrors[field];\n      return newErrors;\n    });\n  };\n\n  const handleFileRemove = (field: keyof Step2Data | 'previousTransferProof') => {\n    if (field === 'previousTransferProof') {\n      setStep3Data(prev => ({ ...prev, previousTransferProof: null }));\n    } else {\n      setStep2Data(prev => ({ ...prev, [field]: null }));\n    }\n  };\n\n  // Validation functions\n  const validateStep1 = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    \n    if (!step1Data.importerName.trim()) newErrors.importerName = 'Nama perusahaan importir harus diisi';\n    if (!step1Data.destinationCountry) newErrors.destinationCountry = 'Negara tujuan harus dipilih';\n    if (!step1Data.currency) newErrors.currency = 'Mata uang harus dipilih';\n    if (!step1Data.invoiceAmount) newErrors.invoiceAmount = 'Nominal invoice harus diisi';\n    if (!step1Data.dueDate) newErrors.dueDate = 'Tanggal jatuh tempo harus diisi';\n    else if (step1Data.dueDate < todayJakarta) {\n      newErrors.dueDate = 'Tanggal jatuh tempo tidak boleh sebelum hari ini (WIB)';\n    }\n\n    const durationValue = parseInt(step1Data.fundingDuration, 10);\n    if (!step1Data.fundingDuration) {\n      newErrors.fundingDuration = 'Durasi pendanaan harus diisi';\n    } else if (Number.isNaN(durationValue) || durationValue < 3 || durationValue > 14) {\n      newErrors.fundingDuration = 'Durasi harus antara 3 hingga 14 hari';\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const validateStep2 = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    \n    if (!step2Data.commercialInvoice) newErrors.commercialInvoice = 'Commercial Invoice harus diunggah';\n    if (!step2Data.billOfLading) newErrors.billOfLading = 'Bill of Lading harus diunggah';\n    if (!step2Data.purchaseOrder) newErrors.purchaseOrder = 'Purchase Order harus diunggah';\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const validateStep3 = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    const importerExists = step1Data.importerName.trim() ? checkImporterHistory(step1Data.importerName) : false;\n    \n    if (!importerExists && !step3Data.manualAnswer) {\n      newErrors.manualAnswer = 'Mohon jawab pertanyaan riwayat transaksi';\n    }\n    \n    if (step3Data.manualAnswer === 'sudah' && !step3Data.previousTransferProof) {\n      newErrors.previousTransferProof = 'Bukti transfer transaksi sebelumnya harus diunggah';\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Handle step navigation\n  const handleNext = () => {\n    let isValid = true;\n    \n    if (currentStep === 1) isValid = validateStep1();\n    if (currentStep === 2) isValid = validateStep2();\n    if (currentStep === 3) isValid = validateStep3();\n    \n    if (isValid && currentStep < 4) {\n      setCurrentStep(currentStep + 1);\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    }\n  };\n\n  const handleBack = () => {\n    if (currentStep > 1) {\n      setCurrentStep(currentStep - 1);\n      setErrors({});\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    }\n  };\n\n  const handleStepClick = (step: number) => {\n    setCurrentStep(step);\n    setErrors({});\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  // Handle submit\n  const handleSubmit = () => {\n    if (!validateStep1() || !validateStep2() || !validateStep3()) {\n      alert('Mohon lengkapi semua data yang diperlukan');\n      return;\n    }\n    \n    if (!acknowledgement) {\n      alert('Mohon setujui pengalihan hak tagih untuk melanjutkan');\n      return;\n    }\n\n    if (!dataIntegrity) {\n      alert('Mohon konfirmasi bahwa data yang diberikan benar dan asli');\n      return;\n    }\n    \n    // Log form data (no API integration yet)\n    console.log('Submitting financing request:', {\n      step1Data,\n      step2Data,\n      step3Data,\n      acknowledgement,\n      dataIntegrity\n    });\n    \n    setIsSubmitted(true);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  // Calculate estimated funds\n  const calculateEstimatedFunds = (): string => {\n    const amount = parseFloat(step1Data.invoiceAmount) || 0;\n    const rate = parseFloat(step1Data.agreedExchangeRate) || 0;\n    const percentage = step3Data.transactionType === 'first' ? 0.6 : 1.0;\n    const estimated = amount * rate * percentage;\n    \n    return new Intl.NumberFormat('id-ID').format(Math.floor(estimated));\n  };\n\n  // Success state\n  if (isSubmitted) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 py-8 px-4\">\n        <div className=\"max-w-3xl mx-auto\">\n          <div className=\"bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-2xl border border-slate-700/50 p-8\">\n            <div className=\"text-center\">\n              <div className=\"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <svg className=\"w-8 h-8 text-emerald-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                </svg>\n              </div>\n              <h2 className=\"text-2xl font-bold text-slate-100 mb-3\">\n                Permohonan Berhasil Dikirim\n              </h2>\n              <p className=\"text-slate-300 mb-6 leading-relaxed\">\n                Permohonan pendanaan berhasil dikirim. Tim kami akan meninjau dan menghubungi Anda melalui email.\n              </p>\n              <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\n                <Link\n                  href=\"/exporter/dashboard\"\n                  className=\"px-6 py-3 bg-gradient-to-r from-cyan-600 to-teal-600 hover:from-cyan-500 hover:to-teal-500 text-white font-medium rounded-lg transition-all shadow-lg shadow-cyan-900/50\"\n                >\n                  Kembali ke Dashboard\n                </Link>\n                <button\n                  onClick={() => {\n                    setIsSubmitted(false);\n                    setCurrentStep(1);\n                    setStep1Data({\n                      currency: '',\n                      invoiceAmount: '',\n                      agreedExchangeRate: '15750',\n                      dueDate: '',\n                      fundingDuration: '14',\n                      importerName: '',\n                      destinationCountry: '',\n                      tranchePrioritas: '80',\n                      trancheKatalis: '20',\n                      yieldPrioritas: '10',\n                      yieldKatalis: '15'\n                    });\n                    setStep2Data({ commercialInvoice: null, billOfLading: null, purchaseOrder: null });\n                    setStep3Data({ transactionType: 'first', previousTransferProof: null, manualAnswer: '' });\n                    setAcknowledgement(false);\n                    setDataIntegrity(false);\n                  }}\n                  className=\"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-slate-200 font-medium rounded-lg transition-all\"\n                >\n                  Buat Permohonan Baru\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 py-8 px-4\">\n      <div className=\"max-w-4xl mx-auto\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <Link\n            href=\"/exporter/dashboard\"\n            className=\"inline-flex items-center text-cyan-400 hover:text-cyan-300 text-sm font-medium mb-4 transition-colors\"\n          >\n            <svg className=\"w-4 h-4 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z\" clipRule=\"evenodd\" />\n            </svg>\n            Kembali\n          </Link>\n          <h1 className=\"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-teal-400 bg-clip-text text-transparent\">\n            Permohonan Pendanaan Tagihan\n          </h1>\n          <p className=\"text-slate-400 mt-2\">\n            Ajukan pendanaan untuk tagihan ekspor Anda\n          </p>\n        </div>\n\n        {/* Main Card */}\n        <div className=\"bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-2xl border border-slate-700/50 p-6 md:p-8\">\n          {/* Stepper */}\n          <Stepper currentStep={currentStep} onStepClick={handleStepClick} />\n\n          {/* Step Content */}\n          <div className=\"mt-8\">\n            {/* STEP 1 - Data Pendanaan */}\n            {currentStep === 1 && (\n              <div className=\"space-y-6\">\n                <div>\n                  <h2 className=\"text-xl font-semibold text-slate-100 mb-4\">Data Pendanaan</h2>\n                  <p className=\"text-sm text-slate-400 mb-6\">\n                    Isi informasi tagihan yang akan didanai\n                  </p>\n                </div>\n\n                {/* Importer Name */}\n                <div>\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                    Nama Perusahaan Importir <span className=\"text-red-400\">*</span>\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={step1Data.importerName}\n                    onChange={(e) => setStep1Data({ ...step1Data, importerName: e.target.value })}\n                    className={`w-full px-4 py-3 bg-slate-900/50 border rounded-lg focus:ring-2 focus:ring-cyan-500 transition-all text-slate-100 ${\n                      errors.importerName ? 'border-red-500' : 'border-slate-600'\n                    }`}\n                    placeholder=\"Nama perusahaan buyer/importir\"\n                  />\n                  {errors.importerName && <p className=\"mt-1 text-xs text-red-400\">{errors.importerName}</p>}\n                </div>\n\n                {/* Destination Country */}\n                <div>\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                    Negara Tujuan <span className=\"text-red-400\">*</span>\n                  </label>\n                  <select\n                    value={step1Data.destinationCountry}\n                    onChange={(e) => setStep1Data({ ...step1Data, destinationCountry: e.target.value })}\n                    className={`w-full px-4 py-3 bg-slate-900/50 border rounded-lg focus:ring-2 focus:ring-cyan-500 transition-all text-slate-100 ${\n                      errors.destinationCountry ? 'border-red-500' : 'border-slate-600'\n                    }`}\n                  >\n                    <option value=\"\">Pilih negara tujuan</option>\n                    <option value=\"Singapura\">Singapura</option>\n                    <option value=\"Amerika Serikat\">Amerika Serikat</option>\n                    <option value=\"Tiongkok\">Tiongkok</option>\n                    <option value=\"Jepang\">Jepang</option>\n                    <option value=\"Uni Eropa\">Uni Eropa</option>\n                    <option value=\"Negara Lainnya\">Negara Lainnya</option>\n                  </select>\n                  <p className=\"mt-1 text-xs text-slate-400\">Negara mempengaruhi Grade Risiko.</p>\n                  {errors.destinationCountry && (\n                    <p className=\"mt-1 text-xs text-red-400\">{errors.destinationCountry}</p>\n                  )}\n                </div>\n\n                {/* Currency */}\n                <div>\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                    Mata Uang Invoice <span className=\"text-red-400\">*</span>\n                  </label>\n                  <select\n                    value={step1Data.currency}\n                    onChange={(e) => setStep1Data({ ...step1Data, currency: e.target.value as 'USD' | 'EUR' })}\n                    className={`w-full px-4 py-3 bg-slate-900/50 border rounded-lg focus:ring-2 focus:ring-cyan-500 transition-all text-slate-100 ${\n                      errors.currency ? 'border-red-500' : 'border-slate-600'\n                    }`}\n                  >\n                    <option value=\"\">Pilih mata uang</option>\n                    <option value=\"USD\">USD - US Dollar</option>\n                    <option value=\"EUR\">EUR - Euro</option>\n                  </select>\n                  {errors.currency && <p className=\"mt-1 text-xs text-red-400\">{errors.currency}</p>}\n                </div>\n\n                {/* Invoice Amount */}\n                <div>\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                    Nominal Invoice <span className=\"text-red-400\">*</span>\n                  </label>\n                  <div className=\"relative\">\n                    <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400\">\n                      {step1Data.currency || 'XXX'}\n                    </span>\n                    <input\n                      type=\"number\"\n                      value={step1Data.invoiceAmount}\n                      onChange={(e) => setStep1Data({ ...step1Data, invoiceAmount: e.target.value })}\n                      className={`w-full pl-16 pr-4 py-3 bg-slate-900/50 border rounded-lg focus:ring-2 focus:ring-cyan-500 transition-all text-slate-100 ${\n                        errors.invoiceAmount ? 'border-red-500' : 'border-slate-600'\n                      }`}\n                      placeholder=\"10000\"\n                    />\n                  </div>\n                  {errors.invoiceAmount && <p className=\"mt-1 text-xs text-red-400\">{errors.invoiceAmount}</p>}\n                </div>\n\n                {/* Agreed Exchange Rate */}\n                <div>\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                    Kurs Pencairan Disepakati\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={`Rp ${new Intl.NumberFormat('id-ID').format(parseFloat(step1Data.agreedExchangeRate))}`}\n                    readOnly\n                    className=\"w-full px-4 py-3 bg-slate-900/30 border border-slate-700 rounded-lg text-slate-400 cursor-not-allowed\"\n                  />\n                  <p className=\"mt-2 text-xs text-slate-400 leading-relaxed\">\n                    <svg className=\"w-4 h-4 inline mr-1 text-cyan-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n                    </svg>\n                    Kurs dikunci final untuk melindungi nilai pencairan.\n                  </p>\n                </div>\n\n                {/* Due Date */}\n                <div>\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                    Tanggal Jatuh Tempo (Tenor) <span className=\"text-red-400\">*</span>\n                  </label>\n                  <div className=\"relative cursor-pointer\" onClick={handleDueDateFieldClick}>\n                    <input\n                      type=\"date\"\n                      value={step1Data.dueDate}\n                      onChange={(e) => setStep1Data({ ...step1Data, dueDate: e.target.value })}\n                      min={todayJakarta}\n                      className={`white-calendar w-full pr-12 pl-4 py-3 bg-slate-900/50 border rounded-lg focus:ring-2 focus:ring-cyan-500 transition-all text-slate-100 ${\n                        errors.dueDate ? 'border-red-500' : 'border-slate-600'\n                      }`}\n                      ref={dueDateInputRef}\n                    />\n                    <svg\n                      className=\"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white\"\n                      fill=\"currentColor\"\n                      viewBox=\"0 0 20 20\"\n                    >\n                      <path d=\"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v9a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm10 7H4v6a1 1 0 001 1h10a1 1 0 001-1V9z\" />\n                    </svg>\n                  </div>\n                  {errors.dueDate && <p className=\"mt-1 text-xs text-red-400\">{errors.dueDate}</p>}\n                </div>\n\n                {/* Funding Duration */}\n                <div>\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                    Durasi Pendanaan (Hari) <span className=\"text-red-400\">*</span>\n                  </label>\n                  <input\n                    type=\"number\"\n                    min={3}\n                    max={14}\n                    value={step1Data.fundingDuration}\n                    onChange={(e) => setStep1Data({ ...step1Data, fundingDuration: e.target.value })}\n                    className={`w-full px-4 py-3 bg-slate-900/50 border rounded-lg focus:ring-2 focus:ring-cyan-500 transition-all text-slate-100 ${\n                      errors.fundingDuration ? 'border-red-500' : 'border-slate-600'\n                    }`}\n                    placeholder=\"Masukkan durasi (3-14 hari)\"\n                  />\n                  <p className=\"mt-1 text-xs text-slate-400\">Durasi pendanaan dapat dipilih antara 3-14 hari.</p>\n                  {errors.fundingDuration && (\n                    <p className=\"mt-1 text-xs text-red-400\">{errors.fundingDuration}</p>\n                  )}\n                </div>\n\n                {/* Tranche Ratio */}\n                <div>\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                    Rasio Tranche <span className=\"text-red-400\">*</span>\n                  </label>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-xs text-slate-400 mb-1\">Prioritas (%)</label>\n                      <input\n                        type=\"number\"\n                        min=\"0\"\n                        max=\"100\"\n                        value={step1Data.tranchePrioritas}\n                        onChange={(e) => {\n                          const val = parseInt(e.target.value) || 0;\n                          setStep1Data({ ...step1Data, tranchePrioritas: e.target.value, trancheKatalis: String(100 - val) });\n                        }}\n                        className=\"w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 transition-all text-slate-100\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-slate-400 mb-1\">Katalis (%)</label>\n                      <input\n                        type=\"number\"\n                        value={step1Data.trancheKatalis}\n                        readOnly\n                        className=\"w-full px-4 py-3 bg-slate-900/30 border border-slate-700 rounded-lg text-slate-400 cursor-not-allowed\"\n                      />\n                    </div>\n                  </div>\n                  <p className=\"mt-1 text-xs text-slate-400\">Total harus 100%. Misal: Prioritas 80%, Katalis 20%.</p>\n                </div>\n\n                {/* Yield Rate */}\n                <div>\n                  <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                    Rate Imbal Hasil <span className=\"text-red-400\">*</span>\n                  </label>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-xs text-slate-400 mb-1\">Prioritas (%)</label>\n                      <input\n                        type=\"number\"\n                        min=\"0\"\n                        max=\"100\"\n                        step=\"0.1\"\n                        value={step1Data.yieldPrioritas}\n                        onChange={(e) => setStep1Data({ ...step1Data, yieldPrioritas: e.target.value })}\n                        className=\"w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 transition-all text-slate-100\"\n                        placeholder=\"10\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-xs text-slate-400 mb-1\">Katalis (%)</label>\n                      <input\n                        type=\"number\"\n                        min=\"0\"\n                        max=\"100\"\n                        step=\"0.1\"\n                        value={step1Data.yieldKatalis}\n                        onChange={(e) => setStep1Data({ ...step1Data, yieldKatalis: e.target.value })}\n                        className=\"w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 transition-all text-slate-100\"\n                        placeholder=\"15\"\n                      />\n                    </div>\n                  </div>\n                  <p className=\"mt-1 text-xs text-slate-400\">Misal: Prioritas 10%, Katalis 15% per tahun.</p>\n                </div>\n\n                {/* Estimated Funds */}\n                <div className=\"bg-cyan-950/30 border border-cyan-800/30 rounded-lg p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm font-medium text-slate-300\">Estimasi Pencairan Bersih (IDR):</span>\n                    <span className=\"text-lg font-bold text-cyan-400\">\n                      Rp {calculateEstimatedFunds()}\n                    </span>\n                  </div>\n                  {(step3Data.transactionType === 'first' || step3Data.manualAnswer === 'belum') && step1Data.invoiceAmount && (\n                    <p className=\"mt-2 text-xs text-slate-400\">\n                      *Untuk kemitraan baru, maksimal pendanaan 60%\n                    </p>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {/* STEP 2 - Upload Documents */}\n            {currentStep === 2 && (\n              <div className=\"space-y-6\">\n                <div>\n                  <h2 className=\"text-xl font-semibold text-slate-100 mb-4\">Dokumen Pendukung Klaim Tagihan</h2>\n                  <div className=\"bg-cyan-950/20 border border-cyan-800/30 rounded-lg p-4 mb-6\">\n                    <p className=\"text-sm text-slate-300 leading-relaxed\">\n                      <svg className=\"w-5 h-5 inline mr-2 text-cyan-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n                      </svg>\n                      Dokumen ini digunakan untuk memverifikasi klaim tagihan dan proses pengalihan hak tagih (cessie).\n                    </p>\n                  </div>\n                </div>\n\n                <UploadCard\n                  label=\"Commercial Invoice\"\n                  file={step2Data.commercialInvoice}\n                  onChange={(file) => handleFileUpload('commercialInvoice', file)}\n                  onRemove={() => handleFileRemove('commercialInvoice')}\n                  required\n                  error={errors.commercialInvoice}\n                />\n\n                <UploadCard\n                  label=\"Bill of Lading (BL)\"\n                  file={step2Data.billOfLading}\n                  onChange={(file) => handleFileUpload('billOfLading', file)}\n                  onRemove={() => handleFileRemove('billOfLading')}\n                  required\n                  error={errors.billOfLading}\n                />\n\n                <UploadCard\n                  label=\"Purchase Order (PO)\"\n                  file={step2Data.purchaseOrder}\n                  onChange={(file) => handleFileUpload('purchaseOrder', file)}\n                  onRemove={() => handleFileRemove('purchaseOrder')}\n                  required\n                  error={errors.purchaseOrder}\n                />\n              </div>\n            )}\n\n            {/* STEP 3 - Transaction History */}\n            {currentStep === 3 && (() => {\n              const importerExists = step1Data.importerName.trim() ? checkImporterHistory(step1Data.importerName) : false;\n              \n              return (\n                <div className=\"space-y-6\">\n                  <div>\n                    <h2 className=\"text-xl font-semibold text-slate-100 mb-4\">Riwayat Transaksi</h2>\n                    <p className=\"text-sm text-slate-400 mb-6\">\n                      Verifikasi riwayat transaksi dengan importir\n                    </p>\n                  </div>\n\n                  {/* System Verified Badge */}\n                  {importerExists ? (\n                    <div className=\"bg-emerald-950/30 border border-emerald-800/30 rounded-lg p-5\">\n                      <div className=\"flex items-start space-x-3\">\n                        <svg className=\"w-6 h-6 text-emerald-400 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                        </svg>\n                        <div>\n                          <p className=\"text-emerald-200 font-semibold mb-1\">✅ Riwayat transaksi terverifikasi</p>\n                          <p className=\"text-sm text-slate-300 leading-relaxed\">\n                            Sistem mendeteksi importir <span className=\"font-semibold\">{step1Data.importerName}</span> memiliki riwayat transaksi lunas. Status otomatis ditetapkan: <span className=\"text-emerald-300 font-semibold\">Repeat Order (Verified by System)</span>.\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-5\">\n                      <div className=\"bg-slate-900/40 border border-slate-700 rounded-lg p-5\">\n                        <p className=\"text-slate-200 font-medium mb-4\">Apakah Anda pernah bertransaksi dengan Importir ini sebelumnya?</p>\n                        <div className=\"space-y-3\">\n                          <label className={`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all hover:bg-slate-900/30 ${\n                            step3Data.manualAnswer === 'belum'\n                              ? 'border-amber-500 bg-amber-950/20'\n                              : 'border-slate-600 bg-slate-900/20'\n                          }`}>\n                            <input\n                              type=\"radio\"\n                              name=\"manualAnswer\"\n                              value=\"belum\"\n                              checked={step3Data.manualAnswer === 'belum'}\n                              onChange={(e) => {\n                                setStep3Data({ ...step3Data, manualAnswer: 'belum', transactionType: 'first', previousTransferProof: null });\n                              }}\n                              className=\"w-4 h-4 text-amber-600 focus:ring-2 focus:ring-amber-500\"\n                            />\n                            <span className=\"ml-3 text-slate-200 font-medium\">Belum Pernah</span>\n                          </label>\n\n                          <label className={`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all hover:bg-slate-900/30 ${\n                            step3Data.manualAnswer === 'sudah'\n                              ? 'border-cyan-500 bg-cyan-950/20'\n                              : 'border-slate-600 bg-slate-900/20'\n                          }`}>\n                            <input\n                              type=\"radio\"\n                              name=\"manualAnswer\"\n                              value=\"sudah\"\n                              checked={step3Data.manualAnswer === 'sudah'}\n                              onChange={(e) => {\n                                setStep3Data({ ...step3Data, manualAnswer: 'sudah', transactionType: 'repeat' });\n                              }}\n                              className=\"w-4 h-4 text-cyan-600 focus:ring-2 focus:ring-cyan-500\"\n                            />\n                            <span className=\"ml-3 text-slate-200 font-medium\">Sudah Pernah</span>\n                          </label>\n                        </div>\n                      </div>\n\n                      {/* First Transaction Warning */}\n                      {step3Data.manualAnswer === 'belum' && (\n                        <div className=\"bg-amber-950/30 border border-amber-800/30 rounded-lg p-4\">\n                          <div className=\"flex items-start space-x-2\">\n                            <svg className=\"w-5 h-5 text-amber-400 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                              <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n                            </svg>\n                            <p className=\"text-sm text-slate-300 leading-relaxed\">\n                              ⚠️ Untuk kemitraan baru, maksimal pembiayaan yang dapat dicairkan adalah 60% dari nilai tagihan.\n                            </p>\n                          </div>\n                        </div>\n                      )}\n\n                      {/* Upload Previous Transfer Proof */}\n                      {step3Data.manualAnswer === 'sudah' && (\n                        <div>\n                          <UploadCard\n                            label=\"Bukti Transfer Bank Transaksi Sebelumnya\"\n                            file={step3Data.previousTransferProof}\n                            onChange={(file) => handleFileUpload('previousTransferProof', file)}\n                            onRemove={() => handleFileRemove('previousTransferProof')}\n                            required\n                            error={errors.previousTransferProof}\n                          />\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n              );\n            })()}\n\n            {/* STEP 4 - Review & Submit */}\n            {currentStep === 4 && (\n              <div className=\"space-y-6\">\n                <div>\n                  <h2 className=\"text-xl font-semibold text-slate-100 mb-4\">Halaman Summary</h2>\n                  <p className=\"text-sm text-slate-400 mb-6\">\n                    Periksa kembali informasi sebelum mengirim permohonan\n                  </p>\n                </div>\n\n                {/* Data Pendanaan Summary */}\n                <div className=\"bg-slate-900/50 rounded-lg p-5 border border-slate-700\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <h3 className=\"font-semibold text-slate-200\">Data Pendanaan</h3>\n                    <button\n                      onClick={() => setCurrentStep(1)}\n                      className=\"text-cyan-400 hover:text-cyan-300 text-sm font-medium\"\n                    >\n                      Edit\n                    </button>\n                  </div>\n                  <div className=\"space-y-3 text-sm\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-slate-400\">Nama Importir:</span>\n                      <span className=\"text-slate-200 font-medium\">{step1Data.importerName}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-slate-400\">Negara Tujuan:</span>\n                      <span className=\"text-slate-200 font-medium\">{step1Data.destinationCountry || '-'}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-slate-400\">Mata Uang Invoice:</span>\n                      <span className=\"text-slate-200 font-medium\">{step1Data.currency}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-slate-400\">Nominal Invoice:</span>\n                      <span className=\"text-slate-200 font-medium\">\n                        {step1Data.currency} {new Intl.NumberFormat('id-ID').format(parseFloat(step1Data.invoiceAmount) || 0)}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-slate-400\">Kurs Pencairan:</span>\n                      <span className=\"text-slate-200 font-medium\">\n                        Rp {new Intl.NumberFormat('id-ID').format(parseFloat(step1Data.agreedExchangeRate))}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-slate-400\">Tanggal Jatuh Tempo:</span>\n                      <span className=\"text-slate-200 font-medium\">{step1Data.dueDate}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-slate-400\">Durasi Pendanaan:</span>\n                      <span className=\"text-slate-200 font-medium\">{step1Data.fundingDuration} hari</span>\n                    </div>\n                    <div className=\"flex justify-between pt-3 border-t border-slate-700\">\n                      <span className=\"text-slate-300 font-medium\">Estimasi Dana Diterima:</span>\n                      <span className=\"text-cyan-400 font-bold\">Rp {calculateEstimatedFunds()}</span>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Documents Summary */}\n                <div className=\"bg-slate-900/50 rounded-lg p-5 border border-slate-700\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <h3 className=\"font-semibold text-slate-200\">Dokumen Pendukung</h3>\n                    <button\n                      onClick={() => setCurrentStep(2)}\n                      className=\"text-cyan-400 hover:text-cyan-300 text-sm font-medium\"\n                    >\n                      Edit\n                    </button>\n                  </div>\n                  <div className=\"space-y-3 text-sm\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-slate-400\">Commercial Invoice:</span>\n                      <span className=\"text-emerald-400 flex items-center\">\n                        <svg className=\"w-4 h-4 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                        </svg>\n                        {step2Data.commercialInvoice?.name}\n                      </span>\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-slate-400\">Bill of Lading:</span>\n                      <span className=\"text-emerald-400 flex items-center\">\n                        <svg className=\"w-4 h-4 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                        </svg>\n                        {step2Data.billOfLading?.name}\n                      </span>\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-slate-400\">Purchase Order:</span>\n                      <span className=\"text-emerald-400 flex items-center\">\n                        <svg className=\"w-4 h-4 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                        </svg>\n                        {step2Data.purchaseOrder?.name}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Transaction History Summary */}\n                <div className=\"bg-slate-900/50 rounded-lg p-5 border border-slate-700\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <h3 className=\"font-semibold text-slate-200\">Riwayat Transaksi</h3>\n                    <button\n                      onClick={() => setCurrentStep(3)}\n                      className=\"text-cyan-400 hover:text-cyan-300 text-sm font-medium\"\n                    >\n                      Edit\n                    </button>\n                  </div>\n                  <div className=\"space-y-3 text-sm\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-slate-400\">Jenis Transaksi:</span>\n                      <span className=\"text-slate-200 font-medium\">\n                        {checkImporterHistory(step1Data.importerName) \n                          ? 'Repeat Order (Verified by System)' \n                          : step3Data.manualAnswer === 'belum' \n                          ? 'Kemitraan Baru (60% Max)' \n                          : step3Data.manualAnswer === 'sudah' \n                          ? 'Repeat Order (Manual)'\n                          : 'Transaksi Pertama'}\n                      </span>\n                    </div>\n                    {(step3Data.manualAnswer === 'sudah' || step3Data.transactionType === 'repeat') && step3Data.previousTransferProof && (\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-slate-400\">Bukti Transfer:</span>\n                        <span className=\"text-emerald-400 flex items-center\">\n                          <svg className=\"w-4 h-4 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                          </svg>\n                          {step3Data.previousTransferProof.name}\n                        </span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* Acknowledgement Checkbox */}\n                <div className=\"bg-cyan-950/20 border border-cyan-800/30 rounded-lg p-5\">\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-start space-x-3\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"acknowledgement\"\n                        checked={acknowledgement}\n                        onChange={(e) => setAcknowledgement(e.target.checked)}\n                        className=\"mt-1 w-4 h-4 bg-slate-900/50 border-slate-600 rounded text-cyan-600 focus:ring-2 focus:ring-cyan-500 focus:ring-offset-0\"\n                      />\n                      <label\n                        htmlFor=\"acknowledgement\"\n                        className=\"text-sm text-slate-300 leading-relaxed cursor-pointer\"\n                      >\n                        Saya menyetujui Pengalihan Hak Tagih (Cessie) kepada Koperasi sebagai jaminan.\n                        <span className=\"text-red-400 ml-1\">*</span>\n                      </label>\n                    </div>\n\n                    <div className=\"flex items-start space-x-3\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"dataIntegrity\"\n                        checked={dataIntegrity}\n                        onChange={(e) => setDataIntegrity(e.target.checked)}\n                        className=\"mt-1 w-4 h-4 bg-slate-900/50 border-slate-600 rounded text-cyan-600 focus:ring-2 focus:ring-cyan-500 focus:ring-offset-0\"\n                      />\n                      <label\n                        htmlFor=\"dataIntegrity\"\n                        className=\"text-sm text-slate-300 leading-relaxed cursor-pointer\"\n                      >\n                        Data yang saya berikan adalah benar dan asli.\n                        <span className=\"text-red-400 ml-1\">*</span>\n                      </label>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Navigation Buttons */}\n          <div className=\"mt-8 pt-6 border-t border-slate-700 flex items-center justify-between\">\n            <button\n              onClick={handleBack}\n              disabled={currentStep === 1}\n              className=\"px-6 py-3 bg-slate-700 hover:bg-slate-600 disabled:bg-slate-800 disabled:text-slate-600 disabled:cursor-not-allowed text-slate-200 font-medium rounded-lg transition-all\"\n            >\n              Kembali\n            </button>\n\n            {currentStep < 4 ? (\n              <button\n                onClick={handleNext}\n                className=\"px-6 py-3 bg-gradient-to-r from-cyan-600 to-teal-600 hover:from-cyan-500 hover:to-teal-500 text-white font-medium rounded-lg transition-all shadow-lg shadow-cyan-900/50\"\n              >\n                Lanjut\n              </button>\n            ) : (\n              <button\n                onClick={handleSubmit}\n                disabled={!acknowledgement || !dataIntegrity}\n                className=\"px-6 py-3 bg-gradient-to-r from-cyan-600 to-teal-600 hover:from-cyan-500 hover:to-teal-500 disabled:from-slate-700 disabled:to-slate-700 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-all shadow-lg shadow-cyan-900/50\"\n              >\n                Kirim Permohonan Pendanaan\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/eksportir/pendanaan/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/eksportir/pending/page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/eksportir/pending/page.tsx:43:9\n  41 |         }\n  42 |\n> 43 |         setCheckingAuth(false);\n     |         ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  44 |     }, [isAuthenticated, isLoading, user, router]);\n  45 |\n  46 |     const handleLogout = async () => {","line":43,"column":9,"nodeType":null,"endLine":43,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Image from 'next/image';\nimport { useAuth } from '@/lib/context/AuthContext';\nimport { useLanguage } from '@/lib/i18n/LanguageContext';\n\nexport default function PendingApprovalPage() {\n    const router = useRouter();\n    const { user, logout, isAuthenticated, isLoading } = useAuth();\n    const { t } = useLanguage();\n    const [checkingAuth, setCheckingAuth] = useState(true);\n\n    useEffect(() => {\n        // Wait for auth to load\n        if (isLoading) return;\n\n        // If not authenticated, redirect to login\n        if (!isAuthenticated) {\n            router.push('/login');\n            return;\n        }\n\n        // If user is not mitra, redirect appropriately\n        if (user?.role === 'investor') {\n            router.push('/pendana/dashboard');\n            return;\n        }\n\n        if (user?.role === 'admin') {\n            router.push('/admin/dashboard');\n            return;\n        }\n\n        // Check mitra application status\n        // If approved, redirect to dashboard\n        if (user?.member_status === 'member_mitra') {\n            router.push('/eksportir/dashboard');\n            return;\n        }\n\n        setCheckingAuth(false);\n    }, [isAuthenticated, isLoading, user, router]);\n\n    const handleLogout = async () => {\n        await logout();\n        router.push('/login');\n    };\n\n    if (isLoading || checkingAuth) {\n        return (\n            <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center\">\n                <div className=\"animate-spin w-8 h-8 border-2 border-cyan-500 border-t-transparent rounded-full\"></div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center p-4\">\n            <div className=\"max-w-lg w-full bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-2xl border border-slate-700/50 p-8 text-center\">\n                {/* Logo */}\n                <div className=\"mb-6 flex justify-center\">\n                    <Image\n                        src=\"/vessel-logo.png\"\n                        alt=\"VESSEL Logo\"\n                        width={140}\n                        height={40}\n                        className=\"h-12 w-auto object-contain\"\n                        priority\n                    />\n                </div>\n\n                {/* Status Icon */}\n                <div className=\"mb-6 flex justify-center\">\n                    <div className=\"w-20 h-20 bg-amber-500/20 border-2 border-amber-500/50 rounded-full flex items-center justify-center\">\n                        <svg className=\"w-10 h-10 text-amber-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                        </svg>\n                    </div>\n                </div>\n\n                {/* Title */}\n                <h1 className=\"text-2xl font-bold text-slate-100 mb-2\">\n                    {t('mitra.pendingTitle') || 'Application Submitted'}\n                </h1>\n\n                {/* Description */}\n                <p className=\"text-slate-400 mb-6\">\n                    {t('mitra.pendingDescription') || 'Your mitra application is being reviewed by our team. We will notify you once your application has been approved.'}\n                </p>\n\n                {/* Status Badge */}\n                <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-amber-500/10 border border-amber-500/30 rounded-full text-amber-400 text-sm font-medium mb-6\">\n                    <span className=\"w-2 h-2 bg-amber-400 rounded-full animate-pulse\"></span>\n                    {t('mitra.statusPending') || 'Pending Review'}\n                </div>\n\n                {/* Info Box */}\n                <div className=\"bg-slate-900/50 border border-slate-700 rounded-lg p-4 mb-6 text-left\">\n                    <h3 className=\"text-sm font-medium text-slate-300 mb-2\">\n                        {t('mitra.whatHappensNext') || 'What happens next?'}\n                    </h3>\n                    <ul className=\"text-sm text-slate-400 space-y-2\">\n                        <li className=\"flex items-start gap-2\">\n                            <svg className=\"w-4 h-4 text-cyan-400 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                            </svg>\n                            {t('mitra.step1') || 'Our team will verify your company information'}\n                        </li>\n                        <li className=\"flex items-start gap-2\">\n                            <svg className=\"w-4 h-4 text-cyan-400 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                            </svg>\n                            {t('mitra.step2') || 'You will receive an email notification'}\n                        </li>\n                        <li className=\"flex items-start gap-2\">\n                            <svg className=\"w-4 h-4 text-cyan-400 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                            </svg>\n                            {t('mitra.step3') || 'Once approved, you can access the mitra dashboard'}\n                        </li>\n                    </ul>\n                </div>\n\n                {/* Contact Info */}\n                <p className=\"text-sm text-slate-500 mb-6\">\n                    {t('mitra.contactInfo') || 'Need help?'}{' '}\n                    <a href=\"mailto:support@vessel.io\" className=\"text-cyan-400 hover:text-cyan-300\">\n                        support@vessel.io\n                    </a>\n                </p>\n\n                {/* Logout Button */}\n                <button\n                    onClick={handleLogout}\n                    className=\"w-full px-4 py-2.5 bg-slate-700/50 hover:bg-slate-700 border border-slate-600 text-slate-300 hover:text-slate-100 font-medium rounded-lg transition-all text-sm\"\n                >\n                    {t('common.logout') || 'Logout'}\n                </button>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/eksportir/profil-bisnis/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is assigned a value but never used.","line":191,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":191,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'uploadingDocs' is assigned a value but never used.","line":205,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":205,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":380,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":380,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { ReactNode, useLayoutEffect, useMemo, useRef, useState, useEffect } from 'react';\nimport { AuthGuard } from '@/lib/components/AuthGuard';\nimport { userAPI, MitraApplicationResponse } from '@/lib/api/user';\nimport { useAuth } from '@/lib/context/AuthContext';\n\ntype TabKey = 'perusahaan' | 'penanggung' | 'keuangan' | 'dokumen' | 'tandaTangan';\n\n// Document types yang akan dikirim ke backend\ntype BackendDocumentType = 'nib' | 'akta_pendirian' | 'ktp_direktur';\n\ninterface DocumentUploadStatus {\n  nib: boolean;\n  akta_pendirian: boolean;\n  ktp_direktur: boolean;\n}\n\ninterface UploadedFile {\n  name: string;\n  size: number;\n  file: File;\n}\n\ninterface CompanyBasics {\n  name: string;\n  entityType: string;\n  profile: UploadedFile | null;\n  phone: string;\n  email: string;\n  city: string;\n}\n\ninterface CompanyLocation {\n  status: string;\n  locationDoc: UploadedFile | null;\n  address1: string;\n  address2: string;\n  postalCode: string;\n  province: string;\n  city: string;\n  district: string;\n  village: string;\n  sector: string;\n}\n\ninterface TeamMember {\n  id: string;\n  name: string;\n  title: string;\n  resume: UploadedFile | null;\n  ownership: '' | 'pemilik' | 'bukan';\n}\n\ninterface RiskItem {\n  id: string;\n  riskType: string;\n  description: string;\n  mitigation: string;\n}\n\ninterface ResponsiblePerson {\n  fullName: string;\n  gender: string;\n  religion: string;\n  birthDate: string;\n  birthPlace: string;\n  email: string;\n  phone: string;\n  position: string;\n  nationality: string;\n  education: string;\n  maritalStatus: string;\n}\n\ninterface ResponsibleAddress {\n  address: string;\n  postalCode: string;\n  province: string;\n  city: string;\n  district: string;\n  village: string;\n  sameAsKtp: boolean;\n  ktpAddress: string;\n  ktpPostalCode: string;\n  ktpProvince: string;\n  ktpCity: string;\n  ktpDistrict: string;\n  ktpVillage: string;\n}\n\ninterface ResponsibleDocuments {\n  ktpNumber: string;\n  ktpFile: UploadedFile | null;\n  npwpNumber: string;\n  npwpFile: UploadedFile | null;\n}\n\ninterface RelationsData {\n  relativeName: string;\n  relativePhone: string;\n  relationType: string;\n  commissionerName: string;\n  commissionerPhone: string;\n  commissionerKtp: string;\n  commissionerKtpFile: UploadedFile | null;\n  commissionerApproval: UploadedFile | null;\n}\n\ninterface FinancialPerformance {\n  sales: string;\n  operatingIncome: string;\n  netIncome: string;\n  currentAssets: string;\n  nonCurrentAssets: string;\n  shortDebt: string;\n  longDebt: string;\n  totalEquity: string;\n}\n\ninterface BankInfo {\n  bankName: string;\n  accountName: string;\n  accountNumber: string;\n  branch: string;\n  bankAddress: string;\n}\n\ninterface FinancialDocuments {\n  bankStatement: UploadedFile | null;\n  financialReport: UploadedFile | null;\n  currentYearReport: UploadedFile | null;\n}\n\ninterface CorporateLegal {\n  companyNpwp: string;\n  companyNpwpFile: UploadedFile | null;\n  deedNumber: string;\n  deedDate: string;\n  deedFile: UploadedFile | null;\n  ministryDate: string;\n  ministryFile: UploadedFile | null;\n  deedChanges: {\n    id: string;\n    deedNumber: string;\n    deedDate: string;\n    deedFile: UploadedFile | null;\n  }[];\n}\n\ninterface LicensingData {\n  licenseType: 'NIB' | 'SIUP & TDP';\n  nibNumber: string;\n  nibFile: UploadedFile | null;\n  nibRiskFile: UploadedFile | null;\n  commitmentLetter: UploadedFile | null;\n}\n\ninterface DigitalSignatureData {\n  selfie: UploadedFile | null;\n}\n\ninterface MembershipAgreement {\n  membership: boolean;\n  savings: boolean;\n  adArt: boolean;\n}\n\ntype SectionCardProps = {\n  title: string;\n  description?: string;\n  children: ReactNode;\n};\n\nconst SectionCard = ({ title, description, children }: SectionCardProps) => (\n  <section className=\"bg-slate-900/40 border border-slate-700 rounded-2xl p-6 space-y-4\">\n    <div>\n      <h3 className=\"text-lg font-semibold text-slate-100\">{title}</h3>\n      {description && <p className=\"text-sm text-slate-400 mt-1\">{description}</p>}\n    </div>\n    {children}\n  </section>\n);\n\nconst generateId = () =>\n  typeof crypto !== 'undefined' && 'randomUUID' in crypto\n    ? crypto.randomUUID()\n    : Math.random().toString(36).slice(2, 10);\n\nfunction ProfilBisnisContent() {\n  const { user } = useAuth();\n  const [activeTab, setActiveTab] = useState<TabKey>('perusahaan');\n  const [savedToast, setSavedToast] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitError, setSubmitError] = useState<string | null>(null);\n  \n  // Backend integration state\n  const [mitraStatus, setMitraStatus] = useState<MitraApplicationResponse | null>(null);\n  const [documentUploadStatus, setDocumentUploadStatus] = useState<DocumentUploadStatus>({\n    nib: false,\n    akta_pendirian: false,\n    ktp_direktur: false,\n  });\n  const [uploadingDocs, setUploadingDocs] = useState<Record<string, boolean>>({});\n\n  const [companyBasics, setCompanyBasics] = useState<CompanyBasics>({\n    name: '',\n    entityType: '',\n    profile: null,\n    phone: '',\n    email: '',\n    city: '',\n  });\n\n  const [companyLocation, setCompanyLocation] = useState<CompanyLocation>({\n    status: '',\n    locationDoc: null,\n    address1: '',\n    address2: '',\n    postalCode: '',\n    province: '',\n    city: '',\n    district: '',\n    village: '',\n    sector: '',\n  });\n\n  const [teamMembers, setTeamMembers] = useState<TeamMember[]>([\n    { id: generateId(), name: '', title: '', resume: null, ownership: '' },\n  ]);\n\n  const [riskList, setRiskList] = useState<RiskItem[]>([\n    { id: generateId(), riskType: '', description: '', mitigation: '' },\n  ]);\n\n  const [responsiblePerson, setResponsiblePerson] = useState<ResponsiblePerson>({\n    fullName: '',\n    gender: '',\n    religion: '',\n    birthDate: '',\n    birthPlace: '',\n    email: '',\n    phone: '',\n    position: '',\n    nationality: '',\n    education: '',\n    maritalStatus: '',\n  });\n\n  const [responsibleAddress, setResponsibleAddress] = useState<ResponsibleAddress>({\n    address: '',\n    postalCode: '',\n    province: '',\n    city: '',\n    district: '',\n    village: '',\n    sameAsKtp: false,\n    ktpAddress: '',\n    ktpPostalCode: '',\n    ktpProvince: '',\n    ktpCity: '',\n    ktpDistrict: '',\n    ktpVillage: '',\n  });\n\n  const [responsibleDocs, setResponsibleDocs] = useState<ResponsibleDocuments>({\n    ktpNumber: '',\n    ktpFile: null,\n    npwpNumber: '',\n    npwpFile: null,\n  });\n\n  const [relationsData, setRelationsData] = useState<RelationsData>({\n    relativeName: '',\n    relativePhone: '',\n    relationType: '',\n    commissionerName: '',\n    commissionerPhone: '',\n    commissionerKtp: '',\n    commissionerKtpFile: null,\n    commissionerApproval: null,\n  });\n\n  const [financialPerformance, setFinancialPerformance] = useState<FinancialPerformance>({\n    sales: '',\n    operatingIncome: '',\n    netIncome: '',\n    currentAssets: '',\n    nonCurrentAssets: '',\n    shortDebt: '',\n    longDebt: '',\n    totalEquity: '',\n  });\n\n  const [bankInfo, setBankInfo] = useState<BankInfo>({\n    bankName: '',\n    accountName: '',\n    accountNumber: '',\n    branch: '',\n    bankAddress: '',\n  });\n\n  const [financialDocs, setFinancialDocs] = useState<FinancialDocuments>({\n    bankStatement: null,\n    financialReport: null,\n    currentYearReport: null,\n  });\n\n  const [corporateLegal, setCorporateLegal] = useState<CorporateLegal>({\n    companyNpwp: '',\n    companyNpwpFile: null,\n    deedNumber: '',\n    deedDate: '',\n    deedFile: null,\n    ministryDate: '',\n    ministryFile: null,\n    deedChanges: [],\n  });\n\n  const [licensing, setLicensing] = useState<LicensingData>({\n    licenseType: 'NIB',\n    nibNumber: '',\n    nibFile: null,\n    nibRiskFile: null,\n    commitmentLetter: null,\n  });\n\n  const [digitalSignature, setDigitalSignature] = useState<DigitalSignatureData>({\n    selfie: null,\n  });\n\n  const [membershipAgreement, setMembershipAgreement] = useState<MembershipAgreement>({\n    membership: false,\n    savings: false,\n    adArt: false,\n  });\n\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  // Check mitra status on mount\n  useEffect(() => {\n    const checkMitraStatus = async () => {\n      try {\n        const res = await userAPI.getMitraStatus();\n        if (res.success && res.data) {\n          setMitraStatus(res.data);\n          setDocumentUploadStatus(res.data.documents_status);\n          \n          // If already approved or pending, mark as submitted\n          if (res.data.application?.status === 'pending' || res.data.application?.status === 'approved') {\n            setSubmitted(true);\n            // Pre-fill company name if available\n            if (res.data.application?.company_name) {\n              const companyName = res.data.application.company_name;\n              setCompanyBasics(prev => ({ ...prev, name: companyName }));\n            }\n          }\n        }\n      } catch (err) {\n        console.error('Failed to check mitra status:', err);\n      }\n    };\n    \n    checkMitraStatus();\n  }, []);\n\n  // Function to upload document to backend (only for nib, akta_pendirian, ktp_direktur)\n  const uploadDocumentToBackend = async (file: File, documentType: BackendDocumentType): Promise<boolean> => {\n    setUploadingDocs(prev => ({ ...prev, [documentType]: true }));\n    try {\n      const res = await userAPI.uploadMitraDocument(file, documentType);\n      if (res.success) {\n        setDocumentUploadStatus(prev => ({ ...prev, [documentType]: true }));\n        return true;\n      } else {\n        setSubmitError(res.error?.message || `Gagal mengupload ${documentType}`);\n        return false;\n      }\n    } catch (err) {\n      setSubmitError(`Gagal mengupload ${documentType}`);\n      return false;\n    } finally {\n      setUploadingDocs(prev => ({ ...prev, [documentType]: false }));\n    }\n  };\n\n  const fieldRefs = useRef<Record<string, HTMLInputElement | HTMLTextAreaElement | null>>({});\n  const activeFieldRef = useRef<string | null>(null);\n\n  useLayoutEffect(() => {\n    if (typeof document === 'undefined') {\n      return;\n    }\n    const activeKey = activeFieldRef.current;\n    if (!activeKey) {\n      return;\n    }\n    const node = fieldRefs.current[activeKey];\n    if (node && document.activeElement !== node) {\n      node.focus();\n      try {\n        const length = node.value.length;\n        node.setSelectionRange(length, length);\n      } catch {\n        // Ignore selection errors for inputs that do not support setSelectionRange\n      }\n    }\n  });\n\n  const tabList: { key: TabKey; label: string }[] = [\n    { key: 'perusahaan', label: 'Perusahaan' },\n    { key: 'penanggung', label: 'Penanggung Jawab' },\n    { key: 'keuangan', label: 'Keuangan' },\n    { key: 'dokumen', label: 'Dokumen Perusahaan' },\n    { key: 'tandaTangan', label: 'Tanda Tangan Digital' },\n  ];\n\n  const requiredChecks = useMemo(() => {\n    const fields: boolean[] = [];\n\n    // Company basics\n    fields.push(\n      Boolean(companyBasics.name.trim()),\n      Boolean(companyBasics.entityType),\n      Boolean(companyBasics.profile),\n      Boolean(companyBasics.phone.trim()),\n      Boolean(companyBasics.email.trim()),\n      Boolean(companyBasics.city.trim()),\n    );\n\n    // Location\n    fields.push(\n      Boolean(companyLocation.status),\n      companyLocation.status === 'Sewa' || companyLocation.status === 'Pinjam'\n        ? Boolean(companyLocation.locationDoc)\n        : true,\n      Boolean(companyLocation.address1.trim()),\n      Boolean(companyLocation.postalCode.trim()),\n      Boolean(companyLocation.province),\n      Boolean(companyLocation.city),\n      Boolean(companyLocation.district),\n      Boolean(companyLocation.village),\n      Boolean(companyLocation.sector),\n    );\n\n    // Team members\n    teamMembers.forEach((member) => {\n      fields.push(\n        Boolean(member.name.trim()),\n        Boolean(member.title.trim()),\n        Boolean(member.resume),\n        Boolean(member.ownership),\n      );\n    });\n\n    // Risks\n    riskList.forEach((risk) => {\n      fields.push(\n        Boolean(risk.riskType),\n        Boolean(risk.description.trim()),\n        Boolean(risk.mitigation.trim()),\n      );\n    });\n\n    // Responsible person\n    Object.values(responsiblePerson).forEach((value) => fields.push(Boolean((value as string).trim())));\n\n    // Address\n    fields.push(\n      Boolean(responsibleAddress.address.trim()),\n      Boolean(responsibleAddress.postalCode.trim()),\n      Boolean(responsibleAddress.province),\n      Boolean(responsibleAddress.city),\n      Boolean(responsibleAddress.district),\n      Boolean(responsibleAddress.village),\n    );\n\n    if (!responsibleAddress.sameAsKtp) {\n      fields.push(\n        Boolean(responsibleAddress.ktpAddress.trim()),\n        Boolean(responsibleAddress.ktpPostalCode.trim()),\n        Boolean(responsibleAddress.ktpProvince),\n        Boolean(responsibleAddress.ktpCity),\n        Boolean(responsibleAddress.ktpDistrict),\n        Boolean(responsibleAddress.ktpVillage),\n      );\n    }\n\n    // Docs\n    fields.push(\n      Boolean(responsibleDocs.ktpNumber.trim()),\n      Boolean(responsibleDocs.ktpFile),\n      Boolean(responsibleDocs.npwpNumber.trim()),\n      Boolean(responsibleDocs.npwpFile),\n      Boolean(responsiblePerson.maritalStatus),\n    );\n\n    // Relations\n    fields.push(\n      Boolean(relationsData.relativeName.trim()),\n      Boolean(relationsData.relativePhone.trim()),\n      Boolean(relationsData.relationType),\n    );\n\n    const commissionerProvided = Boolean(\n      relationsData.commissionerName.trim() ||\n        relationsData.commissionerPhone.trim() ||\n        relationsData.commissionerKtp.trim() ||\n        relationsData.commissionerKtpFile ||\n        relationsData.commissionerApproval,\n    );\n\n    if (commissionerProvided) {\n      fields.push(\n        Boolean(relationsData.commissionerName.trim()),\n        Boolean(relationsData.commissionerPhone.trim()),\n        Boolean(relationsData.commissionerKtp.trim()),\n        Boolean(relationsData.commissionerKtpFile),\n        Boolean(relationsData.commissionerApproval),\n      );\n    }\n\n    // Financial\n    Object.values(financialPerformance).forEach((val) => fields.push(Boolean((val as string).trim())));\n    Object.values(bankInfo).forEach((val) => fields.push(Boolean((val as string).trim())));\n    fields.push(\n      Boolean(financialDocs.bankStatement),\n      Boolean(financialDocs.financialReport),\n      Boolean(financialDocs.currentYearReport),\n    );\n\n    // Legal docs\n    fields.push(\n      Boolean(corporateLegal.companyNpwp.trim()),\n      Boolean(corporateLegal.companyNpwpFile),\n      Boolean(corporateLegal.deedNumber.trim()),\n      Boolean(corporateLegal.deedDate),\n      Boolean(corporateLegal.deedFile),\n      Boolean(corporateLegal.ministryDate),\n      Boolean(corporateLegal.ministryFile),\n    );\n\n    corporateLegal.deedChanges.forEach((change) => {\n      fields.push(Boolean(change.deedNumber.trim()), Boolean(change.deedDate), Boolean(change.deedFile));\n    });\n\n    fields.push(\n      Boolean(licensing.nibNumber.trim()),\n      Boolean(licensing.nibFile),\n      Boolean(licensing.nibRiskFile),\n      Boolean(licensing.commitmentLetter),\n    );\n\n    fields.push(Boolean(digitalSignature.selfie));\n    fields.push(\n      membershipAgreement.membership,\n      membershipAgreement.savings,\n      membershipAgreement.adArt,\n    );\n\n    return fields;\n  }, [\n    bankInfo,\n    companyBasics,\n    companyLocation,\n    corporateLegal,\n    digitalSignature,\n    financialDocs,\n    financialPerformance,\n    licensing,\n    relationsData,\n    responsibleAddress,\n    responsibleDocs,\n    responsiblePerson,\n    riskList,\n    teamMembers,\n    membershipAgreement,\n  ]);\n\n  const progress = useMemo(() => {\n    const filled = requiredChecks.filter(Boolean).length;\n    const percent = requiredChecks.length === 0 ? 0 : Math.round((filled / requiredChecks.length) * 100);\n    return Math.min(percent, 100);\n  }, [requiredChecks]);\n\n  const handleFileUpload = (file: File, callback: (uploaded: UploadedFile) => void) => {\n    if (file.size > 10 * 1024 * 1024) {\n      alert('Ukuran file maksimal 10MB');\n      return;\n    }\n    callback({ name: file.name, size: file.size, file });\n  };\n\n  const handleTeamMemberChange = (id: string, field: keyof TeamMember, value: string | UploadedFile | null) => {\n    setTeamMembers((prev) =>\n      prev.map((member) => (member.id === id ? { ...member, [field]: value } : member)),\n    );\n  };\n\n  const handleRiskChange = (id: string, field: keyof RiskItem, value: string) => {\n    setRiskList((prev) => prev.map((risk) => (risk.id === id ? { ...risk, [field]: value } : risk)));\n  };\n\n  const addTeamMember = () => {\n    setTeamMembers((prev) => [\n      ...prev,\n      { id: generateId(), name: '', title: '', resume: null, ownership: '' },\n    ]);\n  };\n\n  const removeTeamMember = (id: string) => {\n    setTeamMembers((prev) => (prev.length === 1 ? prev : prev.filter((member) => member.id !== id)));\n  };\n\n  const addRisk = () => {\n    setRiskList((prev) => [\n      ...prev,\n      { id: generateId(), riskType: '', description: '', mitigation: '' },\n    ]);\n  };\n\n  const removeRisk = (id: string) => {\n    setRiskList((prev) => (prev.length === 1 ? prev : prev.filter((risk) => risk.id !== id)));\n  };\n\n  const addDeedChange = () => {\n    setCorporateLegal((prev) => ({\n      ...prev,\n      deedChanges: [\n        ...prev.deedChanges,\n        { id: generateId(), deedNumber: '', deedDate: '', deedFile: null },\n      ],\n    }));\n  };\n\n  const handleDeedChange = (\n    id: string,\n    field: 'deedNumber' | 'deedDate' | 'deedFile',\n    value: string | UploadedFile | null,\n  ) => {\n    setCorporateLegal((prev) => ({\n      ...prev,\n      deedChanges: prev.deedChanges.map((change) =>\n        change.id === id ? { ...change, [field]: value } : change,\n      ),\n    }));\n  };\n\n  const removeDeedChange = (id: string) => {\n    setCorporateLegal((prev) => ({\n      ...prev,\n      deedChanges: prev.deedChanges.filter((change) => change.id !== id),\n    }));\n  };\n\n  const formatNumberInput = (value: string) => {\n    const digits = value.replace(/\\D/g, '');\n    return digits.replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.');\n  };\n\n  const handleSaveDraft = () => {\n    console.log('Draft saved', {\n      companyBasics,\n      companyLocation,\n      teamMembers,\n      riskList,\n      responsiblePerson,\n      responsibleAddress,\n      responsibleDocs,\n      relationsData,\n      financialPerformance,\n      bankInfo,\n      financialDocs,\n      corporateLegal,\n      licensing,\n      digitalSignature,\n      membershipAgreement,\n    });\n    setSavedToast(true);\n    setTimeout(() => setSavedToast(false), 4000);\n  };\n\n  const handleSubmit = async () => {\n    const newErrors: Record<string, string> = {};\n    \n    // Validasi data perusahaan yang diperlukan backend\n    if (!companyBasics.name.trim()) {\n      newErrors.companyName = 'Nama perusahaan wajib diisi.';\n    }\n    if (!companyBasics.entityType) {\n      newErrors.entityType = 'Bentuk badan usaha wajib dipilih.';\n    }\n    if (!corporateLegal.companyNpwp.trim()) {\n      newErrors.npwp = 'NPWP perusahaan wajib diisi.';\n    }\n    if (!digitalSignature.selfie) {\n      newErrors.selfie = 'Mohon ambil foto selfie penanggung jawab terlebih dahulu.';\n    }\n    if (!membershipAgreement.membership || !membershipAgreement.savings || !membershipAgreement.adArt) {\n      newErrors.membership = 'Mohon setujui seluruh akad keanggotaan sebelum melanjutkan.';\n    }\n    \n    if (Object.keys(newErrors).length > 0) {\n      setErrors(newErrors);\n      if (newErrors.companyName || newErrors.entityType) {\n        setActiveTab('perusahaan');\n      } else if (newErrors.npwp) {\n        setActiveTab('dokumen');\n      } else {\n        setActiveTab('tandaTangan');\n      }\n      return;\n    }\n    \n    setErrors({});\n    setIsSubmitting(true);\n    setSubmitError(null);\n    \n    try {\n      // Step 1: Submit Mitra Application (company data)\n      // Map entityType to company_type format expected by backend\n      const companyTypeMap: Record<string, 'PT' | 'CV' | 'UD'> = {\n        'PT': 'PT',\n        'CV': 'CV',\n        'Firma': 'CV',\n        'Koperasi': 'CV',\n        'Lainnya': 'UD',\n        'UD': 'UD',\n      };\n      \n      // Map financialPerformance.sales to annual_revenue format\n      const getAnnualRevenue = (sales: string): '<1M' | '1M-5M' | '5M-25M' | '25M-100M' | '>100M' => {\n        const numericValue = parseInt(sales.replace(/\\./g, ''), 10);\n        if (isNaN(numericValue)) return '<1M';\n        if (numericValue < 1000000000) return '<1M'; // < 1 Miliar\n        if (numericValue < 5000000000) return '1M-5M'; // 1-5 Miliar\n        if (numericValue < 25000000000) return '5M-25M'; // 5-25 Miliar\n        if (numericValue < 100000000000) return '25M-100M'; // 25-100 Miliar\n        return '>100M'; // > 100 Miliar\n      };\n      \n      const mitraApplicationData = {\n        company_name: companyBasics.name.trim(),\n        company_type: companyTypeMap[companyBasics.entityType] || 'PT',\n        npwp: corporateLegal.companyNpwp.replace(/\\D/g, ''), // Remove non-digits\n        annual_revenue: getAnnualRevenue(financialPerformance.sales),\n        address: companyLocation.address1 || '',\n        business_description: riskList[0]?.description || 'Eksportir',\n        website_url: '',\n        year_founded: new Date().getFullYear(),\n        key_products: companyLocation.sector || 'Export Products',\n        export_markets: 'International',\n      };\n      \n      const applyRes = await userAPI.applyMitra(mitraApplicationData);\n      \n      if (!applyRes.success) {\n        setSubmitError(applyRes.error?.message || 'Gagal mengirim aplikasi mitra.');\n        setIsSubmitting(false);\n        return;\n      }\n      \n      // Step 2: Upload required documents (only the three that backend supports)\n      const documentsToUpload: { file: File | null; type: BackendDocumentType; name: string }[] = [\n        { file: licensing.nibFile?.file || null, type: 'nib', name: 'NIB' },\n        { file: corporateLegal.deedFile?.file || null, type: 'akta_pendirian', name: 'Akta Pendirian' },\n        { file: responsibleDocs.ktpFile?.file || null, type: 'ktp_direktur', name: 'KTP Direktur' },\n      ];\n      \n      for (const doc of documentsToUpload) {\n        if (doc.file && !documentUploadStatus[doc.type]) {\n          const uploadSuccess = await uploadDocumentToBackend(doc.file, doc.type);\n          if (!uploadSuccess) {\n            setSubmitError(`Gagal mengupload ${doc.name}. Silakan coba lagi.`);\n            setIsSubmitting(false);\n            return;\n          }\n        }\n      }\n      \n      setSubmitted(true);\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n      \n    } catch (err) {\n      console.error('Submit error:', err);\n      setSubmitError('Terjadi kesalahan saat mengirim data. Silakan coba lagi.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleMembershipAgreementChange = (key: keyof MembershipAgreement, checked: boolean) => {\n    setMembershipAgreement((prev) => {\n      const updated = { ...prev, [key]: checked };\n      if (updated.membership && updated.savings && updated.adArt) {\n        setErrors((prevErrors) => {\n          if (!prevErrors.membership) {\n            return prevErrors;\n          }\n          const nextErrors = { ...prevErrors };\n          delete nextErrors.membership;\n          return nextErrors;\n        });\n      }\n      return updated;\n    });\n  };\n\n  const renderSidebar = () => (\n    <nav className=\"space-y-2\">\n      {tabList.map((tab) => (\n        <button\n          key={tab.key}\n          onClick={() => setActiveTab(tab.key)}\n          className={`w-full text-left px-4 py-3 rounded-xl transition-all border ${\n            activeTab === tab.key\n              ? 'bg-cyan-600/20 border-cyan-500 text-cyan-200'\n              : 'bg-slate-900/30 border-slate-700 text-slate-300 hover:border-slate-600'\n          }`}\n        >\n          <div className=\"text-sm font-semibold\">{tab.label}</div>\n          <p className=\"text-xs text-slate-400\">Lengkapi data {tab.label.toLowerCase()}</p>\n        </button>\n      ))}\n    </nav>\n  );\n\n  const renderInput = (\n    fieldKey: string,\n    label: string,\n    value: string,\n    onChange: (value: string) => void,\n    options: { placeholder?: string; required?: boolean; type?: string; helper?: string } = {},\n  ) => (\n    <div>\n      <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n        {label} {options.required && <span className=\"text-red-400\">*</span>}\n      </label>\n      <input\n        ref={(node) => {\n          fieldRefs.current[fieldKey] = node;\n        }}\n        type={options.type ?? 'text'}\n        value={value}\n        onChange={(e) => onChange(e.target.value)}\n        onFocus={() => {\n          activeFieldRef.current = fieldKey;\n        }}\n        onBlur={() => {\n          if (activeFieldRef.current === fieldKey) {\n            activeFieldRef.current = null;\n          }\n        }}\n        className=\"w-full px-4 py-3 bg-slate-950/40 border border-slate-700 rounded-xl text-slate-100 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 placeholder:text-slate-500\"\n        placeholder={options.placeholder}\n      />\n      {options.helper && <p className=\"text-xs text-slate-500 mt-1\">{options.helper}</p>}\n    </div>\n  );\n\n  const renderSelect = (\n    label: string,\n    value: string,\n    onChange: (value: string) => void,\n    choices: string[],\n    required = false,\n  ) => (\n    <div>\n      <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n        {label} {required && <span className=\"text-red-400\">*</span>}\n      </label>\n      <select\n        value={value}\n        onChange={(e) => onChange(e.target.value)}\n        className=\"w-full px-4 py-3 bg-slate-950/40 border border-slate-700 rounded-xl text-slate-100 focus:ring-2 focus:ring-cyan-500\"\n      >\n        <option value=\"\">Pilih {label}</option>\n        {choices.map((choice) => (\n          <option key={choice} value={choice}>\n            {choice}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n\n  const renderTextarea = (\n    fieldKey: string,\n    label: string,\n    value: string,\n    onChange: (value: string) => void,\n    required = false,\n    rows = 3,\n  ) => (\n    <div>\n      <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n        {label} {required && <span className=\"text-red-400\">*</span>}\n      </label>\n      <textarea\n        rows={rows}\n        value={value}\n        onChange={(e) => onChange(e.target.value)}\n        ref={(node) => {\n          fieldRefs.current[fieldKey] = node;\n        }}\n        onFocus={() => {\n          activeFieldRef.current = fieldKey;\n        }}\n        onBlur={() => {\n          if (activeFieldRef.current === fieldKey) {\n            activeFieldRef.current = null;\n          }\n        }}\n        className=\"w-full px-4 py-3 bg-slate-950/40 border border-slate-700 rounded-xl text-slate-100 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 placeholder:text-slate-500\"\n      />\n    </div>\n  );\n\n  const uploadField = (\n    label: string,\n    file: UploadedFile | null,\n    onFileChange: (uploaded: UploadedFile | null) => void,\n    required = false,\n    accept = '.pdf,.jpg,.jpeg,.png',\n  ) => (\n    <div>\n      <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n        {label} {required && <span className=\"text-red-400\">*</span>}\n      </label>\n      {!file ? (\n        <label className=\"relative flex flex-col items-center justify-center w-full border-2 border-dashed border-slate-600 rounded-xl py-6 cursor-pointer text-center text-slate-400 hover:border-cyan-500 transition-all\">\n          <svg className=\"w-10 h-10 mb-3 text-slate-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n          </svg>\n          <div className=\"text-sm\">\n            Seret & lepas atau <span className=\"text-cyan-400\">pilih file</span>\n          </div>\n          <p className=\"text-xs mt-1\">PDF/JPG/PNG · Maks 10MB</p>\n          <input\n            type=\"file\"\n            accept={accept}\n            className=\"absolute inset-0 opacity-0 cursor-pointer\"\n            onChange={(e) => {\n              const selected = e.target.files?.[0];\n              if (selected) {\n                handleFileUpload(selected, (uploaded) => onFileChange(uploaded));\n              }\n            }}\n          />\n        </label>\n      ) : (\n        <div className=\"flex items-center justify-between border border-slate-700 rounded-xl px-4 py-3 bg-slate-900/50\">\n          <div>\n            <p className=\"text-sm text-slate-100\">{file.name}</p>\n            <p className=\"text-xs text-slate-500\">{(file.size / (1024 * 1024)).toFixed(2)} MB</p>\n          </div>\n          <button\n            type=\"button\"\n            onClick={() => onFileChange(null)}\n            className=\"text-red-400 text-sm hover:text-red-300\"\n          >\n            Hapus\n          </button>\n        </div>\n      )}\n    </div>\n  );\n\n  const companyTab = (\n    <div className=\"space-y-8\">\n      <SectionCard title=\"Informasi Dasar\" description=\"Data utama perusahaan untuk verifikasi awal.\">\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {renderInput('companyBasics.name', 'Nama Perusahaan', companyBasics.name, (value) => setCompanyBasics((prev) => ({ ...prev, name: value })), {\n            required: true,\n            placeholder: 'PT Mitra Ekspor Nusantara',\n          })}\n          {renderSelect('Bentuk Badan Usaha', companyBasics.entityType, (value) => setCompanyBasics((prev) => ({ ...prev, entityType: value })), ['PT', 'CV', 'Firma', 'Koperasi', 'Lainnya'], true)}\n        </div>\n        {uploadField('Profil Perusahaan (PDF)', companyBasics.profile, (file) => setCompanyBasics((prev) => ({ ...prev, profile: file })), true, '.pdf')}\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {renderInput('companyBasics.phone', 'Nomor Telepon', companyBasics.phone, (value) => setCompanyBasics((prev) => ({ ...prev, phone: value })), {\n            required: true,\n            placeholder: '021-1234567',\n          })}\n          {renderInput('companyBasics.email', 'Email Perusahaan', companyBasics.email, (value) => setCompanyBasics((prev) => ({ ...prev, email: value })), {\n            required: true,\n            placeholder: 'cs@perusahaan.com',\n            type: 'email',\n          })}\n        </div>\n        {renderInput('companyBasics.city', 'Kota/Kabupaten Berdiri', companyBasics.city, (value) => setCompanyBasics((prev) => ({ ...prev, city: value })), {\n          required: true,\n          placeholder: 'Jakarta Selatan',\n        })}\n      </SectionCard>\n\n      <SectionCard title=\"Lokasi & Alamat\" description=\"Detail lokasi operasional untuk verifikasi kunjungan.\">\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {renderSelect('Status Lokasi Usaha', companyLocation.status, (value) => setCompanyLocation((prev) => ({ ...prev, status: value })), ['Milik Sendiri', 'Sewa', 'Pinjam Pakai', 'Lainnya'], true)}\n          {uploadField('Dokumen Lokasi Usaha', companyLocation.locationDoc, (file) => setCompanyLocation((prev) => ({ ...prev, locationDoc: file })), companyLocation.status === 'Sewa' || companyLocation.status === 'Pinjam Pakai')}\n        </div>\n        {renderInput('companyLocation.address1', 'Alamat Perusahaan (Jalan/No)', companyLocation.address1, (value) => setCompanyLocation((prev) => ({ ...prev, address1: value })), {\n          required: true,\n          placeholder: 'Jl. Gatot Subroto No. 12',\n        })}\n        {renderInput('companyLocation.address2', 'Alamat Perusahaan 2 (Opsional)', companyLocation.address2, (value) => setCompanyLocation((prev) => ({ ...prev, address2: value })), {\n          placeholder: 'Gedung / Lantai',\n        })}\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {renderInput('companyLocation.postalCode', 'Kode Pos', companyLocation.postalCode, (value) => setCompanyLocation((prev) => ({ ...prev, postalCode: value })), { required: true })}\n          {renderSelect('Provinsi', companyLocation.province, (value) => setCompanyLocation((prev) => ({ ...prev, province: value })), ['DKI Jakarta', 'Jawa Barat', 'Jawa Timur', 'Jawa Tengah', 'Banten', 'Sumatera Utara', 'Lainnya'], true)}\n        </div>\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {renderSelect('Kabupaten/Kota', companyLocation.city, (value) => setCompanyLocation((prev) => ({ ...prev, city: value })), ['Jakarta Selatan', 'Jakarta Timur', 'Bandung', 'Surabaya', 'Medan', 'Makassar'], true)}\n          {renderSelect('Kecamatan', companyLocation.district, (value) => setCompanyLocation((prev) => ({ ...prev, district: value })), ['Setiabudi', 'Menteng', 'Cidadap', 'Cilandak', 'Sukmajaya', 'Lainnya'], true)}\n        </div>\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {renderSelect('Kelurahan', companyLocation.village, (value) => setCompanyLocation((prev) => ({ ...prev, village: value })), ['Kuningan', 'Senayan', 'Lebak Bulus', 'Rawamangun', 'Cipinang', 'Lainnya'], true)}\n          {renderSelect('Sektor Usaha', companyLocation.sector, (value) => setCompanyLocation((prev) => ({ ...prev, sector: value })), ['Perdagangan', 'Manufaktur', 'Pertanian/Perkebunan', 'Perikanan', 'Jasa', 'Lainnya'], true)}\n        </div>\n      </SectionCard>\n\n      <SectionCard title=\"Informasi Tim\" description=\"Daftarkan anggota tim kunci.\">\n        <div className=\"space-y-6\">\n          {teamMembers.map((member, index) => (\n            <div key={member.id} className=\"border border-slate-700 rounded-2xl p-4 space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <p className=\"text-sm text-slate-400\">Anggota #{index + 1}</p>\n                <button\n                  type=\"button\"\n                  onClick={() => removeTeamMember(member.id)}\n                  className=\"text-xs text-red-400 hover:text-red-300\"\n                  disabled={teamMembers.length === 1}\n                >\n                  Hapus\n                </button>\n              </div>\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                {renderInput(`teamMembers.${member.id}.name`, 'Nama Lengkap', member.name, (value) => handleTeamMemberChange(member.id, 'name', value), { required: true })}\n                {renderInput(`teamMembers.${member.id}.title`, 'Jabatan', member.title, (value) => handleTeamMemberChange(member.id, 'title', value), { required: true })}\n              </div>\n              {uploadField('Daftar Riwayat Hidup', member.resume, (file) => handleTeamMemberChange(member.id, 'resume', file), true)}\n              {renderSelect('Kepemilikan Saham', member.ownership, (value) => handleTeamMemberChange(member.id, 'ownership', value), ['pemilik', 'bukan'], true)}\n            </div>\n          ))}\n          <button\n            type=\"button\"\n            onClick={addTeamMember}\n            className=\"px-4 py-2 rounded-xl border border-dashed border-cyan-500 text-cyan-300 text-sm hover:bg-cyan-500/10\"\n          >\n            Tambah Anggota Tim\n          </button>\n        </div>\n      </SectionCard>\n\n      <SectionCard title=\"Risiko\" description=\"Identifikasi risiko dan mitigasinya.\">\n        <div className=\"space-y-6\">\n          {riskList.map((risk, index) => (\n            <div key={risk.id} className=\"border border-slate-700 rounded-2xl p-4 space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <p className=\"text-sm text-slate-400\">Risiko #{index + 1}</p>\n                <button\n                  type=\"button\"\n                  onClick={() => removeRisk(risk.id)}\n                  className=\"text-xs text-red-400\"\n                  disabled={riskList.length === 1}\n                >\n                  Hapus\n                </button>\n              </div>\n              {renderSelect('Jenis Risiko', risk.riskType, (value) => handleRiskChange(risk.id, 'riskType', value), ['Operasional', 'Keuangan', 'Legal', 'Supply Chain', 'Lainnya'], true)}\n              {renderTextarea(`riskList.${risk.id}.description`, 'Deskripsi Risiko', risk.description, (value) => handleRiskChange(risk.id, 'description', value), true, 3)}\n              {renderTextarea(`riskList.${risk.id}.mitigation`, 'Mitigasi Risiko', risk.mitigation, (value) => handleRiskChange(risk.id, 'mitigation', value), true, 3)}\n            </div>\n          ))}\n          <button\n            type=\"button\"\n            onClick={addRisk}\n            className=\"px-4 py-2 rounded-xl border border-dashed border-cyan-500 text-cyan-300 text-sm hover:bg-cyan-500/10\"\n          >\n            Tambah Risiko\n          </button>\n        </div>\n      </SectionCard>\n    </div>\n  );\n\n  const penanggungTab = (\n    <div className=\"space-y-8\">\n      <SectionCard title=\"Data Pribadi\" description=\"Informasi penanggung jawab utama.\">\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {renderInput('responsiblePerson.fullName', 'Nama Lengkap', responsiblePerson.fullName, (value) => setResponsiblePerson((prev) => ({ ...prev, fullName: value })), { required: true })}\n          {renderSelect('Jenis Kelamin', responsiblePerson.gender, (value) => setResponsiblePerson((prev) => ({ ...prev, gender: value })), ['Laki-laki', 'Perempuan'], true)}\n          {renderSelect('Agama', responsiblePerson.religion, (value) => setResponsiblePerson((prev) => ({ ...prev, religion: value })), ['Islam', 'Kristen', 'Katolik', 'Hindu', 'Buddha', 'Konghucu', 'Lainnya'], true)}\n          {renderInput('responsiblePerson.birthDate', 'Tanggal Lahir', responsiblePerson.birthDate, (value) => setResponsiblePerson((prev) => ({ ...prev, birthDate: value })), { required: true, type: 'date' })}\n          {renderInput('responsiblePerson.birthPlace', 'Tempat Lahir', responsiblePerson.birthPlace, (value) => setResponsiblePerson((prev) => ({ ...prev, birthPlace: value })), { required: true })}\n          {renderInput('responsiblePerson.email', 'Email', responsiblePerson.email, (value) => setResponsiblePerson((prev) => ({ ...prev, email: value })), { required: true, type: 'email' })}\n          {renderInput('responsiblePerson.phone', 'No. Handphone', responsiblePerson.phone, (value) => setResponsiblePerson((prev) => ({ ...prev, phone: value })), { required: true })}\n          {renderInput('responsiblePerson.position', 'Jabatan', responsiblePerson.position, (value) => setResponsiblePerson((prev) => ({ ...prev, position: value })), { required: true })}\n          {renderInput('responsiblePerson.nationality', 'Kewarganegaraan', responsiblePerson.nationality, (value) => setResponsiblePerson((prev) => ({ ...prev, nationality: value })), { required: true })}\n          {renderSelect('Pendidikan Terakhir', responsiblePerson.education, (value) => setResponsiblePerson((prev) => ({ ...prev, education: value })), ['SMA/SMK', 'Diploma', 'S1', 'S2', 'S3'], true)}\n          {renderSelect('Status Pernikahan', responsiblePerson.maritalStatus, (value) => setResponsiblePerson((prev) => ({ ...prev, maritalStatus: value })), ['Belum Menikah', 'Menikah', 'Cerai'], true)}\n        </div>\n      </SectionCard>\n\n      <SectionCard title=\"Alamat\" description=\"Alamat domisili dan sesuai KTP.\">\n        {renderTextarea('responsibleAddress.address', 'Alamat Tempat Tinggal', responsibleAddress.address, (value) => setResponsibleAddress((prev) => ({ ...prev, address: value })), true, 3)}\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {renderInput('responsibleAddress.postalCode', 'Kode Pos', responsibleAddress.postalCode, (value) => setResponsibleAddress((prev) => ({ ...prev, postalCode: value })), { required: true })}\n          {renderSelect('Provinsi', responsibleAddress.province, (value) => setResponsibleAddress((prev) => ({ ...prev, province: value })), ['DKI Jakarta', 'Jawa Barat', 'Jawa Timur', 'Jawa Tengah', 'Lainnya'], true)}\n        </div>\n        <div className=\"grid gap-6 md:grid-cols-3\">\n          {renderSelect('Kabupaten/Kota', responsibleAddress.city, (value) => setResponsibleAddress((prev) => ({ ...prev, city: value })), ['Jakarta Selatan', 'Jakarta Timur', 'Bandung', 'Surabaya', 'Lainnya'], true)}\n          {renderSelect('Kecamatan', responsibleAddress.district, (value) => setResponsibleAddress((prev) => ({ ...prev, district: value })), ['Setiabudi', 'Menteng', 'Tebet', 'Cilandak', 'Lainnya'], true)}\n          {renderSelect('Kelurahan', responsibleAddress.village, (value) => setResponsibleAddress((prev) => ({ ...prev, village: value })), ['Kuningan', 'Senayan', 'Rawamangun', 'Cipinang', 'Lainnya'], true)}\n        </div>\n        <label className=\"inline-flex items-center space-x-3 text-sm text-slate-300\">\n          <input\n            type=\"checkbox\"\n            checked={responsibleAddress.sameAsKtp}\n            onChange={(e) => setResponsibleAddress((prev) => ({ ...prev, sameAsKtp: e.target.checked }))}\n            className=\"w-4 h-4 rounded border-slate-600 bg-slate-900 text-cyan-500\"\n          />\n          <span>Alamat sama dengan KTP</span>\n        </label>\n        {!responsibleAddress.sameAsKtp && (\n          <div className=\"space-y-4\">\n            {renderTextarea('responsibleAddress.ktpAddress', 'Alamat sesuai KTP', responsibleAddress.ktpAddress, (value) => setResponsibleAddress((prev) => ({ ...prev, ktpAddress: value })), true, 3)}\n            <div className=\"grid gap-6 md:grid-cols-2\">\n              {renderInput('responsibleAddress.ktpPostalCode', 'Kode Pos sesuai KTP', responsibleAddress.ktpPostalCode, (value) => setResponsibleAddress((prev) => ({ ...prev, ktpPostalCode: value })), { required: true })}\n              {renderSelect('Provinsi KTP', responsibleAddress.ktpProvince, (value) => setResponsibleAddress((prev) => ({ ...prev, ktpProvince: value })), ['DKI Jakarta', 'Jawa Barat', 'Jawa Tengah', 'Lainnya'], true)}\n            </div>\n            <div className=\"grid gap-6 md:grid-cols-3\">\n              {renderSelect('Kabupaten/Kota KTP', responsibleAddress.ktpCity, (value) => setResponsibleAddress((prev) => ({ ...prev, ktpCity: value })), ['Jakarta Selatan', 'Bogor', 'Depok', 'Bekasi', 'Lainnya'], true)}\n              {renderSelect('Kecamatan KTP', responsibleAddress.ktpDistrict, (value) => setResponsibleAddress((prev) => ({ ...prev, ktpDistrict: value })), ['Setiabudi', 'Menteng', 'Sukmajaya', 'Cimanggis', 'Lainnya'], true)}\n              {renderSelect('Kelurahan KTP', responsibleAddress.ktpVillage, (value) => setResponsibleAddress((prev) => ({ ...prev, ktpVillage: value })), ['Kuningan', 'Cinere', 'Sawangan', 'Lainnya'], true)}\n            </div>\n          </div>\n        )}\n      </SectionCard>\n\n      <SectionCard title=\"Dokumen Identitas\">\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {renderInput('responsibleDocs.ktpNumber', 'No. KTP Direktur', responsibleDocs.ktpNumber, (value) => setResponsibleDocs((prev) => ({ ...prev, ktpNumber: value })), { required: true })}\n          {renderInput('responsibleDocs.npwpNumber', 'No. NPWP', responsibleDocs.npwpNumber, (value) => setResponsibleDocs((prev) => ({ ...prev, npwpNumber: value })), { required: true })}\n        </div>\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {uploadField('Upload File KTP Direktur', responsibleDocs.ktpFile, (file) => setResponsibleDocs((prev) => ({ ...prev, ktpFile: file })), true)}\n          {uploadField('Upload File NPWP', responsibleDocs.npwpFile, (file) => setResponsibleDocs((prev) => ({ ...prev, npwpFile: file })), true)}\n        </div>\n      </SectionCard>\n\n      <SectionCard title=\"Relasi & Komisaris\">\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {renderInput('relationsData.relativeName', 'Nama Relasi/Kerabat', relationsData.relativeName, (value) => setRelationsData((prev) => ({ ...prev, relativeName: value })), { required: true })}\n          {renderInput('relationsData.relativePhone', 'No. Telepon Relasi', relationsData.relativePhone, (value) => setRelationsData((prev) => ({ ...prev, relativePhone: value })), { required: true })}\n          {renderSelect('Hubungan', relationsData.relationType, (value) => setRelationsData((prev) => ({ ...prev, relationType: value })), ['Pasangan', 'Orang Tua', 'Saudara', 'Rekan Kerja', 'Lainnya'], true)}\n        </div>\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {renderInput('relationsData.commissionerName', 'Nama Komisaris', relationsData.commissionerName, (value) => setRelationsData((prev) => ({ ...prev, commissionerName: value })), { placeholder: 'Opsional' })}\n          {renderInput('relationsData.commissionerPhone', 'No. Telepon Komisaris', relationsData.commissionerPhone, (value) => setRelationsData((prev) => ({ ...prev, commissionerPhone: value })), { placeholder: 'Opsional' })}\n          {renderInput('relationsData.commissionerKtp', 'No. KTP Komisaris', relationsData.commissionerKtp, (value) => setRelationsData((prev) => ({ ...prev, commissionerKtp: value })), { placeholder: 'Opsional' })}\n        </div>\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {uploadField('Upload KTP Komisaris', relationsData.commissionerKtpFile, (file) => setRelationsData((prev) => ({ ...prev, commissionerKtpFile: file })), false)}\n          {uploadField('Surat Persetujuan Komisaris', relationsData.commissionerApproval, (file) => setRelationsData((prev) => ({ ...prev, commissionerApproval: file })), false)}\n        </div>\n      </SectionCard>\n    </div>\n  );\n\n  const keuanganTab = (\n    <div className=\"space-y-8\">\n      <SectionCard title=\"Kinerja Keuangan (Per Tahun)\" description=\"Gunakan angka rupiah tanpa simbol.\">\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {renderInput('financialPerformance.sales', 'Total Penjualan Per Tahun (Rp)', financialPerformance.sales, (value) => setFinancialPerformance((prev) => ({ ...prev, sales: formatNumberInput(value) })), { required: true })}\n          {renderInput('financialPerformance.operatingIncome', 'Laba Usaha (Rp)', financialPerformance.operatingIncome, (value) => setFinancialPerformance((prev) => ({ ...prev, operatingIncome: formatNumberInput(value) })), { required: true })}\n          {renderInput('financialPerformance.netIncome', 'Laba Bersih Perusahaan (Rp)', financialPerformance.netIncome, (value) => setFinancialPerformance((prev) => ({ ...prev, netIncome: formatNumberInput(value) })), { required: true })}\n          {renderInput('financialPerformance.currentAssets', 'Aset Lancar (Rp)', financialPerformance.currentAssets, (value) => setFinancialPerformance((prev) => ({ ...prev, currentAssets: formatNumberInput(value) })), { required: true })}\n          {renderInput('financialPerformance.nonCurrentAssets', 'Aset Tidak Lancar (Rp)', financialPerformance.nonCurrentAssets, (value) => setFinancialPerformance((prev) => ({ ...prev, nonCurrentAssets: formatNumberInput(value) })), { required: true })}\n          {renderInput('financialPerformance.shortDebt', 'Utang Jangka Pendek (Rp)', financialPerformance.shortDebt, (value) => setFinancialPerformance((prev) => ({ ...prev, shortDebt: formatNumberInput(value) })), { required: true })}\n          {renderInput('financialPerformance.longDebt', 'Utang Jangka Panjang (Rp)', financialPerformance.longDebt, (value) => setFinancialPerformance((prev) => ({ ...prev, longDebt: formatNumberInput(value) })), { required: true })}\n          {renderInput('financialPerformance.totalEquity', 'Total Modal (Rp)', financialPerformance.totalEquity, (value) => setFinancialPerformance((prev) => ({ ...prev, totalEquity: formatNumberInput(value) })), { required: true })}\n        </div>\n      </SectionCard>\n\n      <SectionCard title=\"Informasi Rekening\">\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {renderInput('bankInfo.bankName', 'Nama Bank', bankInfo.bankName, (value) => setBankInfo((prev) => ({ ...prev, bankName: value })), { required: true })}\n          {renderInput('bankInfo.accountName', 'Nama Rekening', bankInfo.accountName, (value) => setBankInfo((prev) => ({ ...prev, accountName: value })), { required: true })}\n          {renderInput('bankInfo.accountNumber', 'Nomor Rekening', bankInfo.accountNumber, (value) => setBankInfo((prev) => ({ ...prev, accountNumber: value })), { required: true })}\n          {renderInput('bankInfo.branch', 'Cabang / Wilayah / Negara', bankInfo.branch, (value) => setBankInfo((prev) => ({ ...prev, branch: value })), { required: true })}\n          {renderInput('bankInfo.bankAddress', 'Alamat Bank', bankInfo.bankAddress, (value) => setBankInfo((prev) => ({ ...prev, bankAddress: value })), { required: true })}\n        </div>\n      </SectionCard>\n\n      <SectionCard title=\"Dokumen Keuangan\">\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {uploadField('Rekening Koran Perusahaan', financialDocs.bankStatement, (file) => setFinancialDocs((prev) => ({ ...prev, bankStatement: file })), true)}\n          {uploadField('Laporan Keuangan Perusahaan', financialDocs.financialReport, (file) => setFinancialDocs((prev) => ({ ...prev, financialReport: file })), true)}\n          {uploadField('Laporan Keuangan Tahun Berjalan', financialDocs.currentYearReport, (file) => setFinancialDocs((prev) => ({ ...prev, currentYearReport: file })), true)}\n        </div>\n      </SectionCard>\n    </div>\n  );\n\n  const dokumenTab = (\n    <div className=\"space-y-8\">\n      <SectionCard title=\"Legalitas Utama\">\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {renderInput('corporateLegal.companyNpwp', 'Nomor NPWP Perusahaan', corporateLegal.companyNpwp, (value) => setCorporateLegal((prev) => ({ ...prev, companyNpwp: value })), { required: true })}\n          {uploadField('Upload File NPWP', corporateLegal.companyNpwpFile, (file) => setCorporateLegal((prev) => ({ ...prev, companyNpwpFile: file })), true)}\n          {renderInput('corporateLegal.deedNumber', 'No. Akta Pendirian', corporateLegal.deedNumber, (value) => setCorporateLegal((prev) => ({ ...prev, deedNumber: value })), { required: true })}\n          {renderInput('corporateLegal.deedDate', 'Tanggal Akta Pendirian', corporateLegal.deedDate, (value) => setCorporateLegal((prev) => ({ ...prev, deedDate: value })), { required: true, type: 'date' })}\n          {uploadField('Upload File Akta Pendirian', corporateLegal.deedFile, (file) => setCorporateLegal((prev) => ({ ...prev, deedFile: file })), true, '.pdf')}\n          {renderInput('corporateLegal.ministryDate', 'Tanggal SK Kemenkumham Akta Pendirian', corporateLegal.ministryDate, (value) => setCorporateLegal((prev) => ({ ...prev, ministryDate: value })), { required: true, type: 'date' })}\n          {uploadField('Upload SK Kemenkumham Akta Pendirian', corporateLegal.ministryFile, (file) => setCorporateLegal((prev) => ({ ...prev, ministryFile: file })), true, '.pdf')}\n        </div>\n        <div className=\"space-y-4\">\n          {corporateLegal.deedChanges.map((change, index) => (\n            <div key={change.id} className=\"border border-slate-700 rounded-2xl p-4 space-y-4\">\n              <div className=\"flex items-center justify-between text-sm text-slate-400\">\n                Akta Perubahan #{index + 1}\n                <button\n                  type=\"button\"\n                  onClick={() => removeDeedChange(change.id)}\n                  className=\"text-xs text-red-400\"\n                >\n                  Hapus\n                </button>\n              </div>\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                {renderInput(`corporateLegal.deedChanges.${change.id}.deedNumber`, 'No. Akta Perubahan', change.deedNumber, (value) => handleDeedChange(change.id, 'deedNumber', value), { required: true })}\n                {renderInput(`corporateLegal.deedChanges.${change.id}.deedDate`, 'Tanggal Akta', change.deedDate, (value) => handleDeedChange(change.id, 'deedDate', value), { required: true, type: 'date' })}\n              </div>\n              {uploadField('Upload Akta Perubahan', change.deedFile, (file) => handleDeedChange(change.id, 'deedFile', file), true, '.pdf')}\n            </div>\n          ))}\n          <button\n            type=\"button\"\n            onClick={addDeedChange}\n            className=\"px-4 py-2 rounded-xl border border-dashed border-cyan-500 text-cyan-300 text-sm hover:bg-cyan-500/10\"\n          >\n            Tambah Akta Perubahan\n          </button>\n        </div>\n      </SectionCard>\n\n      <SectionCard title=\"Perizinan\">\n        {renderSelect(\n          'Jenis Dokumen Perizinan',\n          licensing.licenseType,\n          (value) => setLicensing((prev) => ({ ...prev, licenseType: value as LicensingData['licenseType'] })),\n          ['NIB', 'SIUP & TDP'],\n          true,\n        )}\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          {renderInput('licensing.nibNumber', 'No. NIB', licensing.nibNumber, (value) => setLicensing((prev) => ({ ...prev, nibNumber: value })), { required: true })}\n          {uploadField('Upload File NIB', licensing.nibFile, (file) => setLicensing((prev) => ({ ...prev, nibFile: file })), true)}\n          {uploadField('Upload NIB Berbasis Risiko', licensing.nibRiskFile, (file) => setLicensing((prev) => ({ ...prev, nibRiskFile: file })), true)}\n          {uploadField('Surat Permohonan Menjadi Anggota & Kesanggupan Bayar', licensing.commitmentLetter, (file) => setLicensing((prev) => ({ ...prev, commitmentLetter: file })), true)}\n        </div>\n      </SectionCard>\n    </div>\n  );\n\n  const tandaTanganTab = (\n    <div className=\"space-y-8\">\n      <SectionCard title=\"Verifikasi Wajah\" description=\"Gunakan kamera untuk mengambil selfie penanggung jawab.\">\n        {uploadField('Foto Selfie Penanggung Jawab', digitalSignature.selfie, (file) => setDigitalSignature({ selfie: file }), true, '.jpg,.jpeg,.png')}\n        {errors.selfie && <p className=\"text-sm text-red-400\">{errors.selfie}</p>}\n      </SectionCard>\n\n      <SectionCard\n        title=\"Akad Keanggotaan\"\n        description=\"Setujui ketentuan menjadi Anggota Luar Biasa/Mitra Koperasi Jasa VESSEL.\"\n      >\n        <div className=\"space-y-4\">\n          <label className=\"flex items-start gap-3 text-sm text-slate-200 bg-slate-900/40 border border-slate-700 rounded-xl p-4\">\n            <input\n              type=\"checkbox\"\n              className=\"mt-1 w-4 h-4 rounded border-slate-600 bg-slate-900 text-cyan-500\"\n              checked={membershipAgreement.membership}\n              onChange={(e) => handleMembershipAgreementChange('membership', e.target.checked)}\n            />\n            <span>Saya mewakili perusahaan mengajukan diri menjadi Anggota Luar Biasa/Mitra pada Koperasi Jasa VESSEL.</span>\n          </label>\n          <label className=\"flex items-start gap-3 text-sm text-slate-200 bg-slate-900/40 border border-slate-700 rounded-xl p-4\">\n            <input\n              type=\"checkbox\"\n              className=\"mt-1 w-4 h-4 rounded border-slate-600 bg-slate-900 text-cyan-500\"\n              checked={membershipAgreement.savings}\n              onChange={(e) => handleMembershipAgreementChange('savings', e.target.checked)}\n            />\n            <span>Saya menyetujui pemotongan Simpanan Pokok (Rp 50.000) dan Simpanan Wajib dari pencairan pembiayaan pertama.</span>\n          </label>\n          <label className=\"flex items-start gap-3 text-sm text-slate-200 bg-slate-900/40 border border-slate-700 rounded-xl p-4\">\n            <input\n              type=\"checkbox\"\n              className=\"mt-1 w-4 h-4 rounded border-slate-600 bg-slate-900 text-cyan-500\"\n              checked={membershipAgreement.adArt}\n              onChange={(e) => handleMembershipAgreementChange('adArt', e.target.checked)}\n            />\n            <span>Saya telah membaca dan menyetujui AD/ART Koperasi.</span>\n          </label>\n        </div>\n        {errors.membership && <p className=\"text-sm text-red-400\">{errors.membership}</p>}\n      </SectionCard>\n\n      <div className=\"flex flex-col md:flex-row gap-4 justify-between\">\n        <button\n          type=\"button\"\n          onClick={handleSaveDraft}\n          className=\"px-6 py-3 rounded-xl border border-slate-600 text-slate-300 hover:border-slate-500\"\n          disabled={isSubmitting}\n        >\n          Simpan\n        </button>\n        <div className=\"flex gap-3\">\n          <button\n            type=\"button\"\n            onClick={() => setActiveTab('dokumen')}\n            className=\"px-6 py-3 rounded-xl bg-slate-800 text-slate-200 border border-slate-700\"\n            disabled={isSubmitting}\n          >\n            Kembali\n          </button>\n          <button\n            type=\"button\"\n            onClick={handleSubmit}\n            disabled={isSubmitting || submitted}\n            className=\"px-6 py-3 rounded-xl bg-gradient-to-r from-cyan-600 to-teal-600 text-white font-semibold shadow-lg shadow-cyan-900/50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n          >\n            {isSubmitting ? (\n              <>\n                <svg className=\"animate-spin h-4 w-4\" viewBox=\"0 0 24 24\">\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" />\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\n                </svg>\n                Mengirim...\n              </>\n            ) : submitted ? (\n              'Sudah Terkirim'\n            ) : (\n              'Setuju & Daftar Anggota'\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderActiveTab = () => {\n    switch (activeTab) {\n      case 'perusahaan':\n        return companyTab;\n      case 'penanggung':\n        return penanggungTab;\n      case 'keuangan':\n        return keuanganTab;\n      case 'dokumen':\n        return dokumenTab;\n      case 'tandaTangan':\n        return tandaTanganTab;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 py-8 px-4\">\n      <div className=\"max-w-6xl mx-auto grid gap-6 lg:grid-cols-[280px,1fr]\">\n        <div className=\"bg-slate-900/60 border border-slate-700 rounded-2xl p-6 space-y-6\">\n          <div>\n            <p className=\"text-cyan-400 text-sm font-semibold\">Kelengkapan</p>\n            <div className=\"flex items-center gap-3 mt-2\">\n              <div className=\"flex-1 h-2 bg-slate-800 rounded-full overflow-hidden\">\n                <div className=\"h-2 bg-gradient-to-r from-cyan-500 to-teal-500\" style={{ width: `${progress}%` }} />\n              </div>\n              <span className=\"text-slate-200 text-sm font-semibold\">{progress}%</span>\n            </div>\n          </div>\n          <div className=\"hidden lg:block\">{renderSidebar()}</div>\n          <div className=\"lg:hidden\">\n            <select\n              value={activeTab}\n              onChange={(e) => setActiveTab(e.target.value as TabKey)}\n              className=\"w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-xl text-slate-100\"\n            >\n              {tabList.map((tab) => (\n                <option key={tab.key} value={tab.key}>\n                  {tab.label}\n                </option>\n              ))}\n            </select>\n          </div>\n          <div className=\"text-xs text-slate-500\">\n            Data Anda tersimpan secara lokal saat menekan tombol &quot;Simpan&quot;. Tidak ada data yang dikirim hingga Anda menekan &quot;Kirim Untuk Verifikasi&quot;.\n          </div>\n        </div>\n\n        <div className=\"bg-slate-900/30 border border-slate-800 rounded-2xl p-6 md:p-8 space-y-6\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-slate-100 mt-2\">Profil Bisnis & Verifikasi</h1>\n            <p className=\"text-slate-400 mt-2\">\n              Lengkapi data untuk verifikasi perusahaan. Data digunakan untuk verifikasi kelayakan usaha (KYB)\n              dan seluruh informasi tetap aman serta sesuai regulasi.\n            </p>\n          </div>\n\n          {submitted && (\n            <div className=\"p-4 rounded-xl border border-emerald-500/40 bg-emerald-500/10 flex items-start gap-3\">\n              <svg className=\"w-5 h-5 text-emerald-400 mt-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n              </svg>\n              <div>\n                <p className=\"text-sm text-emerald-300 font-semibold\">Permohonan verifikasi terkirim</p>\n                <p className=\"text-xs text-emerald-200 mt-1\">\n                  {mitraStatus?.application?.status === 'pending' \n                    ? 'Aplikasi Anda sedang ditinjau oleh tim kami.'\n                    : mitraStatus?.application?.status === 'approved'\n                    ? 'Selamat! Aplikasi Anda telah disetujui.'\n                    : 'Tim kami segera meninjau data dan menghubungi Anda melalui email.'}\n                </p>\n              </div>\n            </div>\n          )}\n\n          {submitError && (\n            <div className=\"p-4 rounded-xl border border-red-500/40 bg-red-500/10 flex items-start gap-3\">\n              <svg className=\"w-5 h-5 text-red-400 mt-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n              </svg>\n              <div>\n                <p className=\"text-sm text-red-300 font-semibold\">Terjadi Kesalahan</p>\n                <p className=\"text-xs text-red-200 mt-1\">{submitError}</p>\n              </div>\n            </div>\n          )}\n\n          {savedToast && (\n            <div className=\"p-3 rounded-xl border border-cyan-500/30 bg-cyan-500/10 text-cyan-200 text-sm\">\n              Perubahan tersimpan secara lokal.\n            </div>\n          )}\n\n          {renderActiveTab()}\n\n          {activeTab !== 'tandaTangan' && (\n            <div className=\"flex flex-col md:flex-row gap-3 justify-between pt-4\">\n              <div className=\"flex gap-3\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    const currentIndex = tabList.findIndex((tab) => tab.key === activeTab);\n                    if (currentIndex > 0) {\n                      setActiveTab(tabList[currentIndex - 1].key);\n                    }\n                  }}\n                  className=\"px-5 py-3 rounded-xl border border-slate-700 text-slate-200\"\n                >\n                  Kembali\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    const currentIndex = tabList.findIndex((tab) => tab.key === activeTab);\n                    if (currentIndex < tabList.length - 1) {\n                      setActiveTab(tabList[currentIndex + 1].key);\n                    }\n                  }}\n                  className=\"px-5 py-3 rounded-xl bg-gradient-to-r from-cyan-600 to-teal-600 text-white shadow-lg shadow-cyan-900/40\"\n                >\n                  Lanjut\n                </button>\n              </div>\n              <button\n                type=\"button\"\n                onClick={handleSaveDraft}\n                className=\"px-5 py-3 rounded-xl border border-slate-700 text-slate-200\"\n              >\n                Simpan\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default function ProfilBisnisPage() {\n  return (\n    <AuthGuard allowedRoles={['mitra']}>\n      <ProfilBisnisContent />\n    </AuthGuard>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/eksportir/profile/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/eksportir/repayment/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/login/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useMemo' is defined but never used.","line":6,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":40,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useMemo"},"fix":{"range":[277,286],"text":""},"desc":"Remove unused variable \"useMemo\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { motion, useInView, useMotionTemplate, useMotionValue, useMotionValueEvent, useReducedMotion, useScroll, useSpring, useTime, useTransform } from 'framer-motion';\nimport { MouseEvent, useEffect, useMemo, useRef, useState } from 'react';\nimport { useAuth } from '@/lib/context/AuthContext';\nimport { LanguageSwitcher } from '@/lib/components/LanguageSwitcher';\nimport { useLanguage } from '@/lib/i18n/LanguageContext';\n\nconst ease = [0.16, 1, 0.3, 1];\n\nconst useReveal = (delay = 0, distance = 12) => {\n  const prefersReduced = useReducedMotion();\n  const ref = useRef<HTMLDivElement | null>(null);\n  const inView = useInView(ref, { once: true, margin: '-10% 0px' });\n\n  const animate = prefersReduced\n    ? { opacity: 1, y: 0 }\n    : inView\n      ? { opacity: 1, y: 0 }\n      : { opacity: 0, y: distance };\n\n  const transition = { duration: 0.5, ease, delay };\n\n  return { ref, animate, transition };\n};\n\nfunction CountUp({ target, start }: { target: number; start: boolean }) {\n  const prefersReduced = useReducedMotion();\n  const motionVal = useMotionValue(0);\n  const spring = useSpring(motionVal, { duration: 1, bounce: 0 });\n  const rounded = useTransform(spring, (v) => Math.round(v));\n\n  useEffect(() => {\n    if (!start) {\n      motionVal.set(0);\n      return;\n    }\n    if (prefersReduced) {\n      motionVal.set(target);\n    } else {\n      motionVal.set(0);\n      // useSpring animates toward the latest set value\n      requestAnimationFrame(() => motionVal.set(target));\n    }\n  }, [start, target, motionVal, prefersReduced]);\n\n  return <motion.span>{rounded}</motion.span>;\n}\n\nexport default function LandingPage() {\n  const { isAuthenticated, user } = useAuth();\n  const { t } = useLanguage();\n  const prefersReduced = useReducedMotion();\n  const heroRef = useRef<HTMLDivElement | null>(null);\n  const featuresRef = useRef<HTMLDivElement | null>(null);\n  const statsRef = useRef<HTMLDivElement | null>(null);\n  const howRef = useRef<HTMLDivElement | null>(null);\n  const securityRef = useRef<HTMLDivElement | null>(null);\n  const ctaRef = useRef<HTMLDivElement | null>(null);\n  const [securityActive, setSecurityActive] = useState(false);\n  const [activeFeature, setActiveFeature] = useState(0);\n  const [isMobile, setIsMobile] = useState(false);\n\n  const { scrollYProgress: heroProgress } = useScroll({ target: heroRef, offset: ['start start', 'end start'] });\n  const time = useTime();\n  const heroHueA = useTransform(time, (t) => 185 + Math.sin(t / 450) * 14);\n  const heroHueB = useTransform(time, (t) => 195 + Math.cos(t / 520) * 14);\n  const heroParallax = useTransform(heroProgress, [0, 1], [0, -80]);\n\n  const cardX = useMotionValue(0.5);\n  const cardY = useMotionValue(0.5);\n  const cardTiltX = useTransform(cardY, [0, 1], [8, -8]);\n  const cardTiltY = useTransform(cardX, [0, 1], [-8, 8]);\n\n  const { scrollYProgress: howProgress } = useScroll({ target: howRef, offset: ['start 80%', 'end 20%'] });\n\n  const { scrollYProgress: featuresProgress } = useScroll({ target: featuresRef, offset: ['start end', 'end start'] });\n  useMotionValueEvent(featuresProgress, 'change', (v) => {\n    if (prefersReduced || !isMobile) return;\n    setActiveFeature(v > 0.5 ? 1 : 0);\n  });\n\n  useEffect(() => {\n    const checkMobile = () => setIsMobile(window.innerWidth < 768);\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n\n  const statsInView = useInView(statsRef, { once: true, margin: '-10% 0px' });\n  const securityInView = useInView(securityRef, { margin: '-20% 0px' });\n  const [activeStep, setActiveStep] = useState(0);\n\n  useEffect(() => {\n    setSecurityActive(securityInView);\n  }, [securityInView]);\n\n  const handleCardMouseMove = (event: MouseEvent<HTMLDivElement>) => {\n    if (prefersReduced) return;\n    const rect = event.currentTarget.getBoundingClientRect();\n    const x = (event.clientX - rect.left) / rect.width;\n    const y = (event.clientY - rect.top) / rect.height;\n    cardX.set(Math.min(Math.max(x, 0), 1));\n    cardY.set(Math.min(Math.max(y, 0), 1));\n  };\n\n  const handleCardMouseLeave = () => {\n    cardX.set(0.5);\n    cardY.set(0.5);\n  };\n\n  const heroPill = useReveal(0);\n  const heroTitle = useReveal(0.05);\n  const heroSub = useReveal(0.1);\n  const heroCta = useReveal(0.15);\n  const getStats = () => [\n    { value: 3, suffix: 'M+', labelKey: 'landing.totalVolume', prefix: '$' },\n    { value: 500, suffix: '+', labelKey: 'landing.exporters' },\n    { value: 12, suffix: '%', labelKey: 'landing.avgYield' },\n    { value: 100, suffix: '%', labelKey: 'landing.onChain' },\n  ];\n\n  const getDashboardLink = () => {\n    if (!user) return '/login';\n    if (user.role === 'investor') return '/pendana/dashboard';\n    if (user.role === 'mitra') return '/eksportir/dashboard';\n    return '/dashboard';\n  };\n\n  return (\n    <div className=\"min-h-screen bg-slate-950 text-white overflow-x-hidden font-sans selection:bg-cyan-500/30\">\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-to-br from-cyan-500/10 via-transparent to-transparent rounded-full blur-3xl animate-pulse\" />\n        <div className=\"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-to-tl from-teal-500/10 via-transparent to-transparent rounded-full blur-3xl animate-pulse delay-1000\" />\n        <div className=\"absolute top-1/4 right-1/4 w-96 h-96 bg-cyan-500/5 rounded-full blur-3xl animate-bounce\" style={{ animationDuration: '8s' }} />\n        <div className=\"absolute inset-0 bg-[linear-gradient(rgba(6,182,212,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(6,182,212,0.03)_1px,transparent_1px)] bg-[size:100px_100px]\" />\n      </div>\n\n      <nav className=\"fixed w-full z-50 border-b border-slate-800/50 backdrop-blur-xl bg-slate-950/50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div className=\"flex items-center space-x-2\">\n              <Image\n                src=\"/vessel-logo.png\"\n                alt=\"VESSEL Logo\"\n                width={120}\n                height={32}\n                className=\"h-12 w-auto object-contain\"\n                priority\n              />\n            </div>\n            <div className=\"hidden md:flex items-center space-x-8\">\n              <a href=\"#features\" className=\"text-slate-400 hover:text-cyan-400 transition-colors text-sm font-medium tracking-wide\">{t('landing.features')}</a>\n              <a href=\"#how-it-works\" className=\"text-slate-400 hover:text-cyan-400 transition-colors text-sm font-medium tracking-wide\">{t('landing.howItWorks')}</a>\n              <a href=\"#security\" className=\"text-slate-400 hover:text-cyan-400 transition-colors text-sm font-medium tracking-wide\">{t('landing.security')}</a>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <LanguageSwitcher />\n              {isAuthenticated ? (\n                <Link\n                  href={getDashboardLink()}\n                  className=\"px-6 py-2.5 bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-400 hover:to-teal-400 rounded-xl font-semibold text-sm transition-all shadow-lg shadow-cyan-500/25 ring-1 ring-white/10\"\n                >\n                  Dashboard\n                </Link>\n              ) : (\n                <>\n                  <Link\n                    href=\"/login\"\n                    className=\"text-slate-300 hover:text-white transition-colors text-sm font-medium\"\n                  >\n                    {t('auth.login')}\n                  </Link>\n                  <Link\n                    href=\"/register\"\n                    className=\"px-6 py-2.5 min-w-[140px] text-center bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-400 hover:to-teal-400 rounded-xl font-semibold text-sm transition-all shadow-lg shadow-cyan-500/25 ring-1 ring-white/10\"\n                  >\n                    {t('landing.getStarted')}\n                  </Link>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </nav>\n\n      <motion.section\n        ref={heroRef}\n        className=\"relative z-10 min-h-screen flex items-center pt-20 px-4 sm:px-6 lg:px-8\"\n        style={{ opacity: securityActive ? 0.95 : 1 }}\n      >\n        <div className=\"max-w-7xl mx-auto w-full\">\n          <div className=\"grid lg:grid-cols-2 gap-12 items-center\">\n            <div className=\"text-center lg:text-left\">\n              <motion.div\n                {...heroPill}\n                className=\"inline-flex items-center space-x-2 px-4 py-2 bg-slate-800/50 border border-slate-700/50 rounded-full mb-8 backdrop-blur-sm shadow-xl shadow-cyan-900/10 hover:border-cyan-500/30 transition-colors\"\n              >\n                <span className=\"w-2 h-2 bg-cyan-400 rounded-full animate-pulse shadow-[0_0_10px_rgba(34,211,238,0.5)]\" />\n                <span className=\"text-sm text-slate-300 font-medium\">{t('landing.poweredBy')}</span>\n              </motion.div>\n\n              <motion.h1\n                ref={heroTitle.ref}\n                initial={{ opacity: 0, y: 12 }}\n                animate={heroTitle.animate}\n                transition={heroTitle.transition}\n                className=\"text-3xl md:text-6xl font-bold mb-6 leading-tight tracking-tight\"\n              >\n                <motion.span\n                  className=\"bg-clip-text text-transparent drop-shadow-sm bg-gradient-to-r from-cyan-400 to-teal-400\"\n                  style={{\n                    backgroundImage: useMotionTemplate`linear-gradient(90deg, hsl(${heroHueA} 80% 60%), hsl(${heroHueB} 75% 58%), hsl(${heroHueA} 70% 55%))`,\n                  }}\n                >\n                  {t('landing.heroTitle1')}\n                </motion.span>\n                <br />\n                <span className=\"text-white\">{t('landing.heroTitle2')}</span>\n              </motion.h1>\n\n              <motion.p\n                ref={heroSub.ref}\n                initial={{ opacity: 0, y: 12 }}\n                animate={heroSub.animate}\n                transition={heroSub.transition}\n                className=\"text-md md:text-lg text-slate-400 max-w-xl mx-auto lg:mx-0 mb-10 leading-relaxed border-l-0 lg:border-l-2 border-slate-800 pl-0 lg:pl-6 text-center lg:text-left\"\n              >\n                {t('landing.heroSubtitle')}\n              </motion.p>\n\n              <motion.div\n                ref={heroCta.ref}\n                initial={{ opacity: 0, y: 12 }}\n                animate={heroCta.animate}\n                transition={heroCta.transition}\n                className=\"flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-4 mb-8\"\n              >\n                <Link\n                  href=\"/register\"\n                  className=\"group w-full sm:w-auto min-w-[200px] px-8 py-4 bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-400 hover:to-teal-400 rounded-xl font-bold text-lg transition-all shadow-xl shadow-cyan-500/20 ring-1 ring-white/20 flex items-center justify-center space-x-2\"\n                >\n                  <span>{t('landing.startNow')}</span>\n                  <svg className=\"w-5 h-5 group-hover:translate-x-1 transition-transform\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7l5 5m0 0l-5 5m5-5H6\" />\n                  </svg>\n                </Link>\n                <a\n                  href=\"#how-it-works\"\n                  className=\"w-full sm:w-auto min-w-[200px] px-8 py-4 bg-slate-800/50 hover:bg-slate-800 border border-slate-700/50 hover:border-slate-600 rounded-xl font-bold text-lg transition-all backdrop-blur-sm text-center text-slate-300 hover:text-white\"\n                >\n                  {t('landing.learnMore')}\n                </a>\n              </motion.div>\n\n              <motion.div\n                ref={statsRef}\n                initial={{ opacity: 0, y: 12 }}\n                animate={statsInView ? { opacity: 1, y: 0 } : {}}\n                transition={{ duration: 0.6, ease }}\n                className=\"grid grid-cols-2 sm:grid-cols-4 gap-6 pt-8 border-t border-slate-800/50\"\n              >\n                {getStats().map((stat) => (\n                  <div key={stat.labelKey} className=\"space-y-1\">\n                    <div className=\"text-2xl md:text-3xl font-bold text-white\">\n                      {stat.prefix || ''}<CountUp target={stat.value} start={statsInView} />{stat.suffix}\n                    </div>\n                    <div className=\"text-sm text-slate-500 font-medium uppercase tracking-wider\">{t(stat.labelKey)}</div>\n                  </div>\n                ))}\n              </motion.div>\n            </div>\n\n            <div className=\"relative hidden lg:block h-full min-h-[600px] [perspective:1400px]\">\n              <motion.div\n                className=\"absolute inset-0 bg-gradient-to-tr from-cyan-500/20 to-teal-500/20 rounded-full blur-[100px]\"\n                style={{ y: prefersReduced ? 0 : heroParallax }}\n              />\n              <motion.div\n                initial={{ opacity: 0, y: 24, rotate: 3 }}\n                animate={{ opacity: 1, y: 0, rotate: 0 }}\n                transition={{ duration: 0.6, ease }}\n                className=\"relative bg-slate-950/80 border border-slate-800/60 backdrop-blur-md rounded-3xl p-8 shadow-2xl max-w-md mx-auto mt-12 overflow-hidden ring-1 ring-cyan-500/10\"\n                style={{\n                  rotateX: prefersReduced ? 0 : cardTiltX,\n                  rotateY: prefersReduced ? 0 : cardTiltY,\n                  transformStyle: 'preserve-3d',\n                }}\n                onMouseMove={handleCardMouseMove}\n                onMouseLeave={handleCardMouseLeave}\n              >\n                <div\n                  className=\"pointer-events-none absolute inset-0 rounded-3xl\"\n                  style={{\n                    background: 'linear-gradient(135deg, rgba(34,211,238,0.1), rgba(45,212,191,0.06) 55%, rgba(14,165,233,0.04))',\n                    opacity: 0.45,\n                  }}\n                />\n                <motion.div\n                  className=\"absolute -inset-px rounded-3xl opacity-60\"\n                  animate={{ opacity: prefersReduced ? 0.25 : [0.35, 0.55, 0.35] }}\n                  transition={{ duration: 6, repeat: Infinity, ease: 'easeInOut' }}\n                  style={{\n                    background: 'linear-gradient(145deg, rgba(34,211,238,0.1), rgba(45,212,191,0.06), rgba(15,118,110,0.04))',\n                  }}\n                />\n                <div className=\"flex items-center justify-between mb-8\">\n                  <div>\n                    <div className=\"text-xs text-slate-400 uppercase tracking-widest mb-1\">{t('landing.currentYield')}</div>\n                    <div className=\"text-3xl font-bold text-cyan-400\">12.5% APY</div>\n                  </div>\n                  <div className=\"w-12 h-12 bg-cyan-500/10 rounded-full flex items-center justify-center\">\n                    <svg className=\"w-6 h-6 text-cyan-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\" />\n                    </svg>\n                  </div>\n                </div>\n                <div className=\"space-y-4\">\n                  <div className=\"h-2 bg-slate-800 rounded-full overflow-hidden\">\n                    <motion.div\n                      initial={{ width: '0%' }}\n                      animate={{ width: '75%' }}\n                      transition={{ duration: 0.8, ease }}\n                      className=\"h-full bg-gradient-to-r from-cyan-500 to-teal-500 rounded-full\"\n                    />\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-slate-400\">{t('landing.poolFilled')}</span>\n                    <span className=\"text-white font-medium\">75%</span>\n                  </div>\n                </div>\n                <div className=\"mt-8 grid grid-cols-2 gap-4\">\n                  <motion.div\n                    initial={{ opacity: 0, y: 12 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ duration: 0.45, ease }}\n                    className=\"p-4 bg-slate-800/50 rounded-xl border border-slate-700/50\"\n                  >\n                    <div className=\"text-xs text-slate-400 mb-1\">{t('landing.riskRating')}</div>\n                    <div className=\"text-lg font-bold text-emerald-400\">A+ (Low)</div>\n                  </motion.div>\n                  <motion.div\n                    initial={{ opacity: 0, y: 12 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ duration: 0.45, ease, delay: 0.06 }}\n                    className=\"p-4 bg-slate-800/50 rounded-xl border border-slate-700/50\"\n                  >\n                    <div className=\"text-xs text-slate-400 mb-1\">{t('landing.term')}</div>\n                    <div className=\"text-lg font-bold text-white\">45 {t('common.days')}</div>\n                  </motion.div>\n                </div>\n              </motion.div>\n            </div>\n          </div>\n        </div>\n      </motion.section>\n\n      <motion.section\n        id=\"features\"\n        ref={featuresRef}\n        className=\"relative z-10 py-12 sm:py-24 lg:py-32 px-4 sm:px-6 lg:px-8 bg-transparent\"\n        style={{ opacity: securityActive ? 0.95 : 1 }}\n      >\n        <div className=\"max-w-7xl mx-auto\">\n          <motion.div\n            initial={{ opacity: 0, y: 12 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.5, ease }}\n            viewport={{ once: true, margin: '-10% 0px' }}\n            className=\"text-center mb-8 md:sticky md:top-24\"\n          >\n            <h2 className=\"text-3xl md:text-5xl font-bold mb-3\">\n              {t('landing.twoSides')} <span className=\"bg-gradient-to-r from-cyan-400 to-teal-400 bg-clip-text text-transparent\">{t('landing.onePlatform')}</span>\n            </h2>\n            <p className=\"text-slate-400 text-lg max-w-2xl mx-auto\">\n              {t('landing.twoSidesSubtitle')}\n            </p>\n          </motion.div>\n\n          <div className=\"grid md:grid-cols-2 gap-8\">\n            {[\n              {\n                titleKey: 'landing.forInvestor',\n                color: 'cyan',\n                blur: 'from-cyan-500/5',\n                img: '/assets/landing/investor.png',\n                bulletColor: 'cyan',\n                bulletKeys: [\n                  'landing.investorBullet1',\n                  'landing.investorBullet2',\n                  'landing.investorBullet3',\n                  'landing.investorBullet4',\n                ],\n                descKey: 'landing.investorDesc',\n                ctaKey: 'landing.connectWallet',\n                href: '/pendana/connect',\n              },\n              {\n                titleKey: 'landing.forExporter',\n                color: 'teal',\n                blur: 'from-teal-500/5',\n                img: '/assets/landing/exporter.png',\n                bulletColor: 'teal',\n                bulletKeys: [\n                  'landing.exporterBullet1',\n                  'landing.exporterBullet2',\n                  'landing.exporterBullet3',\n                  'landing.exporterBullet4',\n                ],\n                descKey: 'landing.exporterDesc',\n                ctaKey: 'landing.applyFunding',\n                href: '/register',\n              },\n            ].map((card, idx) => {\n              const active = activeFeature === idx;\n              const dimClass = active ? 'opacity-100 blur-0 scale-[1.03] border-opacity-70' : 'opacity-70 blur-[1px]';\n              return (\n                <motion.div\n                  key={card.titleKey}\n                  initial={{ opacity: 0, y: 12 }}\n                  whileInView={{ opacity: 1, y: 0 }}\n                  transition={{ duration: 0.5, ease, delay: idx * 0.1 }}\n                  viewport={{ once: true, margin: '-10% 0px' }}\n                  className={`group relative p-6 bg-gradient-to-br from-slate-800/40 to-slate-900/40 border border-slate-700/50 rounded-3xl backdrop-blur-sm transition-all duration-500 hover:shadow-2xl ${dimClass} ${card.color === 'cyan' ? 'hover:border-cyan-500/40 hover:shadow-cyan-900/20' : 'hover:border-teal-500/40 hover:shadow-teal-900/20'}`}\n                  onMouseEnter={() => !isMobile && setActiveFeature(idx)}\n                >\n                  <div className={`absolute inset-0 bg-gradient-to-br ${card.blur} to-transparent opacity-0 group-hover:opacity-100 transition-opacity rounded-3xl`} />\n                  <div className=\"relative\">\n                    <motion.div\n                      className={`w-16 h-16 bg-gradient-to-br ${card.color === 'cyan' ? 'from-cyan-500/20 to-cyan-500/5 border-cyan-500/20' : 'from-teal-500/20 to-teal-500/5 border-teal-500/20'} border rounded-2xl flex items-center justify-center mb-4`}\n                      animate={active ? { rotate: 0, y: 0, scale: 1.03 } : { rotate: 0, y: 4, scale: 1 }}\n                      transition={{ duration: 0.45, ease }}\n                    >\n                      <Image src={card.img} alt={t(card.titleKey)} width={64} height={64} className=\"w-12 h-12 object-contain\" />\n                    </motion.div>\n                    <h3 className=\"text-3xl font-bold mb-2 text-white\">{t(card.titleKey)}</h3>\n                    <p className=\"text-slate-400 text-md mb-4 leading-relaxed\">\n                      {t(card.descKey)}\n                    </p>\n                    <ul className=\"space-y-4 mb-10\">\n                      {card.bulletKeys.map((key) => (\n                        <li key={key} className=\"flex items-center space-x-3 text-slate-300\">\n                          <div className={`w-6 h-6 rounded-full ${card.color === 'cyan' ? 'bg-cyan-500/10' : 'bg-teal-500/10'} flex items-center justify-center flex-shrink-0`}>\n                            <svg className={`w-3.5 h-3.5 ${card.color === 'cyan' ? 'text-cyan-400' : 'text-teal-400'}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M5 13l4 4L19 7\" />\n                            </svg>\n                          </div>\n                          <span className=\"font-medium\">{t(key)}</span>\n                        </li>\n                      ))}\n                    </ul>\n                    <Link\n                      href={card.href}\n                      className={`inline-flex items-center space-x-2 font-bold tracking-wide transition-colors ${card.color === 'cyan' ? 'text-cyan-400 hover:text-cyan-300' : 'text-teal-400 hover:text-teal-300'} min-w-[160px]`}\n                    >\n                      <span>{t(card.ctaKey)}</span>\n                      <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\n                      </svg>\n                    </Link>\n                  </div>\n                </motion.div>\n              );\n            })}\n          </div>\n        </div>\n      </motion.section>\n\n      <motion.section\n        id=\"how-it-works\"\n        ref={howRef}\n        className=\"relative z-10 py-16 sm:py-24 lg:py-32 px-4 sm:px-6 lg:px-8\"\n        style={{ opacity: securityActive ? 0.95 : 1 }}\n      >\n        <div className=\"max-w-7xl mx-auto\">\n          <motion.div\n            initial={{ opacity: 0, y: 12 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true, margin: '-10% 0px' }}\n            transition={{ duration: 0.5, ease }}\n            className=\"text-center mb-8 md:mb-20\"\n          >\n            <h2 className=\"text-3xl md:text-5xl font-bold mb-3 md:mb-6\">\n              {t('landing.howItWorksTitle')} <span className=\"bg-gradient-to-r from-cyan-400 to-teal-400 bg-clip-text text-transparent\">{t('landing.howItWorksHighlight')}</span>\n            </h2>\n            <p className=\"text-slate-400 text-lg max-w-2xl mx-auto\">\n              {t('landing.howItWorksSubtitle')}\n            </p>\n          </motion.div>\n\n          <div className=\"relative grid md:grid-cols-4 gap-8\">\n            <div className=\"hidden md:block absolute left-1/2 -translate-x-1/2 top-6 bottom-6 w-0.5 bg-slate-800/60\">\n              <motion.div\n                className=\"absolute left-0 top-0 w-full origin-top bg-gradient-to-b from-cyan-400 via-teal-400 to-emerald-400\"\n                style={{ scaleY: howProgress }}\n              />\n            </div>\n            {[\n              {\n                step: '01',\n                titleKey: 'landing.step1Title',\n                descKey: 'landing.step1Desc',\n                icon: (\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\n                ),\n              },\n              {\n                step: '02',\n                titleKey: 'landing.step2Title',\n                descKey: 'landing.step2Desc',\n                icon: (\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\" />\n                ),\n              },\n              {\n                step: '03',\n                titleKey: 'landing.step3Title',\n                descKey: 'landing.step3Desc',\n                icon: (\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z\" />\n                ),\n              },\n              {\n                step: '04',\n                titleKey: 'landing.step4Title',\n                descKey: 'landing.step4Desc',\n                icon: (\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                ),\n              },\n            ].map((item, i) => {\n              const faded = i < activeStep;\n              return (\n                <motion.div\n                  key={item.step}\n                  className=\"relative group\"\n                  initial={{ opacity: 0, y: 12 }}\n                  whileInView={{ opacity: 1, y: 0 }}\n                  viewport={{ once: true, margin: '-20% 0px' }}\n                  transition={{ duration: 0.45, ease, delay: i * 0.08 }}\n                  onViewportEnter={() => setActiveStep(i)}\n                  animate={{ opacity: faded ? 0.4 : 1 }}\n                >\n                  <div className=\"p-8 bg-slate-800/30 border border-slate-700/50 rounded-2xl backdrop-blur-sm h-full transition-colors\">\n                    <div className=\"absolute top-6 right-6 text-slate-800 text-6xl font-bold opacity-40 pointer-events-none select-none\">{item.step}</div>\n                    <motion.div\n                      initial={{ opacity: 0, y: 10 }}\n                      whileInView={{ opacity: 1, y: 0 }}\n                      viewport={{ once: true, margin: '-20% 0px' }}\n                      transition={{ duration: 0.45, ease }}\n                      className=\"w-14 h-14 bg-gradient-to-br from-cyan-500/20 to-teal-500/20 border border-cyan-500/20 rounded-xl flex items-center justify-center mb-6 shadow-lg shadow-cyan-900/20\"\n                    >\n                      <svg className=\"w-7 h-7 text-cyan-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        {item.icon}\n                      </svg>\n                    </motion.div>\n                    <h3 className=\"text-xl font-bold mb-3 text-white relative z-10\">{t(item.titleKey)}</h3>\n                    <p className=\"text-slate-400 text-sm leading-relaxed relative z-10\">{t(item.descKey)}</p>\n                  </div>\n                </motion.div>\n              );\n            })}\n          </div>\n        </div>\n      </motion.section>\n\n      <motion.section\n        id=\"security\"\n        ref={securityRef}\n        className=\"relative z-10 py-16 sm:py-24 lg:py-32 px-4 sm:px-6 lg:px-8 bg-transparent\"\n      >\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"grid lg:grid-cols-2 gap-16 items-center\">\n            <div className=\"lg:sticky lg:top-28 self-start\">\n              <motion.h2\n                initial={{ opacity: 0, y: 12 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true, margin: '-10% 0px' }}\n                transition={{ duration: 0.5, ease }}\n                className=\"text-3xl md:text-5xl font-bold mb-4\"\n              >\n                {t('landing.securityTitle')} <span className=\"bg-gradient-to-r from-cyan-400 to-teal-400 bg-clip-text text-transparent\">{t('landing.securityHighlight')}</span>\n              </motion.h2>\n              <motion.p\n                initial={{ opacity: 0, y: 12 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true, margin: '-10% 0px' }}\n                transition={{ duration: 0.5, ease, delay: 0.08 }}\n                className=\"text-slate-400 text-md mb-2 leading-relaxed\"\n              >\n                {t('landing.securitySubtitle')}\n              </motion.p>\n              <div className=\"space-y-2\">\n                {[\n                  { titleKey: 'landing.security1Title', descKey: 'landing.security1Desc' },\n                  { titleKey: 'landing.security2Title', descKey: 'landing.security2Desc' },\n                  { titleKey: 'landing.security3Title', descKey: 'landing.security3Desc' },\n                  { titleKey: 'landing.security4Title', descKey: 'landing.security4Desc' },\n                ].map((item, i) => (\n                  <motion.div\n                    key={item.titleKey}\n                    initial={{ opacity: 0, y: 8 }}\n                    whileInView={{ opacity: 1, y: 0 }}\n                    viewport={{ once: true, margin: '-10% 0px' }}\n                    transition={{ duration: 0.45, ease, delay: i * 0.05 }}\n                    className=\"flex items-start space-x-5 p-4 rounded-xl border border-slate-800/60 bg-slate-900/40\"\n                  >\n                    <div className=\"w-10 h-10 bg-cyan-500/10 rounded-full flex items-center justify-center flex-shrink-0 mt-1\">\n                      <svg className=\"w-5 h-5 text-cyan-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                      </svg>\n                    </div>\n                    <div>\n                      <h4 className=\"font-bold text-white text-lg mb-1\">{t(item.titleKey)}</h4>\n                      <p className=\"text-slate-400\">{t(item.descKey)}</p>\n                    </div>\n                  </motion.div>\n                ))}\n              </div>\n            </div>\n            <div className=\"relative max-w-lg mx-auto lg:mx-0 hidden md:block\">\n              <div className=\"absolute inset-0 bg-gradient-to-r from-cyan-500/10 to-teal-500/10 rounded-full blur-[80px]\" />\n              <div className=\"relative p-1 bg-gradient-to-br from-slate-700/50 to-slate-900/50 rounded-3xl backdrop-blur-xl\">\n                <div className=\"bg-slate-950/90 rounded-[22px] p-8\">\n                  <div className=\"grid grid-cols-2 gap-6\">\n                    {[\n                      { icon: '/assets/landing/landing-asset-1.png', label: 'E2E Encryption' },\n                      { icon: '/assets/landing/landing-asset-2.png', label: 'On-Chain Verify' },\n                      { icon: '/assets/landing/landing-asset-3.png', label: 'DDoS Guard' },\n                      { icon: '/assets/landing/landing-asset-4.png', label: 'Immutable Logs' },\n                    ].map((item, i) => (\n                      <motion.div\n                        key={item.label}\n                        initial={{ opacity: 0, y: 10 }}\n                        whileInView={{ opacity: 1, y: 0 }}\n                        viewport={{ once: true, margin: '-10% 0px' }}\n                        transition={{ duration: 0.45, ease, delay: i * 0.08 }}\n                        className=\"aspect-square flex flex-col items-center justify-center p-6 bg-slate-900 rounded-2xl border border-slate-800 hover:border-cyan-500/30 transition-colors group\"\n                      >\n                        <div className=\"flex items-center space-x-2\">\n                          <Image\n                            src={item.icon}\n                            alt=\"VESSEL Logo\"\n                            width={120}\n                            height={120}\n                            className=\"h-32 w-auto object-contain\"\n                            priority\n                          />\n                        </div>\n                        <div className=\"text-sm font-medium text-slate-300 mt-2\">{item.label}</div>\n                      </motion.div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </motion.section>\n\n      <motion.section\n        ref={ctaRef}\n        className=\"relative z-10 py-16 sm:py-24 lg:py-32 px-4 sm:px-6 lg:px-8\"\n        style={{ opacity: securityActive ? 0.95 : 1 }}\n        initial={{ opacity: 0, scale: 0.98 }}\n        whileInView={{ opacity: 1, scale: 1 }}\n        viewport={{ once: true, margin: '-10% 0px' }}\n        transition={{ duration: 0.6, ease }}\n      >\n        <div className=\"max-w-5xl mx-auto text-center\">\n          <div className=\"p-8 bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700/50 rounded-[2.5rem] shadow-2xl relative overflow-hidden group transition-colors duration-700\">\n            <div className=\"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 brightness-100 contrast-150\" />\n            <motion.div\n              className=\"absolute -top-1/2 -right-1/2 w-full h-full bg-cyan-500/20 blur-[100px]\"\n              animate={{ opacity: [0.5, 0.7, 0.5] }}\n              transition={{ duration: 6, repeat: Infinity, ease: 'easeInOut' }}\n            />\n            <div className=\"relative z-10\">\n              <h2 className=\"text-4xl md:text-5xl font-bold mb-6 text-white\">\n                {t('landing.ctaTitle')}\n              </h2>\n              <p className=\"text-slate-300 text-lg mb-12 max-w-3xl mx-auto leading-relaxed\">\n                {t('landing.ctaSubtitle')}\n              </p>\n              <div className=\"flex flex-col sm:flex-row items-center justify-center gap-6\">\n                <Link\n                  href=\"/register\"\n                  className=\"relative w-full sm:w-auto rounded-xl p-[3px] bg-gradient-to-r from-cyan-500 to-teal-500 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-1\"\n                >\n                  <span className=\"block rounded-[10px] bg-white text-slate-900 px-10 py-5 font-bold text-lg transition-all duration-200 ease-out hover:bg-transparent hover:text-white min-w-[240px]\">\n                    {t('landing.ctaExporter')}\n                  </span>\n                </Link>\n                <Link\n                  href=\"/login\"\n                  className=\"w-full sm:w-auto px-10 py-5 bg-transparent border-2 border-slate-600 hover:border-white text-white rounded-xl font-bold text-lg transition-all hover:bg-white/5 min-w-[200px]\"\n                >\n                  {t('auth.login')}\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n      </motion.section>\n\n      <footer className=\"relative z-10 border-t border-slate-800/50 bg-slate-950 pt-20 pb-10 px-4\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"grid md:grid-cols-4 gap-12 mb-16\">\n            <div className=\"col-span-1 md:col-span-1\">\n              <div className=\"flex items-center space-x-2\">\n                <Image\n                  src=\"/vessel-logo.png\"\n                  alt=\"VESSEL Logo\"\n                  width={120}\n                  height={32}\n                  className=\"h-12 w-auto object-contain\"\n                  priority\n                />\n              </div>\n              <p className=\"text-slate-400 mt-4 text-sm leading-relaxed\">\n                Platform pembiayaan ekspor terdesentralisasi pertama di Indonesia. Menjembatani modal global dengan potensi lokal.\n              </p>\n            </div>\n            <div>\n              <h4 className=\"font-bold text-white mb-6\">Produk</h4>\n              <ul className=\"space-y-4 text-sm text-slate-400\">\n                <li><a href=\"#\" className=\"hover:text-cyan-400 transition-colors\">Untuk Investor</a></li>\n                <li><a href=\"#\" className=\"hover:text-cyan-400 transition-colors\">Untuk Eksportir</a></li>\n                <li><a href=\"#\" className=\"hover:text-cyan-400 transition-colors\">Protokol DeFi</a></li>\n              </ul>\n            </div>\n            <div>\n              <h4 className=\"font-bold text-white mb-6\">Perusahaan</h4>\n              <ul className=\"space-y-4 text-sm text-slate-400\">\n                <li><a href=\"#\" className=\"hover:text-cyan-400 transition-colors\">Tentang Kami</a></li>\n                <li><a href=\"#\" className=\"hover:text-cyan-400 transition-colors\">Karier</a></li>\n                <li><a href=\"#\" className=\"hover:text-cyan-400 transition-colors\">Blog</a></li>\n              </ul>\n            </div>\n            <div>\n              <h4 className=\"font-bold text-white mb-6\">Legal</h4>\n              <ul className=\"space-y-4 text-sm text-slate-400\">\n                <li><a href=\"#\" className=\"hover:text-cyan-400 transition-colors\">Syarat & Ketentuan</a></li>\n                <li><a href=\"#\" className=\"hover:text-cyan-400 transition-colors\">Kebijakan Privasi</a></li>\n                <li><a href=\"#\" className=\"hover:text-cyan-400 transition-colors\">License</a></li>\n              </ul>\n            </div>\n          </div>\n          <div className=\"pt-8 border-t border-slate-800/50 flex flex-col md:flex-row items-center justify-between text-sm text-slate-500\">\n            <p>&copy; 2026 VESSEL Finance. All rights reserved.</p>\n            <div className=\"flex items-center space-x-6 mt-4 md:mt-0\">\n              <span>Kepatuhan Utama</span>\n              <span>Powered by Lisk</span>\n            </div>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/pendana/connect/page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/pendana/connect/page.tsx:28:13\n  26 |     useEffect(() => {\n  27 |         if (isConnected && !isWrongChain) {\n> 28 |             setIsRedirecting(true);\n     |             ^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  29 |             router.push('/pendana/dashboard');\n  30 |         }\n  31 |     }, [isConnected, isWrongChain, router]);","line":28,"column":13,"nodeType":null,"endLine":28,"endColumn":29}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport { useInvestorWallet } from '@/lib/context/InvestorWalletContext';\n\nexport default function InvestorConnectPage() {\n    const router = useRouter();\n    const {\n        isConnected,\n        isConnecting,\n        isMetaMaskInstalled,\n        error,\n        chainId,\n        connectWallet,\n        switchToCorrectChain,\n    } = useInvestorWallet();\n\n    const [isRedirecting, setIsRedirecting] = useState(false);\n    const expectedChainId = parseInt(process.env.NEXT_PUBLIC_CHAIN_ID || '31337', 10);\n    const isWrongChain = chainId !== null && chainId !== expectedChainId;\n\n    // Redirect if already connected\n    useEffect(() => {\n        if (isConnected && !isWrongChain) {\n            setIsRedirecting(true);\n            router.push('/pendana/dashboard');\n        }\n    }, [isConnected, isWrongChain, router]);\n\n    const handleConnect = async () => {\n        const success = await connectWallet();\n        if (success) {\n            router.push('/pendana/dashboard');\n        }\n    };\n\n    const handleSwitchChain = async () => {\n        await switchToCorrectChain();\n    };\n\n    if (isRedirecting) {\n        return (\n            <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center\">\n                <div className=\"flex flex-col items-center space-y-4\">\n                    <div className=\"w-12 h-12 border-4 border-cyan-500/30 border-t-cyan-500 rounded-full animate-spin\" />\n                    <p className=\"text-slate-400\">Mengalihkan ke dashboard...</p>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center p-4 overflow-hidden\">\n            {/* Background Effects */}\n            <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n                <div className=\"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-to-br from-cyan-500/10 via-transparent to-transparent rounded-full blur-3xl animate-pulse\" />\n                <div className=\"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-to-tl from-teal-500/10 via-transparent to-transparent rounded-full blur-3xl animate-pulse delay-1000\" />\n            </div>\n\n            <div className=\"relative z-10 w-full max-w-lg\">\n                {/* Card */}\n                <div className=\"bg-slate-800/50 backdrop-blur-xl rounded-3xl border border-slate-700/50 p-8 shadow-2xl\">\n                    {/* Logo */}\n                    <div className=\"flex justify-center mb-8\">\n                        <Image\n                            src=\"/vessel-logo.png\"\n                            alt=\"VESSEL Logo\"\n                            width={150}\n                            height={40}\n                            className=\"h-14 w-auto object-contain\"\n                            priority\n                        />\n                    </div>\n\n                    {/* Title */}\n                    <div className=\"text-center mb-8\">\n                        <h1 className=\"text-2xl font-bold text-white mb-2\">\n                            Hubungkan Wallet Anda\n                        </h1>\n                        <p className=\"text-slate-400 text-sm\">\n                            Sebagai pendana, Anda dapat langsung mengakses platform dengan menghubungkan wallet MetaMask Anda.\n                        </p>\n                    </div>\n\n                    {/* Error Message */}\n                    {error && (\n                        <div className=\"mb-6 p-4 bg-red-500/10 border border-red-500/50 rounded-xl\">\n                            <p className=\"text-red-400 text-sm text-center\">{error}</p>\n                        </div>\n                    )}\n\n                    {/* Wrong Chain Warning */}\n                    {isWrongChain && (\n                        <div className=\"mb-6 p-4 bg-amber-500/10 border border-amber-500/50 rounded-xl\">\n                            <p className=\"text-amber-400 text-sm text-center mb-3\">\n                                Anda terhubung ke jaringan yang salah. Silakan berganti ke jaringan yang benar.\n                            </p>\n                            <button\n                                onClick={handleSwitchChain}\n                                className=\"w-full px-4 py-2.5 bg-amber-500/20 hover:bg-amber-500/30 border border-amber-500/40 text-amber-100 rounded-lg text-sm font-medium transition-all\"\n                            >\n                                Ganti Jaringan\n                            </button>\n                        </div>\n                    )}\n\n                    {/* Connect Button */}\n                    {!isMetaMaskInstalled ? (\n                        <div className=\"space-y-4\">\n                            <div className=\"p-4 bg-slate-900/50 border border-slate-700 rounded-xl text-center\">\n                                <p className=\"text-slate-300 text-sm mb-4\">\n                                    MetaMask tidak terdeteksi. Silakan install MetaMask untuk melanjutkan.\n                                </p>\n                                <a\n                                    href=\"https://metamask.io/download/\"\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                    className=\"inline-flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-400 hover:to-amber-400 rounded-xl font-semibold text-white transition-all\"\n                                >\n                                    <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                        <path d=\"M22.5 11.5L19.5 4.5L12 2L4.5 4.5L1.5 11.5L4.5 19.5L12 22L19.5 19.5L22.5 11.5Z\" />\n                                    </svg>\n                                    <span>Install MetaMask</span>\n                                </a>\n                            </div>\n                        </div>\n                    ) : (\n                        <button\n                            onClick={handleConnect}\n                            disabled={isConnecting}\n                            className=\"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-400 hover:to-teal-400 disabled:from-slate-600 disabled:to-slate-600 rounded-xl font-bold text-lg text-white transition-all shadow-lg shadow-cyan-500/25\"\n                        >\n                            {isConnecting ? (\n                                <>\n                                    <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                                    <span>Menghubungkan...</span>\n                                </>\n                            ) : (\n                                <>\n                                    <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\" />\n                                    </svg>\n                                    <span>Hubungkan MetaMask</span>\n                                </>\n                            )}\n                        </button>\n                    )}\n\n                    {/* Divider */}\n                    <div className=\"relative my-8\">\n                        <div className=\"absolute inset-0 flex items-center\">\n                            <div className=\"w-full border-t border-slate-700\"></div>\n                        </div>\n                        <div className=\"relative flex justify-center text-sm\">\n                            <span className=\"px-3 bg-slate-800/50 text-slate-500 text-xs\">atau</span>\n                        </div>\n                    </div>\n\n                    {/* Alternative Links */}\n                    <div className=\"space-y-3\">\n                        <Link\n                            href=\"/register\"\n                            className=\"block w-full text-center px-4 py-3 bg-slate-900/50 hover:bg-slate-900 border border-slate-700 hover:border-slate-600 rounded-xl text-slate-300 hover:text-white transition-all text-sm\"\n                        >\n                            Daftar sebagai Eksportir/Mitra\n                        </Link>\n                        <Link\n                            href=\"/login\"\n                            className=\"block w-full text-center px-4 py-3 text-slate-400 hover:text-cyan-400 transition-colors text-sm\"\n                        >\n                            Sudah punya akun mitra? Masuk\n                        </Link>\n                    </div>\n\n                    {/* Trust Indicators */}\n                    <div className=\"mt-8 pt-6 border-t border-slate-700/50\">\n                        <div className=\"flex items-center justify-center space-x-6 text-xs text-slate-500\">\n                            <div className=\"flex items-center space-x-1\">\n                                <svg className=\"w-4 h-4 text-cyan-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                    <path fillRule=\"evenodd\" d=\"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z\" clipRule=\"evenodd\" />\n                                </svg>\n                                <span>Non-Custodial</span>\n                            </div>\n                            <div className=\"flex items-center space-x-1\">\n                                <svg className=\"w-4 h-4 text-cyan-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                    <path fillRule=\"evenodd\" d=\"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                                </svg>\n                                <span>On-Chain Verified</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Back Link */}\n                <div className=\"mt-6 text-center\">\n                    <Link href=\"/\" className=\"text-slate-400 hover:text-white transition-colors text-sm\">\n                        ← Kembali ke Beranda\n                    </Link>\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/pendana/dashboard-unused/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/pendana/dashboard/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/pendana/marketplace/[id]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/pendana/marketplace/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'walletAddress' is assigned a value but never used.","line":13,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { AuthGuard } from '@/lib/components/AuthGuard';\nimport { DashboardLayout } from '@/lib/components/DashboardLayout';\nimport { MarketplacePool, MarketplaceFilters } from '@/lib/api/user';\nimport { useInvestorWallet } from '@/lib/context/InvestorWalletContext';\nimport { useLanguage } from '@/lib/i18n/LanguageContext';\n\nfunction PoolInvestmentContent() {\n  const router = useRouter();\n  const { walletAddress } = useInvestorWallet();\n  const { t } = useLanguage();\n  // ... (keep demoPools as is for now, treating them as mock API data)\n  const demoPools: MarketplacePool[] = [\n    {\n      pool_id: 'demo-1',\n      invoice_id: 'INV-DEMO-001',\n      project_title: 'Kopi Arabika Gayo Batch #12',\n      grade: 'A',\n      min_yield: 10,\n      max_yield: 15,\n      tenor_days: 60,\n      tenor_display: '60 Hari',\n      funding_progress: 75,\n      target_amount: 500_000_000,\n      funded_amount: 375_000_000,\n      remaining_amount: 125_000_000,\n      priority_interest_rate: 10,\n      catalyst_interest_rate: 15,\n      priority_progress: 80,\n      catalyst_progress: 65,\n      priority_target: 300_000_000,\n      priority_funded: 240_000_000,\n      catalyst_target: 200_000_000,\n      catalyst_funded: 130_000_000,\n      buyer_country_flag: '🇩🇪',\n      buyer_country: 'Jerman',\n      buyer_country_risk: 'Low',\n      buyer_company_name: 'Buyer Jerman',\n      yield_range: '10% - 15%',\n      is_insured: true,\n      remaining_time: '12 hari tersisa',\n      is_fully_funded: false,\n    },\n    {\n      pool_id: 'demo-2',\n      invoice_id: 'INV-DEMO-002',\n      project_title: 'Udang Vaname Sulawesi #03',\n      grade: 'B',\n      min_yield: 12,\n      max_yield: 16,\n      tenor_days: 45,\n      tenor_display: '45 Hari',\n      funding_progress: 52,\n      target_amount: 320_000_000,\n      funded_amount: 166_400_000,\n      remaining_amount: 153_600_000,\n      priority_interest_rate: 12,\n      catalyst_interest_rate: 16,\n      priority_progress: 55,\n      catalyst_progress: 48,\n      priority_target: 200_000_000,\n      priority_funded: 110_000_000,\n      catalyst_target: 120_000_000,\n      catalyst_funded: 57_600_000,\n      buyer_country_flag: '🇸🇬',\n      buyer_country: 'Singapura',\n      buyer_country_risk: 'Medium',\n      buyer_company_name: 'Harbour Foods SG',\n      yield_range: '12% - 16%',\n      is_insured: false,\n      remaining_time: '9 hari tersisa',\n      is_fully_funded: false,\n    },\n    {\n      pool_id: 'demo-3',\n      invoice_id: 'INV-DEMO-003',\n      project_title: 'Rempah Maluku Batch #07',\n      grade: 'C',\n      min_yield: 14,\n      max_yield: 18,\n      tenor_days: 75,\n      tenor_display: '75 Hari',\n      funding_progress: 100,\n      target_amount: 410_000_000,\n      funded_amount: 410_000_000,\n      remaining_amount: 0,\n      priority_interest_rate: 14,\n      catalyst_interest_rate: 18,\n      priority_progress: 100,\n      catalyst_progress: 100,\n      priority_target: 250_000_000,\n      priority_funded: 250_000_000,\n      catalyst_target: 160_000_000,\n      catalyst_funded: 160_000_000,\n      buyer_country_flag: '🇳🇱',\n      buyer_country: 'Belanda',\n      buyer_country_risk: 'Low',\n      buyer_company_name: 'Dutch Spice BV',\n      yield_range: '14% - 18%',\n      is_insured: true,\n      remaining_time: 'Selesai',\n      is_fully_funded: true,\n    },\n  ];\n\n  const [pools] = useState<MarketplacePool[]>(demoPools);\n  const [error] = useState<string | null>(null);\n  const [filters, setFilters] = useState<MarketplaceFilters>({\n    sort_by: 'newest',\n    page: 1,\n    per_page: 10,\n  });\n  const totalPages = 1;\n  const [searchTerm, setSearchTerm] = useState('');\n  const [activeTab, setActiveTab] = useState<'open' | 'done'>('open');\n\n  const loading = false;\n\n  const handleFilterChange = (key: keyof MarketplaceFilters, value: string | number | boolean | undefined) => {\n    setFilters((prev) => ({\n      ...prev,\n      [key]: value,\n      page: 1,\n    }));\n  };\n\n  const handlePageChange = (page: number) => {\n    setFilters((prev) => ({ ...prev, page }));\n  };\n\n  const getGradeColor = (grade: string) => {\n    switch (grade) {\n      case 'A':\n        return 'bg-green-500/10 text-green-400 border-green-500/20';\n      case 'B':\n        return 'bg-yellow-500/10 text-yellow-400 border-yellow-500/20';\n      case 'C':\n        return 'bg-orange-500/10 text-orange-400 border-orange-500/20';\n      default:\n        return 'bg-slate-500/10 text-slate-400 border-slate-500/20';\n    }\n  };\n\n  const handleInvestClick = (pool: MarketplacePool) => {\n    router.push(`/pendana/marketplace/${pool.pool_id}`);\n  };\n\n  const filterBySearch = (items: MarketplacePool[]) => {\n    const term = searchTerm.trim().toLowerCase();\n    if (!term) return items;\n    return items.filter((pool) => {\n      const haystack = `${pool.project_title || ''} ${pool.buyer_company_name || ''} ${pool.grade || ''}`.toLowerCase();\n      return haystack.includes(term);\n    });\n  };\n\n  const sortPools = (items: MarketplacePool[]) => {\n    const { sort_by } = filters;\n    return [...items].sort((a, b) => {\n      if (sort_by === 'yield_desc') {\n        const maxA = a.max_yield ?? a.catalyst_interest_rate ?? a.priority_interest_rate ?? 0;\n        const maxB = b.max_yield ?? b.catalyst_interest_rate ?? b.priority_interest_rate ?? 0;\n        return maxB - maxA;\n      }\n      if (sort_by === 'tenor_asc') {\n        const tenorA = a.tenor_days ?? Number.MAX_SAFE_INTEGER;\n        const tenorB = b.tenor_days ?? Number.MAX_SAFE_INTEGER;\n        return tenorA - tenorB;\n      }\n      return (b.funding_progress || 0) - (a.funding_progress || 0);\n    });\n  };\n\n  const segmentedPools = () => {\n    const funded = pools.filter((pool) => (pool.funding_progress || 0) >= 100 || pool.is_fully_funded);\n    const open = pools.filter((pool) => (pool.funding_progress || 0) < 100 && !pool.is_fully_funded);\n    return { funded, open };\n  };\n\n  const { funded, open } = segmentedPools();\n  const tabPools = activeTab === 'open' ? open : funded;\n  const visiblePools = sortPools(filterBySearch(tabPools));\n\n  return (\n    <DashboardLayout role=\"investor\">\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-white\">{t('marketplace.title')}</h1>\n            <p className=\"text-slate-400 mt-1\">\n              {t('marketplace.subtitle')}\n            </p>\n          </div>\n        </div>\n\n        {/* Wallet already connected - no need for banner */}\n\n        <div className=\"space-y-3 p-4 bg-slate-800/30 border border-slate-700/50 rounded-xl\">\n          <div className=\"flex flex-wrap gap-2\">\n            <button\n              onClick={() => setActiveTab('open')}\n              className={`px-4 py-2 rounded-lg text-sm font-medium transition-all border ${activeTab === 'open'\n                ? 'bg-cyan-500/20 border-cyan-500/30 text-cyan-200'\n                : 'bg-slate-800/60 border-slate-700/60 text-slate-300 hover:text-white'\n                }`}\n            >\n              {t('marketplace.tabOpen')}\n            </button>\n            <button\n              onClick={() => setActiveTab('done')}\n              className={`px-4 py-2 rounded-lg text-sm font-medium transition-all border ${activeTab === 'done'\n                ? 'bg-emerald-500/20 border-emerald-500/30 text-emerald-200'\n                : 'bg-slate-800/60 border-slate-700/60 text-slate-300 hover:text-white'\n                }`}\n            >\n              {t('marketplace.tabDone')}\n            </button>\n          </div>\n\n          <div className=\"grid gap-3 md:grid-cols-3\">\n            <div className=\"md:col-span-2\">\n              <div className=\"relative\">\n                <input\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  placeholder={t('marketplace.searchPlaceholder')}\n                  className=\"w-full px-4 py-3 pl-11 rounded-xl bg-slate-800/40 border border-slate-700/60 text-slate-100 placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-cyan-500/50\"\n                />\n                <svg className=\"w-5 h-5 text-slate-500 absolute left-3.5 top-1/2 -translate-y-1/2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z\" />\n                </svg>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2 justify-end\">\n              <span className=\"text-sm text-slate-400\">{t('marketplace.sortBy')}:</span>\n              <select\n                value={filters.sort_by || 'newest'}\n                onChange={(e) => handleFilterChange('sort_by', e.target.value as MarketplaceFilters['sort_by'])}\n                className=\"px-3 py-2 bg-slate-800/40 border border-slate-700/60 rounded-lg text-sm text-slate-200 focus:outline-none focus:ring-2 focus:ring-cyan-500/50\"\n              >\n                <option value=\"yield_desc\">{t('marketplace.sortYield')}</option>\n                <option value=\"tenor_asc\">{t('marketplace.sortTenor')}</option>\n                <option value=\"newest\">{t('marketplace.sortNewest')}</option>\n              </select>\n            </div>\n          </div>\n\n          <div className=\"flex flex-wrap gap-4\">\n            <div className=\"flex items-center gap-2\">\n              <label className=\"text-sm text-slate-400\">{t('marketplace.filterGrade')}</label>\n              <select\n                value={filters.grade || ''}\n                onChange={(e) => handleFilterChange('grade', e.target.value || undefined)}\n                className=\"px-3 py-2 bg-slate-700/50 border border-slate-600/50 rounded-lg text-sm text-slate-200 focus:outline-none focus:border-cyan-500/50\"\n              >\n                <option value=\"\">{t('marketplace.filterAll')}</option>\n                <option value=\"A\">Grade A</option>\n                <option value=\"B\">Grade B</option>\n                <option value=\"C\">Grade C</option>\n              </select>\n            </div>\n\n            <div className=\"flex items-center gap-2\">\n              <label className=\"text-sm text-slate-400\">{t('marketplace.filterInsurance')}</label>\n              <select\n                value={filters.is_insured === undefined ? '' : filters.is_insured ? 'true' : 'false'}\n                onChange={(e) => {\n                  const val = e.target.value;\n                  handleFilterChange('is_insured', val === '' ? undefined : val === 'true');\n                }}\n                className=\"px-3 py-2 bg-slate-700/50 border border-slate-600/50 rounded-lg text-sm text-slate-200 focus:outline-none focus:border-cyan-500/50\"\n              >\n                <option value=\"\">{t('marketplace.filterAll')}</option>\n                <option value=\"true\">{t('marketplace.filterInsured')}</option>\n                <option value=\"false\">{t('marketplace.filterNotInsured')}</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {error ? (\n          <div className=\"p-6 bg-red-500/10 border border-red-500/20 rounded-xl text-center\">\n            <p className=\"text-red-400\">{error}</p>\n            <div className=\"mt-4 text-sm text-slate-500\">{t('common.refreshToRetry')}</div>\n          </div>\n        ) : visiblePools.length === 0 ? (\n          <div className=\"p-12 bg-slate-800/30 border border-slate-700/50 rounded-xl text-center\">\n            <svg className=\"w-16 h-16 mx-auto text-slate-600 mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4\" />\n            </svg>\n            <h3 className=\"text-lg font-semibold text-slate-300 mb-2\">{t('marketplace.noPoolsTitle')}</h3>\n            <p className=\"text-slate-500\">{t('marketplace.noPoolsDesc')}</p>\n          </div>\n        ) : (\n          <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n            {visiblePools.map((pool) => {\n              const isFullyFunded = (pool.funding_progress || 0) >= 100 || pool.is_fully_funded;\n              const minYield = pool.min_yield ?? pool.priority_interest_rate ?? 0;\n              const maxYield = pool.max_yield ?? pool.catalyst_interest_rate ?? pool.min_yield ?? 0;\n              const tenorText = pool.tenor_display || (pool.tenor_days ? `${pool.tenor_days} ${t('common.days')}` : 'Tenor n/a');\n              const buyerLabel = `${pool.buyer_country_flag || ''} ${pool.buyer_country || pool.buyer_company_name || 'Buyer'}`.trim();\n              const yieldRange = pool.yield_range || `${minYield}% - ${maxYield}%`;\n              return (\n                <div\n                  key={pool.pool_id}\n                  role=\"button\"\n                  tabIndex={0}\n                  onClick={() => router.push(`/pendana/marketplace/${pool.pool_id}`)}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' || e.key === ' ') {\n                      e.preventDefault();\n                      router.push(`/pendana/marketplace/${pool.pool_id}`);\n                    }\n                  }}\n                  className=\"relative p-5 bg-slate-800/30 border border-slate-700/50 rounded-xl backdrop-blur-sm hover:border-cyan-500/30 transition-all group overflow-hidden cursor-pointer\"\n                >\n                  {isFullyFunded && (\n                    <div className=\"absolute inset-0 bg-slate-900/70 border border-cyan-500/30 backdrop-blur-sm flex items-center justify-center text-cyan-300 font-semibold uppercase tracking-wide\">\n                      {t('marketplace.fullyFunded')}\n                    </div>\n                  )}\n                  <div className=\"flex items-start justify-between mb-4\">\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"text-lg font-semibold text-white truncate group-hover:text-cyan-400 transition-colors\">\n                        {pool.project_title || 'Kopi Arabika Gayo Batch #12'}\n                      </h3>\n                      <div className=\"flex items-center gap-2 mt-1\">\n                        <span className=\"text-lg\" aria-hidden>{pool.buyer_country_flag || '🇮🇩'}</span>\n                        <span className=\"text-sm text-slate-400 truncate\">{buyerLabel || 'Buyer'}</span>\n                      </div>\n                    </div>\n                    <span className={`px-2 py-1 rounded text-xs font-medium border ${getGradeColor(pool.grade)}`}>\n                      {pool.grade}\n                    </span>\n                  </div>\n\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-slate-400\">{t('marketplace.yield')}</span>\n                      <span className=\"text-cyan-300 font-semibold\">{yieldRange} p.a</span>\n                    </div>\n\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-slate-400\">{t('marketplace.target')}</span>\n                      <span className=\"text-slate-200 font-medium\">\n                        IDRX {pool.target_amount?.toLocaleString('id-ID') || 0}\n                      </span>\n                    </div>\n\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-slate-400\">{t('marketplace.tenor')}</span>\n                      <span className=\"text-slate-200\">{tenorText}</span>\n                    </div>\n\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-slate-400\">{t('marketplace.progress')}</span>\n                      <span className=\"text-cyan-400 font-medium\">{(pool.funding_progress || 0).toFixed(1)}%</span>\n                    </div>\n\n                    <div className=\"pt-3 border-t border-slate-700/50\">\n                      <div className=\"flex items-center justify-between text-sm mb-2\">\n                        <span className=\"text-slate-400\">{t('marketplace.fundingProgress')}</span>\n                        <span className=\"text-cyan-400 font-medium\">{(pool.funding_progress || 0).toFixed(1)}%</span>\n                      </div>\n                      <div className=\"w-full bg-slate-700 rounded-full h-2 overflow-hidden\">\n                        <div\n                          className=\"bg-gradient-to-r from-cyan-500 to-teal-500 h-2 rounded-full transition-all\"\n                          style={{ width: `${Math.min(pool.funding_progress || 0, 100)}%` }}\n                        />\n                      </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-2 pt-2\">\n                      <div className=\"p-2 bg-cyan-500/10 rounded-lg\">\n                        <p className=\"text-xs text-slate-400\">{t('marketplace.priority')}</p>\n                        <p className=\"text-sm font-medium text-cyan-400\">{pool.priority_interest_rate || pool.min_yield}% p.a</p>\n                        <div className=\"w-full bg-slate-700 rounded-full h-1 mt-1\">\n                          <div\n                            className=\"bg-cyan-400 h-1 rounded-full\"\n                            style={{ width: `${Math.min(pool.priority_progress || 0, 100)}%` }}\n                          />\n                        </div>\n                      </div>\n                      <div className=\"p-2 bg-teal-500/10 rounded-lg\">\n                        <p className=\"text-xs text-slate-400\">{t('marketplace.catalyst')}</p>\n                        <p className=\"text-sm font-medium text-teal-400\">{pool.catalyst_interest_rate || pool.max_yield}% p.a</p>\n                        <div className=\"w-full bg-slate-700 rounded-full h-1 mt-1\">\n                          <div\n                            className=\"bg-teal-400 h-1 rounded-full\"\n                            style={{ width: `${Math.min(pool.catalyst_progress || 0, 100)}%` }}\n                          />\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"flex items-center justify-between pt-2\">\n                      <div className=\"flex items-center gap-2\">\n                        {pool.is_insured && (\n                          <span className=\"px-2 py-1 bg-blue-500/10 text-blue-400 text-xs font-medium rounded border border-blue-500/20\">\n                            {t('marketplace.filterInsured')}\n                          </span>\n                        )}\n                        {pool.remaining_time && (\n                          <span className=\"text-xs text-slate-500\">\n                            {/* Keep demo data or use simple check. Demo data has '12 hari tersisa', which contains 'hari'. I'll try to use translation if possible or just render string */}\n                            {pool.remaining_time.includes('hari') ?\n                              pool.remaining_time.replace('hari tersisa', t('marketplace.daysRemaining'))\n                              : pool.remaining_time === 'Selesai' ? t('marketplace.finished') : pool.remaining_time\n                            }\n                          </span>\n                        )}\n                      </div>\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleInvestClick(pool);\n                        }}\n                        className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${isFullyFunded\n                          ? 'bg-slate-600 text-slate-400 cursor-not-allowed'\n                          : 'bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-400 hover:to-teal-400 text-white shadow-lg shadow-cyan-500/25'\n                          }`}\n                        disabled={isFullyFunded}\n                      >\n                        {isFullyFunded ? t('marketplace.funded') : t('marketplace.invest')}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n\n        {!loading && !error && visiblePools.length > 0 && totalPages > 1 && (\n          <div className=\"flex items-center justify-center gap-2 pt-4\">\n            <button\n              onClick={() => handlePageChange((filters.page || 1) - 1)}\n              disabled={(filters.page || 1) <= 1}\n              className=\"p-2 bg-slate-800/50 border border-slate-700/50 rounded-lg text-slate-400 hover:text-white hover:border-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n            </button>\n            <span className=\"px-4 py-2 text-sm text-slate-400\">\n              {/* t('common.pagination', {current: filters.page || 1, total: totalPages}) but need interpolation support. \n                  Assume t() supports interpolation or just concat. \n                  My t() hook is simple. I'll just concat for now or use placeholders if supported.\n                  Checking LanguageContext... usually t(key, params).\n                  I'll assume it does, if not I'll concat.\n               */}\n              {t('common.pagination').replace('{{current}}', String(filters.page || 1)).replace('{{total}}', String(totalPages))}\n            </span>\n            <button\n              onClick={() => handlePageChange((filters.page || 1) + 1)}\n              disabled={(filters.page || 1) >= totalPages}\n              className=\"p-2 bg-slate-800/50 border border-slate-700/50 rounded-lg text-slate-400 hover:text-white hover:border-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n              </svg>\n            </button>\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  );\n}\n\nexport default function PoolInvestmentPage() {\n  return (\n    <AuthGuard allowedRoles={['investor']}>\n      <PoolInvestmentContent />\n    </AuthGuard>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/pendana/pencairan-dana/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/pendana/portfolio/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":35,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport { AuthGuard } from '@/lib/components/AuthGuard';\nimport { DashboardLayout } from '@/lib/components/DashboardLayout';\nimport { investmentAPI, InvestorPortfolio, ActiveInvestment } from '@/lib/api/user';\nimport Link from 'next/link';\n\nfunction PortfolioContent() {\n  const [portfolio, setPortfolio] = useState<InvestorPortfolio | null>(null);\n  const [investments, setInvestments] = useState<ActiveInvestment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n\n  useEffect(() => {\n    const loadData = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const [portfolioRes, investmentsRes] = await Promise.all([\n          investmentAPI.getPortfolio(),\n          investmentAPI.getActiveInvestments(page, 10),\n        ]);\n\n        if (portfolioRes.success && portfolioRes.data) {\n          setPortfolio(portfolioRes.data);\n        }\n\n        if (investmentsRes.success && investmentsRes.data) {\n          setInvestments(investmentsRes.data.investments || []);\n          setTotalPages(investmentsRes.data.total_pages || 1);\n        }\n      } catch (err) {\n        setError('Gagal memuat data portfolio');\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadData();\n  }, [page]);\n\n  const getStatusColor = (color: string) => {\n    switch (color) {\n      case 'green':\n        return 'bg-green-500/10 text-green-400 border-green-500/20';\n      case 'yellow':\n        return 'bg-yellow-500/10 text-yellow-400 border-yellow-500/20';\n      case 'red':\n        return 'bg-red-500/10 text-red-400 border-red-500/20';\n      default:\n        return 'bg-slate-500/10 text-slate-400 border-slate-500/20';\n    }\n  };\n\n  const getTrancheColor = (tranche: string) => {\n    return tranche === 'priority'\n      ? 'bg-cyan-500/10 text-cyan-400 border-cyan-500/20'\n      : 'bg-teal-500/10 text-teal-400 border-teal-500/20';\n  };\n\n  if (loading) {\n    return (\n      <DashboardLayout role=\"investor\">\n        <div className=\"min-h-[60vh] flex items-center justify-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400\"></div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  if (error) {\n    return (\n      <DashboardLayout role=\"investor\">\n        <div className=\"p-6 bg-red-500/10 border border-red-500/20 rounded-xl text-center\">\n          <p className=\"text-red-400\">{error}</p>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"mt-4 px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg text-sm font-medium transition-all\"\n          >\n            Coba Lagi\n          </button>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  const priorityPercent = portfolio\n    ? ((portfolio.priority_allocation / (portfolio.priority_allocation + portfolio.catalyst_allocation || 1)) * 100) || 0\n    : 0;\n  const catalystPercent = 100 - priorityPercent;\n\n  return (\n    <DashboardLayout role=\"investor\">\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-white\">Portfolio</h1>\n            <p className=\"text-slate-400 mt-1\">Ringkasan investasi dan pendanaan aktif Anda</p>\n          </div>\n          <Link\n            href=\"/pendana/marketplace\"\n            className=\"px-4 py-2 bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-400 hover:to-teal-400 rounded-lg font-medium text-sm text-white transition-all shadow-lg shadow-cyan-500/25\"\n          >\n            Investasi Baru\n          </Link>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n          <div className=\"p-5 bg-slate-800/30 border border-slate-700/50 rounded-xl backdrop-blur-sm\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <div className=\"p-2 bg-cyan-500/10 rounded-lg text-cyan-400\">\n                <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n              </div>\n            </div>\n            <p className=\"text-slate-400 text-sm\">Total Pendanaan Aktif</p>\n            <p className=\"text-xl font-bold text-white mt-1\">\n              Rp {(portfolio?.total_funding || 0).toLocaleString('id-ID')}\n            </p>\n          </div>\n\n          <div className=\"p-5 bg-slate-800/30 border border-slate-700/50 rounded-xl backdrop-blur-sm\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <div className=\"p-2 bg-green-500/10 rounded-lg text-green-400\">\n                <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\" />\n                </svg>\n              </div>\n            </div>\n            <p className=\"text-slate-400 text-sm\">Estimasi Imbal Hasil</p>\n            <p className=\"text-xl font-bold text-green-400 mt-1\">\n              Rp {(portfolio?.total_expected_gain || 0).toLocaleString('id-ID')}\n            </p>\n          </div>\n\n          <div className=\"p-5 bg-slate-800/30 border border-slate-700/50 rounded-xl backdrop-blur-sm\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <div className=\"p-2 bg-teal-500/10 rounded-lg text-teal-400\">\n                <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n              </div>\n            </div>\n            <p className=\"text-slate-400 text-sm\">Profit Terealisasi</p>\n            <p className=\"text-xl font-bold text-teal-400 mt-1\">\n              Rp {(portfolio?.total_realized_gain || 0).toLocaleString('id-ID')}\n            </p>\n          </div>\n\n          <div className=\"p-5 bg-slate-800/30 border border-slate-700/50 rounded-xl backdrop-blur-sm\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <div className=\"p-2 bg-purple-500/10 rounded-lg text-purple-400\">\n                <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z\" />\n                </svg>\n              </div>\n            </div>\n            <p className=\"text-slate-400 text-sm\">Saldo Tersedia</p>\n            <p className=\"text-xl font-bold text-white mt-1\">\n              Rp {(portfolio?.available_balance || 0).toLocaleString('id-ID')}\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid lg:grid-cols-3 gap-6\">\n          <div className=\"p-6 bg-slate-800/30 border border-slate-700/50 rounded-xl backdrop-blur-sm\">\n            <h2 className=\"text-lg font-semibold text-white mb-4\">Alokasi Dana</h2>\n            <div className=\"flex items-center justify-center mb-6\">\n              <div className=\"relative w-40 h-40\">\n                <svg className=\"w-full h-full transform -rotate-90\" viewBox=\"0 0 100 100\">\n                  <circle\n                    cx=\"50\"\n                    cy=\"50\"\n                    r=\"40\"\n                    fill=\"none\"\n                    stroke=\"#1e293b\"\n                    strokeWidth=\"12\"\n                  />\n                  <circle\n                    cx=\"50\"\n                    cy=\"50\"\n                    r=\"40\"\n                    fill=\"none\"\n                    stroke=\"#06b6d4\"\n                    strokeWidth=\"12\"\n                    strokeDasharray={`${priorityPercent * 2.51} 251`}\n                    strokeLinecap=\"round\"\n                  />\n                  <circle\n                    cx=\"50\"\n                    cy=\"50\"\n                    r=\"40\"\n                    fill=\"none\"\n                    stroke=\"#14b8a6\"\n                    strokeWidth=\"12\"\n                    strokeDasharray={`${catalystPercent * 2.51} 251`}\n                    strokeDashoffset={`${-priorityPercent * 2.51}`}\n                    strokeLinecap=\"round\"\n                  />\n                </svg>\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <div className=\"text-center\">\n                    <p className=\"text-2xl font-bold text-white\">{portfolio?.active_investments || 0}</p>\n                    <p className=\"text-xs text-slate-400\">Aktif</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-3 h-3 bg-cyan-400 rounded-full\" />\n                  <span className=\"text-sm text-slate-300\">Priority</span>\n                </div>\n                <span className=\"text-sm font-medium text-white\">\n                  Rp {(portfolio?.priority_allocation || 0).toLocaleString('id-ID')}\n                </span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-3 h-3 bg-teal-400 rounded-full\" />\n                  <span className=\"text-sm text-slate-300\">Catalyst</span>\n                </div>\n                <span className=\"text-sm font-medium text-white\">\n                  Rp {(portfolio?.catalyst_allocation || 0).toLocaleString('id-ID')}\n                </span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"p-6 bg-slate-800/30 border border-slate-700/50 rounded-xl backdrop-blur-sm\">\n            <h2 className=\"text-lg font-semibold text-white mb-4\">Statistik</h2>\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg\">\n                <span className=\"text-slate-400\">Investasi Aktif</span>\n                <span className=\"text-xl font-bold text-cyan-400\">{portfolio?.active_investments || 0}</span>\n              </div>\n              <div className=\"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg\">\n                <span className=\"text-slate-400\">Deal Selesai</span>\n                <span className=\"text-xl font-bold text-green-400\">{portfolio?.completed_deals || 0}</span>\n              </div>\n              <div className=\"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg\">\n                <span className=\"text-slate-400\">Total Investasi</span>\n                <span className=\"text-xl font-bold text-white\">\n                  {(portfolio?.active_investments || 0) + (portfolio?.completed_deals || 0)}\n                </span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"p-6 bg-slate-800/30 border border-slate-700/50 rounded-xl backdrop-blur-sm\">\n            <h2 className=\"text-lg font-semibold text-white mb-4\">Ringkasan</h2>\n            <div className=\"space-y-4\">\n              <div>\n                <p className=\"text-sm text-slate-400 mb-1\">Total Modal Disalurkan</p>\n                <p className=\"text-lg font-bold text-white\">\n                  Rp {(portfolio?.total_funding || 0).toLocaleString('id-ID')}\n                </p>\n              </div>\n              <div>\n                <p className=\"text-sm text-slate-400 mb-1\">Estimasi Total Return</p>\n                <p className=\"text-lg font-bold text-green-400\">\n                  Rp {((portfolio?.total_funding || 0) + (portfolio?.total_expected_gain || 0)).toLocaleString('id-ID')}\n                </p>\n              </div>\n              <div className=\"pt-3 border-t border-slate-700/50\">\n                <p className=\"text-sm text-slate-400 mb-1\">Yield Rata-rata</p>\n                <p className=\"text-lg font-bold text-cyan-400\">\n                  {portfolio?.total_funding && portfolio.total_expected_gain\n                    ? ((portfolio.total_expected_gain / portfolio.total_funding) * 100).toFixed(1)\n                    : 0}\n                  %\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-slate-800/30 border border-slate-700/50 rounded-xl backdrop-blur-sm overflow-hidden\">\n          <div className=\"p-6 border-b border-slate-700/50\">\n            <h2 className=\"text-lg font-semibold text-white\">Investasi Aktif</h2>\n          </div>\n\n          {investments.length === 0 ? (\n            <div className=\"p-12 text-center\">\n              <svg className=\"w-16 h-16 mx-auto text-slate-600 mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4\" />\n              </svg>\n              <h3 className=\"text-lg font-semibold text-slate-300 mb-2\">Belum Ada Investasi</h3>\n              <p className=\"text-slate-500 mb-4\">Mulai investasi pertama Anda untuk melihat portfolio.</p>\n              <Link\n                href=\"/pendana/marketplace\"\n                className=\"inline-flex px-4 py-2 bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-400 hover:to-teal-400 rounded-lg font-medium text-sm text-white transition-all\"\n              >\n                Mulai Investasi\n              </Link>\n            </div>\n          ) : (\n            <>\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead>\n                    <tr className=\"text-left text-slate-400 text-sm border-b border-slate-700/50\">\n                      <th className=\"px-6 py-4 font-medium\">Proyek</th>\n                      <th className=\"px-6 py-4 font-medium\">Tranche</th>\n                      <th className=\"px-6 py-4 font-medium\">Modal</th>\n                      <th className=\"px-6 py-4 font-medium\">Return</th>\n                      <th className=\"px-6 py-4 font-medium\">Jatuh Tempo</th>\n                      <th className=\"px-6 py-4 font-medium\">Status</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-slate-700/50\">\n                    {investments.map((inv) => (\n                      <tr key={inv.investment_id} className=\"hover:bg-slate-800/30\">\n                        <td className=\"px-6 py-4\">\n                          <p className=\"text-white font-medium\">{inv.project_name}</p>\n                          <div className=\"flex items-center gap-1 text-sm text-slate-400 mt-1\">\n                            <span>{inv.buyer_flag}</span>\n                            <span>{inv.buyer_name}</span>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <span className={`px-2 py-1 rounded text-xs font-medium border ${getTrancheColor(inv.tranche)}`}>\n                            {inv.tranche_display}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <p className=\"text-white font-medium\">Rp {inv.principal.toLocaleString('id-ID')}</p>\n                          <p className=\"text-xs text-slate-400\">{inv.interest_rate}% p.a</p>\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <p className=\"text-green-400 font-medium\">+Rp {inv.estimated_return.toLocaleString('id-ID')}</p>\n                          <p className=\"text-xs text-slate-400\">Total: Rp {inv.total_expected.toLocaleString('id-ID')}</p>\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <p className=\"text-white\">{new Date(inv.due_date).toLocaleDateString('id-ID')}</p>\n                          <p className=\"text-xs text-slate-400\">{inv.days_remaining} hari lagi</p>\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <span className={`px-2 py-1 rounded text-xs font-medium border ${getStatusColor(inv.status_color)}`}>\n                            {inv.status_display}\n                          </span>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n\n              {totalPages > 1 && (\n                <div className=\"flex items-center justify-center gap-2 p-4 border-t border-slate-700/50\">\n                  <button\n                    onClick={() => setPage(Math.max(1, page - 1))}\n                    disabled={page <= 1}\n                    className=\"p-2 bg-slate-800/50 border border-slate-700/50 rounded-lg text-slate-400 hover:text-white hover:border-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\n                  >\n                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n                    </svg>\n                  </button>\n                  <span className=\"px-4 py-2 text-sm text-slate-400\">\n                    Halaman {page} dari {totalPages}\n                  </span>\n                  <button\n                    onClick={() => setPage(Math.min(totalPages, page + 1))}\n                    disabled={page >= totalPages}\n                    className=\"p-2 bg-slate-800/50 border border-slate-700/50 rounded-lg text-slate-400 hover:text-white hover:border-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\n                  >\n                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                    </svg>\n                  </button>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </DashboardLayout>\n  );\n}\n\nexport default function PortfolioPage() {\n  return (\n    <AuthGuard allowedRoles={['investor']}>\n      <PortfolioContent />\n    </AuthGuard>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/pendana/risk-assessment/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":77,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":77,"endColumn":19},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'demoQuestions'. Either include it or remove the dependency array.","line":85,"column":6,"nodeType":"ArrayExpression","endLine":85,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [demoQuestions]","fix":{"range":[2839,2841],"text":"[demoQuestions]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":124,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":124,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { AuthGuard } from '@/lib/components/AuthGuard';\nimport { DashboardLayout } from '@/lib/components/DashboardLayout';\nimport {\n  riskQuestionnaireAPI,\n  RiskQuestion,\n  RiskQuestionnaireStatusResponse,\n} from '@/lib/api/user';\nimport { useLanguage } from '@/lib/i18n/LanguageContext';\n\nfunction RiskAssessmentContent() {\n  const router = useRouter();\n  const { t } = useLanguage();\n  const [questions, setQuestions] = useState<RiskQuestion[]>([]);\n  // ... (keep state variables)\n  const [answers, setAnswers] = useState<{ [key: number]: number }>({});\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [status, setStatus] = useState<RiskQuestionnaireStatusResponse | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [currentStep, setCurrentStep] = useState(0);\n\n  // Demo questions to use when API fails - kept as fallback data\n  const demoQuestions: RiskQuestion[] = [\n    {\n      id: 1,\n      question: 'Berapa lama pengalaman investasi Anda?',\n      options: [\n        { value: 1, label: 'Kurang dari 1 tahun' },\n        { value: 2, label: '1-3 tahun' },\n        { value: 3, label: 'Lebih dari 3 tahun' },\n      ],\n    },\n    {\n      id: 2,\n      question: 'Bagaimana sikap Anda terhadap risiko investasi?',\n      options: [\n        { value: 1, label: 'Saya lebih memilih keamanan meski return rendah' },\n        { value: 2, label: 'Saya bersedia mengambil risiko untuk return lebih tinggi' },\n      ],\n    },\n    {\n      id: 3,\n      question: 'Apa yang akan Anda lakukan jika nilai investasi turun 20%?',\n      options: [\n        { value: 1, label: 'Menarik dana segera' },\n        { value: 2, label: 'Menahan dan menunggu pemulihan' },\n      ],\n    },\n  ];\n\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        // Check existing status first\n        const statusRes = await riskQuestionnaireAPI.getStatus();\n        if (statusRes.success && statusRes.data) {\n          setStatus(statusRes.data);\n          if (statusRes.data.completed) {\n            // Already completed, show result\n            setLoading(false);\n            return;\n          }\n        }\n\n        // Load questions from API\n        const questionsRes = await riskQuestionnaireAPI.getQuestions();\n        if (questionsRes.success && questionsRes.data && questionsRes.data.questions.length > 0) {\n          setQuestions(questionsRes.data.questions);\n        } else {\n          // Use demo questions if API fails\n          setQuestions(demoQuestions);\n        }\n      } catch (err) {\n        // Use demo questions on error\n        setQuestions(demoQuestions);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadData();\n  }, []);\n\n  const handleAnswerSelect = (questionId: number, value: number) => {\n    setAnswers((prev) => ({ ...prev, [questionId]: value }));\n  };\n\n  const handleNext = () => {\n    if (currentStep < questions.length - 1) {\n      setCurrentStep(currentStep + 1);\n    }\n  };\n\n  const handlePrev = () => {\n    if (currentStep > 0) {\n      setCurrentStep(currentStep - 1);\n    }\n  };\n\n  const handleSubmit = async () => {\n    if (Object.keys(answers).length !== questions.length) {\n      setError(t('riskAssessment.answerAll') || 'Harap jawab semua pertanyaan');\n      return;\n    }\n\n    setSubmitting(true);\n    setError(null);\n\n    try {\n      const res = await riskQuestionnaireAPI.submit({\n        q1_answer: answers[1],\n        q2_answer: answers[2],\n        q3_answer: answers[3],\n      });\n\n      if (res.success && res.data) {\n        setStatus(res.data);\n      } else {\n        setError(res.error?.message || t('riskAssessment.saveError') || 'Gagal menyimpan jawaban');\n      }\n    } catch (err) {\n      setError(t('common.errorOccurred') || 'Terjadi kesalahan');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handleRetake = () => {\n    setStatus(null);\n    setAnswers({});\n    setCurrentStep(0);\n  };\n\n  if (loading) {\n    return (\n      <DashboardLayout role=\"investor\">\n        <div className=\"min-h-[60vh] flex items-center justify-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-cyan-400\"></div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  // Show result if completed\n  if (status?.completed) {\n    return (\n      <DashboardLayout role=\"investor\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"p-8 bg-slate-800/30 border border-slate-700/50 rounded-xl backdrop-blur-sm text-center\">\n            <div\n              className={`w-20 h-20 mx-auto mb-6 rounded-full flex items-center justify-center ${status.catalyst_unlocked\n                ? 'bg-green-500/20 text-green-400'\n                : 'bg-yellow-500/20 text-yellow-400'\n                }`}\n            >\n              {status.catalyst_unlocked ? (\n                <svg className=\"w-10 h-10\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n              ) : (\n                <svg className=\"w-10 h-10\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                </svg>\n              )}\n            </div>\n\n            <h1 className=\"text-2xl font-bold text-white mb-2\">\n              {status.catalyst_unlocked ? t('riskAssessment.catalystUnlocked') : t('riskAssessment.assessmentCompleted')}\n            </h1>\n\n            <p className=\"text-slate-400 mb-6\">{status.message}</p>\n\n            <div className=\"p-4 bg-slate-700/30 rounded-lg mb-6\">\n              <h3 className=\"text-sm font-medium text-slate-300 mb-3\">{t('riskAssessment.yourTrancheAccess')}</h3>\n              <div className=\"flex justify-center gap-4\">\n                <div className=\"px-4 py-2 bg-cyan-500/20 border border-cyan-500/30 rounded-lg\">\n                  <span className=\"text-cyan-400 font-medium\">{t('riskAssessment.priorityTranche') || 'Priority Tranche'}</span>\n                  <p className=\"text-xs text-slate-400 mt-1\">{t('riskAssessment.priorityDescription')}</p>\n                </div>\n                <div\n                  className={`px-4 py-2 rounded-lg ${status.catalyst_unlocked\n                    ? 'bg-teal-500/20 border border-teal-500/30'\n                    : 'bg-slate-600/20 border border-slate-600/30'\n                    }`}\n                >\n                  <span\n                    className={`font-medium ${status.catalyst_unlocked ? 'text-teal-400' : 'text-slate-500'\n                      }`}\n                  >\n                    {t('riskAssessment.catalystTranche') || 'Catalyst Tranche'}\n                  </span>\n                  <p className=\"text-xs text-slate-400 mt-1\">\n                    {status.catalyst_unlocked ? t('riskAssessment.catalystDescription') : t('riskAssessment.locked')}\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex gap-3 justify-center\">\n              <button\n                onClick={handleRetake}\n                className=\"px-4 py-2 bg-slate-700/50 hover:bg-slate-700 border border-slate-600 rounded-lg text-sm font-medium text-slate-200 transition-all\"\n              >\n                {t('riskAssessment.retakeAssessment')}\n              </button>\n              <button\n                onClick={() => router.push('/pendana/marketplace')}\n                className=\"px-4 py-2 bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-400 hover:to-teal-400 rounded-lg text-sm font-medium text-white transition-all\"\n              >\n                {t('riskAssessment.startInvesting')}\n              </button>\n            </div>\n          </div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  // Show questionnaire\n  const currentQuestion = questions[currentStep];\n  const isLastQuestion = currentStep === questions.length - 1;\n  const allAnswered = Object.keys(answers).length === questions.length;\n\n  return (\n    <DashboardLayout role=\"investor\">\n      <div className=\"max-w-2xl mx-auto\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-2xl font-bold text-white mb-2\">{t('riskAssessment.title')}</h1>\n          <p className=\"text-slate-400\">\n            {t('riskAssessment.subtitle')}\n          </p>\n        </div>\n\n        {/* Progress */}\n        <div className=\"mb-8\">\n          <div className=\"flex items-center justify-between text-sm text-slate-400 mb-2\">\n            <span>\n              {t('riskAssessment.question')} {currentStep + 1} {t('riskAssessment.of')} {questions.length || 1}\n            </span>\n            <span>{questions.length > 0 ? Math.round(((currentStep + 1) / questions.length) * 100) : 0}%</span>\n          </div>\n          <div className=\"w-full bg-slate-700 rounded-full h-2\">\n            <div\n              className=\"bg-gradient-to-r from-cyan-500 to-teal-500 h-2 rounded-full transition-all duration-300\"\n              style={{ width: `${questions.length > 0 ? ((currentStep + 1) / questions.length) * 100 : 0}%` }}\n            />\n          </div>\n        </div>\n\n        {error && (\n          <div className=\"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm\">\n            {error}\n          </div>\n        )}\n\n        {/* Question Card */}\n        {currentQuestion && (\n          <div className=\"p-6 bg-slate-800/30 border border-slate-700/50 rounded-xl backdrop-blur-sm\">\n            <h2 className=\"text-lg font-semibold text-white mb-6\">{currentQuestion.question}</h2>\n\n            <div className=\"space-y-3\">\n              {currentQuestion.options.map((option) => (\n                <button\n                  key={option.value}\n                  onClick={() => handleAnswerSelect(currentQuestion.id, option.value)}\n                  className={`w-full p-4 rounded-lg border text-left transition-all ${answers[currentQuestion.id] === option.value\n                    ? 'bg-cyan-500/20 border-cyan-500/50 text-white'\n                    : 'bg-slate-700/30 border-slate-600/50 text-slate-300 hover:bg-slate-700/50 hover:border-slate-500'\n                    }`}\n                >\n                  <div className=\"flex items-center space-x-3\">\n                    <div\n                      className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${answers[currentQuestion.id] === option.value\n                        ? 'border-cyan-400 bg-cyan-400'\n                        : 'border-slate-500'\n                        }`}\n                    >\n                      {answers[currentQuestion.id] === option.value && (\n                        <svg className=\"w-3 h-3 text-slate-900\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path\n                            fillRule=\"evenodd\"\n                            d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\"\n                            clipRule=\"evenodd\"\n                          />\n                        </svg>\n                      )}\n                    </div>\n                    <span>{option.label}</span>\n                  </div>\n                </button>\n              ))}\n            </div>\n\n            {/* Navigation */}\n            <div className=\"flex justify-between mt-8\">\n              <button\n                onClick={handlePrev}\n                disabled={currentStep === 0}\n                className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${currentStep === 0\n                  ? 'text-slate-500 cursor-not-allowed'\n                  : 'text-slate-300 hover:text-white bg-slate-700/50 hover:bg-slate-700'\n                  }`}\n              >\n                {t('common.prev')}\n              </button>\n\n              {isLastQuestion ? (\n                <button\n                  onClick={handleSubmit}\n                  disabled={!allAnswered || submitting}\n                  className={`px-6 py-2 rounded-lg text-sm font-medium transition-all ${allAnswered && !submitting\n                    ? 'bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-400 hover:to-teal-400 text-white'\n                    : 'bg-slate-600 text-slate-400 cursor-not-allowed'\n                    }`}\n                >\n                  {submitting ? t('riskAssessment.saving') : t('riskAssessment.sendAnswers')}\n                </button>\n              ) : (\n                <button\n                  onClick={handleNext}\n                  disabled={!answers[currentQuestion.id]}\n                  className={`px-6 py-2 rounded-lg text-sm font-medium transition-all ${answers[currentQuestion.id]\n                    ? 'bg-cyan-500 hover:bg-cyan-400 text-white'\n                    : 'bg-slate-600 text-slate-400 cursor-not-allowed'\n                    }`}\n                >\n                  {t('common.next')}\n                </button>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Info Box */}\n        <div className=\"mt-6 p-4 bg-slate-800/20 border border-slate-700/30 rounded-lg\">\n          <div className=\"flex items-start space-x-3\">\n            <svg className=\"w-5 h-5 text-cyan-400 mt-0.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n            <div>\n              <p className=\"text-sm text-slate-300 font-medium\">{t('riskAssessment.aboutTranches')}</p>\n              <p className=\"text-xs text-slate-400 mt-1\">\n                {t('riskAssessment.priorityInfo')}\n                <br />\n                {t('riskAssessment.catalystInfo')}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </DashboardLayout>\n  );\n}\n\nexport default function RiskAssessmentPage() {\n  return (\n    <AuthGuard allowedRoles={['investor']}>\n      <RiskAssessmentContent />\n    </AuthGuard>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/register/kredensial/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/register/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'otpExpiresAt' is assigned a value but never used.","line":51,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":22},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/app/register/page.tsx:60:7\n  58 |   useEffect(() => {\n  59 |     if (step === 'details') {\n> 60 |       setUsername('');\n     |       ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  61 |       setPassword('');\n  62 |       setConfirmPassword('');\n  63 |       setCooperativeAgreement(false);","line":60,"column":7,"nodeType":null,"endLine":60,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { useAuth } from '@/lib/context/AuthContext';\nimport { useLanguage } from '@/lib/i18n/LanguageContext';\nimport { authAPI } from '@/lib/api/auth';\n\ndeclare global {\n  interface Window {\n    google?: {\n      accounts: {\n        id: {\n          initialize: (config: {\n            client_id: string;\n            callback: (response: { credential: string }) => void;\n          }) => void;\n          prompt: () => void;\n        };\n      };\n    };\n  }\n}\n\ntype RegistrationStep = 'email' | 'otp' | 'details';\n\nexport default function RegisterPage() {\n  // Step state\n  const [step, setStep] = useState<RegistrationStep>('email');\n\n  // Form fields\n  const [email, setEmail] = useState('');\n  const [otpCode, setOtpCode] = useState('');\n  const [otpToken, setOtpToken] = useState('');\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [cooperativeAgreement, setCooperativeAgreement] = useState(false);\n\n  // Company fields (mitra-specific)\n  const [companyName, setCompanyName] = useState('');\n  const [companyType, setCompanyType] = useState('PT');\n  const [npwp, setNpwp] = useState('');\n  const [annualRevenue, setAnnualRevenue] = useState('');\n\n  // UI state\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [otpExpiresAt, setOtpExpiresAt] = useState<string>('');\n\n  const router = useRouter();\n  const { sendOTP, verifyOTP, register } = useAuth();\n  const { t } = useLanguage();\n\n  // Clear form inputs when entering details step\n  useEffect(() => {\n    if (step === 'details') {\n      setUsername('');\n      setPassword('');\n      setConfirmPassword('');\n      setCooperativeAgreement(false);\n      setCompanyName('');\n      setCompanyType('PT');\n      setNpwp('');\n      setAnnualRevenue('');\n      setError('');\n    }\n  }, [step]);\n\n  // Google Sign-In handler\n  const handleGoogleCallback = useCallback(async (response: { credential: string }) => {\n    setError('');\n    setIsLoading(true);\n\n    try {\n      const result = await authAPI.googleAuth({ id_token: response.credential });\n\n      if (result.success && result.data) {\n        // Set email and OTP token from Google auth\n        setEmail(result.data.email);\n        setOtpToken(result.data.otp_token);\n        // Skip directly to details step (no OTP needed)\n        setStep('details');\n      } else {\n        setError(result.error?.message || 'Google authentication failed');\n      }\n    } catch {\n      setError('Failed to authenticate with Google');\n    }\n\n    setIsLoading(false);\n  }, []);\n\n  // Load Google Sign-In script\n  useEffect(() => {\n    const googleClientId = process.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID;\n    if (!googleClientId) return;\n\n    // Load Google Sign-In script\n    const script = document.createElement('script');\n    script.src = 'https://accounts.google.com/gsi/client';\n    script.async = true;\n    script.defer = true;\n    script.onload = () => {\n      if (window.google) {\n        window.google.accounts.id.initialize({\n          client_id: googleClientId,\n          callback: handleGoogleCallback,\n        });\n      }\n    };\n    document.body.appendChild(script);\n\n    return () => {\n      document.body.removeChild(script);\n    };\n  }, [handleGoogleCallback]);\n\n  const handleGoogleSignUp = () => {\n    if (window.google) {\n      window.google.accounts.id.prompt();\n    } else {\n      setError('Google Sign-In is not available');\n    }\n  };\n\n  const handleSendOTP = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setIsLoading(true);\n\n    const response = await sendOTP({\n      email: email,\n      purpose: 'registration',\n    });\n\n    setIsLoading(false);\n\n    if (response.success && response.data) {\n      const expiresAt = new Date(Date.now() + response.data.expires_in_minutes * 60 * 1000).toISOString();\n      setOtpExpiresAt(expiresAt);\n      setStep('otp');\n    } else {\n      setError(response.error?.message || t('common.errorOccurred')); // Fallback\n    }\n  };\n\n  const handleVerifyOTP = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setIsLoading(true);\n\n    const response = await verifyOTP({\n      email: email,\n      code: otpCode,\n      purpose: 'registration',\n    });\n\n    setIsLoading(false);\n\n    if (response.success && response.data) {\n      setOtpToken(response.data.otp_token);\n      setStep('details');\n    } else {\n      setError(response.error?.message || t('common.errorOccurred'));\n    }\n  };\n\n  const handleRegister = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n\n    if (password !== confirmPassword) {\n      setError(t('auth.passwordMatchError'));\n      return;\n    }\n\n    if (password.length < 8) {\n      setError(t('auth.passwordLengthError'));\n      return;\n    }\n\n    if (!cooperativeAgreement) {\n      setError(t('auth.terms'));\n      return;\n    }\n\n    if (!companyName.trim()) {\n      setError(t('auth.companyNameRequired') || 'Company name is required');\n      return;\n    }\n\n    if (npwp.length < 15 || npwp.length > 16) {\n      setError(t('auth.npwpError') || 'NPWP must be 15-16 characters');\n      return;\n    }\n\n    if (!annualRevenue) {\n      setError(t('auth.annualRevenueRequired') || 'Annual revenue is required');\n      return;\n    }\n\n    setIsLoading(true);\n\n    const response = await register({\n      email: email,\n      username: username,\n      password: password,\n      confirm_password: confirmPassword,\n      cooperative_agreement: cooperativeAgreement,\n      otp_token: otpToken,\n      company_name: companyName,\n      company_type: companyType,\n      npwp: npwp,\n      annual_revenue: annualRevenue,\n    });\n\n    setIsLoading(false);\n\n    if (response.success) {\n      // Registrasi berhasil, redirect ke pending page\n      router.push('/eksportir/pending');\n    } else {\n      setError(response.error?.message || t('common.errorOccurred'));\n    }\n  };\n\n  const handleResendOTP = async () => {\n    setError('');\n    setIsLoading(true);\n\n    const response = await sendOTP({\n      email: email,\n      purpose: 'registration',\n    });\n\n    setIsLoading(false);\n\n    if (response.success && response.data) {\n      const expiresAt = new Date(Date.now() + response.data.expires_in_minutes * 60 * 1000).toISOString();\n      setOtpExpiresAt(expiresAt);\n      setOtpCode('');\n      setError('');\n    } else {\n      setError(response.error?.message || t('common.errorOccurred')); // Fallback\n    }\n  };\n\n  const renderStepIndicator = () => (\n    <div className=\"flex items-center justify-center mb-6 space-x-2\">\n      {['email', 'otp', 'details'].map((s, index) => (\n        <div key={s} className=\"flex items-center\">\n          <div\n            className={`w-7 h-7 rounded-full flex items-center justify-center text-xs font-medium ${step === s\n              ? 'bg-cyan-500 text-white'\n              : ['email', 'otp', 'details'].indexOf(step) > index\n                ? 'bg-cyan-500/30 text-cyan-300'\n                : 'bg-slate-700 text-slate-400'\n              }`}\n          >\n            {index + 1}\n          </div>\n          {index < 2 && (\n            <div\n              className={`w-8 h-0.5 ${['email', 'otp', 'details'].indexOf(step) > index\n                ? 'bg-cyan-500/50'\n                : 'bg-slate-700'\n                }`}\n            />\n          )}\n        </div>\n      ))}\n    </div>\n  );\n\n  const renderEmailStep = () => (\n    <form onSubmit={handleSendOTP} className=\"space-y-4\">\n      <h2 className=\"text-xl font-semibold text-slate-100 mb-2\">\n        {t('auth.registerTitle')}\n      </h2>\n      <p className=\"text-slate-400 text-sm mb-4\">\n        {t('auth.registerSubtitle')}{' '}\n        <Link href=\"/pendana/connect\" className=\"text-cyan-400 hover:text-cyan-300 underline\">{t('auth.connectWallet')}</Link>.\n      </p>\n\n      {/* Error Message */}\n      {error && (\n        <div className=\"p-3 bg-red-500/10 border border-red-500/50 rounded-lg\">\n          <p className=\"text-red-400 text-sm\">{error}</p>\n        </div>\n      )}\n\n      {/* Google Sign Up Button */}\n      <button\n        type=\"button\"\n        onClick={handleGoogleSignUp}\n        disabled={isLoading}\n        className=\"w-full flex items-center justify-center gap-3 px-4 py-2.5 bg-white hover:bg-slate-50 disabled:bg-slate-200 text-slate-800 font-medium rounded-lg transition-all border border-slate-300 shadow-sm text-sm\"\n      >\n        <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\">\n          <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\" />\n          <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\" />\n          <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\" />\n          <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\" />\n        </svg>\n        {t('auth.registerGoogle')}\n      </button>\n\n      {/* Divider */}\n      <div className=\"relative\">\n        <div className=\"absolute inset-0 flex items-center\">\n          <div className=\"w-full border-t border-slate-700\"></div>\n        </div>\n        <div className=\"relative flex justify-center text-sm\">\n          <span className=\"px-2 bg-slate-800/50 text-slate-400 text-xs\">{t('common.or')}</span>\n        </div>\n      </div>\n\n      {/* Email Field */}\n      <div>\n        <label htmlFor=\"email\" className=\"block text-sm font-medium text-slate-300 mb-1.5\">\n          {t('auth.email')}\n        </label>\n        <input\n          type=\"email\"\n          id=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          className=\"w-full px-3 py-2.5 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all text-slate-100 text-sm placeholder:text-slate-500\"\n          placeholder={t('auth.emailPlaceholder')}\n          required\n          disabled={isLoading}\n        />\n      </div>\n\n      <p className=\"text-xs text-slate-400\">\n        {t('auth.otpInfo')}\n      </p>\n\n      {/* Submit Button */}\n      <button\n        type=\"submit\"\n        disabled={isLoading}\n        className=\"w-full bg-gradient-to-r from-cyan-600 to-teal-600 hover:from-cyan-500 hover:to-teal-500 disabled:from-slate-600 disabled:to-slate-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all text-sm shadow-lg shadow-cyan-900/50\"\n      >\n        {isLoading ? t('common.sending') : t('auth.sendOtp')}\n      </button>\n    </form>\n  );\n\n  const renderOTPStep = () => (\n    <form onSubmit={handleVerifyOTP} className=\"space-y-4\">\n      <h2 className=\"text-xl font-semibold text-slate-100 mb-2\">\n        {t('auth.verifyEmail')}\n      </h2>\n      <p className=\"text-slate-400 text-sm mb-4\">\n        {t('auth.enterOtp')} <span className=\"text-cyan-400\">{email}</span>\n      </p>\n\n      {/* Error Message */}\n      {error && (\n        <div className=\"p-3 bg-red-500/10 border border-red-500/50 rounded-lg\">\n          <p className=\"text-red-400 text-sm\">{error}</p>\n        </div>\n      )}\n\n      {/* OTP Field */}\n      <div>\n        <label htmlFor=\"otpCode\" className=\"block text-sm font-medium text-slate-300 mb-1.5\">\n          {t('auth.otpCode')}\n        </label>\n        <input\n          type=\"text\"\n          id=\"otpCode\"\n          value={otpCode}\n          onChange={(e) => setOtpCode(e.target.value.replace(/\\D/g, '').slice(0, 6))}\n          className=\"w-full px-3 py-2.5 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all text-slate-100 text-sm placeholder:text-slate-500 text-center tracking-[0.5em] font-mono text-lg\"\n          placeholder=\"000000\"\n          required\n          maxLength={6}\n          disabled={isLoading}\n        />\n      </div>\n\n      <div className=\"flex justify-between items-center text-sm\">\n        <button\n          type=\"button\"\n          onClick={() => setStep('email')}\n          className=\"text-slate-400 hover:text-slate-300\"\n        >\n          {t('auth.changeEmail')}\n        </button>\n        <button\n          type=\"button\"\n          onClick={handleResendOTP}\n          disabled={isLoading}\n          className=\"text-cyan-400 hover:text-cyan-300 disabled:text-slate-500\"\n        >\n          {t('auth.resendCode')}\n        </button>\n      </div>\n\n      {/* Submit Button */}\n      <button\n        type=\"submit\"\n        disabled={isLoading || otpCode.length !== 6}\n        className=\"w-full bg-gradient-to-r from-cyan-600 to-teal-600 hover:from-cyan-500 hover:to-teal-500 disabled:from-slate-600 disabled:to-slate-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all text-sm shadow-lg shadow-cyan-900/50\"\n      >\n        {isLoading ? t('common.verifying') : t('auth.verify')}\n      </button>\n    </form>\n  );\n\n  const renderDetailsStep = () => (\n    <form onSubmit={handleRegister} className=\"space-y-3\">\n      <h2 className=\"text-xl font-semibold text-slate-100 mb-3\">\n        {t('auth.completeDetails')}\n      </h2>\n\n      {/* Error Message */}\n      {error && (\n        <div className=\"p-2.5 bg-red-500/10 border border-red-500/50 rounded-lg\">\n          <p className=\"text-red-400 text-sm\">{error}</p>\n        </div>\n      )}\n\n      {/* Username Field */}\n      <div>\n        <label htmlFor=\"username\" className=\"block text-sm font-medium text-slate-300 mb-1\">\n          {t('auth.username')}\n        </label>\n        <input\n          type=\"text\"\n          id=\"username\"\n          value={username}\n          onChange={(e) => setUsername(e.target.value.toLowerCase().replace(/[^a-z0-9_]/g, ''))}\n          className=\"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all text-slate-100 text-sm placeholder:text-slate-500\"\n          placeholder={t('auth.usernamePlaceholder')}\n          required\n          minLength={3}\n          maxLength={50}\n          disabled={isLoading}\n        />\n        <p className=\"text-xs text-slate-500 mt-1\">{t('auth.usernameHint')}</p>\n      </div>\n\n      {/* Company Name */}\n      <div>\n        <label htmlFor=\"companyName\" className=\"block text-sm font-medium text-slate-300 mb-1\">\n          {t('auth.companyName') || 'Company Name'}\n        </label>\n        <input\n          type=\"text\"\n          id=\"companyName\"\n          value={companyName}\n          onChange={(e) => setCompanyName(e.target.value)}\n          className=\"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all text-slate-100 text-sm placeholder:text-slate-500\"\n          placeholder={t('auth.companyNamePlaceholder') || 'PT Example Indonesia'}\n          required\n          disabled={isLoading}\n        />\n      </div>\n\n      {/* Company Type & NPWP */}\n      <div className=\"grid grid-cols-2 gap-3\">\n        <div>\n          <label htmlFor=\"companyType\" className=\"block text-sm font-medium text-slate-300 mb-1\">\n            {t('auth.companyType') || 'Company Type'}\n          </label>\n          <select\n            id=\"companyType\"\n            value={companyType}\n            onChange={(e) => setCompanyType(e.target.value)}\n            className=\"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all text-slate-100 text-sm\"\n            disabled={isLoading}\n          >\n            <option value=\"PT\">PT</option>\n            <option value=\"CV\">CV</option>\n            <option value=\"UD\">UD</option>\n            <option value=\"Firma\">Firma</option>\n          </select>\n        </div>\n        <div>\n          <label htmlFor=\"npwp\" className=\"block text-sm font-medium text-slate-300 mb-1\">\n            NPWP\n          </label>\n          <input\n            type=\"text\"\n            id=\"npwp\"\n            value={npwp}\n            onChange={(e) => setNpwp(e.target.value.replace(/\\D/g, '').slice(0, 16))}\n            className=\"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all text-slate-100 text-sm placeholder:text-slate-500\"\n            placeholder=\"15-16 digits\"\n            required\n            disabled={isLoading}\n          />\n        </div>\n      </div>\n\n      {/* Annual Revenue */}\n      <div>\n        <label htmlFor=\"annualRevenue\" className=\"block text-sm font-medium text-slate-300 mb-1\">\n          {t('auth.annualRevenue') || 'Annual Revenue'}\n        </label>\n        <select\n          id=\"annualRevenue\"\n          value={annualRevenue}\n          onChange={(e) => setAnnualRevenue(e.target.value)}\n          className=\"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all text-slate-100 text-sm\"\n          required\n          disabled={isLoading}\n        >\n          <option value=\"\">{t('auth.selectAnnualRevenue') || 'Select annual revenue'}</option>\n          <option value=\"< 1 Miliar\">&lt; 1 Miliar</option>\n          <option value=\"1-5 Miliar\">1-5 Miliar</option>\n          <option value=\"5-25 Miliar\">5-25 Miliar</option>\n          <option value=\"25-50 Miliar\">25-50 Miliar</option>\n          <option value=\"> 50 Miliar\">&gt; 50 Miliar</option>\n        </select>\n      </div>\n\n      {/* Info: Mitra Only */}\n      <div className=\"p-3 bg-teal-500/10 border border-teal-500/30 rounded-lg\">\n        <p className=\"text-xs text-teal-200\">\n          {t('auth.exporterRoleInfo')}\n        </p>\n      </div>\n\n      {/* Password Fields */}\n      <div className=\"grid grid-cols-2 gap-3\">\n        <div>\n          <label htmlFor=\"password\" className=\"block text-sm font-medium text-slate-300 mb-1\">\n            {t('auth.password')}\n          </label>\n          <input\n            type=\"password\"\n            id=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            className=\"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all text-slate-100 text-sm placeholder:text-slate-500\"\n            placeholder=\"Min 8 chars\"\n            required\n            minLength={8}\n            disabled={isLoading}\n          />\n        </div>\n        <div>\n          <label htmlFor=\"confirmPassword\" className=\"block text-sm font-medium text-slate-300 mb-1\">\n            {t('auth.confirmPassword')}\n          </label>\n          <input\n            type=\"password\"\n            id=\"confirmPassword\"\n            value={confirmPassword}\n            onChange={(e) => setConfirmPassword(e.target.value)}\n            className=\"w-full px-3 py-2 bg-slate-900/50 border border-slate-600 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all text-slate-100 text-sm placeholder:text-slate-500\"\n            placeholder={t('auth.confirmPasswordPlaceholder')}\n            required\n            minLength={8}\n            disabled={isLoading}\n          />\n        </div>\n      </div>\n\n      {/* Cooperative Agreement Checkbox */}\n      <div className=\"flex items-start space-x-2\">\n        <input\n          type=\"checkbox\"\n          id=\"cooperativeAgreement\"\n          checked={cooperativeAgreement}\n          onChange={(e) => setCooperativeAgreement(e.target.checked)}\n          className=\"mt-1 w-4 h-4 bg-slate-900/50 border-slate-600 rounded text-cyan-600 focus:ring-2 focus:ring-cyan-500 focus:ring-offset-0\"\n          required\n        />\n        <label htmlFor=\"cooperativeAgreement\" className=\"text-xs text-slate-300 leading-relaxed cursor-pointer\">\n          {t('auth.terms')}\n        </label>\n      </div>\n\n      {/* Submit Button */}\n      <button\n        type=\"submit\"\n        disabled={isLoading}\n        className=\"w-full bg-gradient-to-r from-cyan-600 to-teal-600 hover:from-cyan-500 hover:to-teal-500 disabled:from-slate-600 disabled:to-slate-600 text-white font-medium py-2.5 px-4 rounded-lg transition-all text-sm shadow-lg shadow-cyan-900/50\"\n      >\n        {isLoading ? t('common.processing') : t('auth.registerAndContinue')}\n      </button>\n    </form>\n  );\n\n  return (\n    <div className=\"min-h-screen h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center p-4 overflow-hidden\">\n      <div className=\"w-full max-w-5xl h-[calc(100vh-2rem)] max-h-[700px] bg-slate-800/50 backdrop-blur-sm rounded-2xl shadow-2xl overflow-hidden border border-slate-700/50\">\n        <div className=\"grid md:grid-cols-2 h-full\">\n          {/* Left Column - Form */}\n          <div className=\"p-6 md:p-8 lg:p-10 flex flex-col justify-center overflow-y-auto scrollbar-hide\">\n            <div className=\"max-w-sm mx-auto w-full\">\n              {/* Logo/Brand */}\n              <div className=\"mb-6 flex items-center space-x-2\">\n                <Image\n                  src=\"/vessel-logo.png\"\n                  alt=\"VESSEL Logo\"\n                  width={120}\n                  height={32}\n                  className=\"h-12 w-auto object-contain\"\n                  priority\n                />\n              </div>\n\n              {/* Step Indicator */}\n              {renderStepIndicator()}\n\n              {/* Form Steps */}\n              {step === 'email' && renderEmailStep()}\n              {step === 'otp' && renderOTPStep()}\n              {step === 'details' && renderDetailsStep()}\n\n              {/* Login Link */}\n              <div className=\"text-center pt-4\">\n                <p className=\"text-slate-400 text-sm\">\n                  {t('auth.alreadyRegistered')}{' '}\n                  <Link\n                    href=\"/login\"\n                    className=\"text-cyan-400 hover:text-cyan-300 font-medium transition-colors\"\n                  >\n                    {t('auth.login')}\n                  </Link>\n                </p>\n              </div>\n\n              {/* Trust Indicators */}\n              <div className=\"mt-4 pt-4 border-t border-slate-700\">\n                <div className=\"flex items-center justify-center space-x-6 text-xs text-slate-400\">\n                  <div className=\"flex items-center space-x-1\">\n                    <svg className=\"w-3.5 h-3.5 text-cyan-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z\" clipRule=\"evenodd\" />\n                    </svg>\n                    <span>{t('auth.secureConnection')}</span>\n                  </div>\n                  <div className=\"flex items-center space-x-1\">\n                    <svg className=\"w-3.5 h-3.5 text-cyan-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                    </svg>\n                    <span>{t('auth.registeredLicensed')}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Right Column - Image */}\n          <div className=\"hidden md:block relative bg-gradient-to-br from-slate-800 via-cyan-900 to-teal-900\">\n            <div className=\"absolute inset-0\">\n              <Image\n                src=\"/assets/auth/auth-image-4.png\"\n                alt=\"Platform pembiayaan ekspor\"\n                fill\n                className=\"object-cover object-left\"\n                priority\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/lib/api/admin.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":84,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":84,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { APIResponse } from '../types/auth';\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8080/api/v1';\n\nexport interface UserListItem {\n    id: string;\n    email: string;\n    username?: string;\n    role: 'investor' | 'mitra' | 'admin';\n    member_status: string;\n    balance_idr: number;\n    is_verified: boolean;\n    profile_completed: boolean;\n    full_name?: string;\n    created_at: string;\n}\n\ninterface ListUsersResponse {\n    users: UserListItem[];\n    total: number;\n    page: number;\n    per_page: number;\n    total_pages: number;\n}\n\ninterface GrantBalanceRequest {\n    user_id: string;\n    amount: number;\n}\n\nexport interface GrantBalanceResponse {\n    success: boolean;\n    transaction_id: string;\n    message: string;\n    new_balance: number;\n    timestamp: string;\n}\n\nclass AdminAPI {\n    protected baseURL: string;\n\n    constructor(baseURL: string) {\n        this.baseURL = baseURL;\n    }\n\n    protected getAuthHeaders(): HeadersInit {\n        const token = typeof window !== 'undefined' ? localStorage.getItem('vessel_access_token') : null;\n        return {\n            'Content-Type': 'application/json',\n            ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        };\n    }\n\n    protected async request<T>(\n        endpoint: string,\n        options: RequestInit = {}\n    ): Promise<APIResponse<T>> {\n        const url = `${this.baseURL}${endpoint}`;\n\n        const config: RequestInit = {\n            ...options,\n            headers: {\n                ...this.getAuthHeaders(),\n                ...options.headers,\n            },\n        };\n\n        try {\n            const response = await fetch(url, config);\n            const data = await response.json();\n\n            if (!response.ok) {\n                const errorMessage = typeof data.error === 'string' ? data.error : (data.error?.message || 'Terjadi kesalahan');\n                return {\n                    success: false,\n                    error: {\n                        code: 'API_ERROR',\n                        message: errorMessage,\n                    },\n                };\n            }\n\n            return data;\n        } catch (error) {\n            return {\n                success: false,\n                error: {\n                    code: 'NETWORK_ERROR',\n                    message: 'Gagal terhubung ke server',\n                },\n            };\n        }\n    }\n\n    async listUsers(\n        page: number = 1,\n        perPage: number = 10,\n        role?: string,\n        search?: string\n    ): Promise<APIResponse<ListUsersResponse>> {\n        const params = new URLSearchParams({\n            page: page.toString(),\n            per_page: perPage.toString(),\n        });\n        if (role) params.append('role', role);\n        if (search) params.append('search', search);\n\n        return this.request<ListUsersResponse>(`/admin/users?${params.toString()}`, {\n            method: 'GET',\n        });\n    }\n\n    async grantBalance(data: GrantBalanceRequest): Promise<APIResponse<GrantBalanceResponse>> {\n        return this.request<GrantBalanceResponse>('/admin/balance/grant', {\n            method: 'POST',\n            body: JSON.stringify(data),\n        });\n    }\n\n    // Mitra Application Management\n    async listPendingMitraApplications(\n        page: number = 1,\n        perPage: number = 10\n    ): Promise<APIResponse<MitraApplicationsListResponse>> {\n        const params = new URLSearchParams({\n            page: page.toString(),\n            per_page: perPage.toString(),\n        });\n        return this.request<MitraApplicationsListResponse>(`/admin/mitra/pending?${params.toString()}`, {\n            method: 'GET',\n        });\n    }\n\n    async getMitraApplicationDetail(id: string): Promise<APIResponse<MitraApplicationDetail>> {\n        return this.request<MitraApplicationDetail>(`/admin/mitra/${id}`, {\n            method: 'GET',\n        });\n    }\n\n    async approveMitraApplication(id: string): Promise<APIResponse<{ message: string }>> {\n        return this.request<{ message: string }>(`/admin/mitra/${id}/approve`, {\n            method: 'POST',\n        });\n    }\n\n    async rejectMitraApplication(id: string, reason: string): Promise<APIResponse<{ message: string }>> {\n        return this.request<{ message: string }>(`/admin/mitra/${id}/reject`, {\n            method: 'POST',\n            body: JSON.stringify({ reason }),\n        });\n    }\n}\n\n// Mitra Application Types\nexport interface MitraApplicationItem {\n    id: string;\n    user_id: string;\n    company_name: string;\n    company_type: 'PT' | 'CV' | 'UD';\n    npwp: string;\n    annual_revenue: string;\n    address: string;\n    business_description: string;\n    website_url?: string;\n    year_founded: number;\n    key_products: string;\n    export_markets: string;\n    nib_document_url?: string;\n    akta_pendirian_url?: string;\n    ktp_direktur_url?: string;\n    status: 'pending' | 'approved' | 'rejected';\n    created_at: string;\n    user?: {\n        id: string;\n        email: string;\n        username: string;\n    };\n}\n\ninterface MitraApplicationsListResponse {\n    applications: MitraApplicationItem[];\n    total: number;\n    page: number;\n    per_page: number;\n}\n\nexport interface MitraApplicationDetail extends MitraApplicationItem {\n    updated_at?: string;\n    rejection_reason?: string;\n}\n\nexport interface PendingInvoice {\n    id: string;\n    invoice_number: string;\n    buyer_name: string;\n    buyer_country: string;\n    amount: number;\n    currency: string;\n    idr_amount?: number;\n    status: string;\n    grade?: string;\n    is_repeat_buyer: boolean;\n    document_complete_score: number;\n    created_at: string;\n    due_date: string;\n    exporter?: {\n        id: string;\n        email: string;\n        username?: string;\n    };\n}\n\ninterface PendingInvoicesResponse {\n    invoices: PendingInvoice[];\n    total: number;\n    page: number;\n    per_page: number;\n    total_pages: number;\n}\n\nexport interface GradeSuggestion {\n    invoice_id: string;\n    suggested_grade: string;\n    grade_score: number;\n    country_risk: string;\n    country_score: number;\n    history_score: number;\n    document_score: number;\n    is_repeat_buyer: boolean;\n    documents_complete: boolean;\n    funding_limit: number;\n}\n\nexport interface InvoiceReviewData {\n    invoice: PendingInvoice & {\n        priority_ratio: number;\n        catalyst_ratio: number;\n        priority_interest_rate?: number;\n        catalyst_interest_rate?: number;\n        advance_percentage: number;\n        funding_duration_days: number;\n        description?: string;\n        original_currency?: string;\n        original_amount?: number;\n        exchange_rate?: number;\n    };\n    exporter?: {\n        id: string;\n        email: string;\n        full_name?: string;\n        phone?: string;\n        company_name?: string;\n    };\n    documents: Array<{\n        document_id: string;\n        document_type: string;\n        file_name: string;\n        file_url: string;\n        is_valid: boolean;\n        needs_revision: boolean;\n        revision_note?: string;\n    }>;\n    grade_suggestion: GradeSuggestion;\n}\n\ninterface ApproveInvoiceRequest {\n    grade: string;\n    priority_interest_rate?: number;\n    catalyst_interest_rate?: number;\n    notes?: string;\n}\n\nexport interface FundingPool {\n    id: string;\n    invoice_id: string;\n    target_amount: number;\n    funded_amount: number;\n    investor_count: number;\n    status: string;\n    priority_target: number;\n    priority_funded: number;\n    catalyst_target: number;\n    catalyst_funded: number;\n    priority_interest_rate: number;\n    catalyst_interest_rate: number;\n    pool_currency: string;\n    created_at: string;\n    opened_at?: string;\n    deadline?: string;\n    invoice?: PendingInvoice;\n}\n\nclass AdminAPIExtended extends AdminAPI {\n    async getPendingInvoices(\n        page: number = 1,\n        perPage: number = 10\n    ): Promise<APIResponse<PendingInvoicesResponse>> {\n        const params = new URLSearchParams({\n            page: page.toString(),\n            per_page: perPage.toString(),\n        });\n        return this.request<PendingInvoicesResponse>(`/admin/invoices/pending?${params.toString()}`, {\n            method: 'GET',\n        });\n    }\n\n    async getInvoiceGradeSuggestion(invoiceId: string): Promise<APIResponse<GradeSuggestion>> {\n        return this.request<GradeSuggestion>(`/admin/invoices/${invoiceId}/grade-suggestion`, {\n            method: 'GET',\n        });\n    }\n\n    async getInvoiceReviewData(invoiceId: string): Promise<APIResponse<InvoiceReviewData>> {\n        return this.request<InvoiceReviewData>(`/admin/invoices/${invoiceId}/review`, {\n            method: 'GET',\n        });\n    }\n\n    async approveInvoice(invoiceId: string, data: ApproveInvoiceRequest): Promise<APIResponse<{ message: string; invoice_id: string; grade: string; nft?: unknown }>> {\n        return this.request<{ message: string; invoice_id: string; grade: string; nft?: unknown }>(`/admin/invoices/${invoiceId}/approve`, {\n            method: 'POST',\n            body: JSON.stringify(data),\n        });\n    }\n\n    async rejectInvoice(invoiceId: string, reason: string): Promise<APIResponse<{ message: string }>> {\n        return this.request<{ message: string }>(`/admin/invoices/${invoiceId}/reject`, {\n            method: 'POST',\n            body: JSON.stringify({ reason }),\n        });\n    }\n\n    async getApprovedInvoices(\n        page: number = 1,\n        perPage: number = 50\n    ): Promise<APIResponse<PendingInvoicesResponse>> {\n        const params = new URLSearchParams({\n            page: page.toString(),\n            per_page: perPage.toString(),\n            status: 'approved',\n        });\n        return this.request<PendingInvoicesResponse>(`/admin/invoices/approved?${params.toString()}`, {\n            method: 'GET',\n        });\n    }\n\n    async createFundingPool(invoiceId: string): Promise<APIResponse<FundingPool>> {\n        return this.request<FundingPool>(`/invoices/${invoiceId}/pool`, {\n            method: 'POST',\n        });\n    }\n\n    async getAllPools(\n        page: number = 1,\n        perPage: number = 10\n    ): Promise<APIResponse<{ pools: FundingPool[]; total: number; page: number; per_page: number; total_pages: number }>> {\n        const params = new URLSearchParams({\n            page: page.toString(),\n            per_page: perPage.toString(),\n        });\n        return this.request<{ pools: FundingPool[]; total: number; page: number; per_page: number; total_pages: number }>(`/pools?${params.toString()}`, {\n            method: 'GET',\n        });\n    }\n\n    async disbursePool(poolId: string): Promise<APIResponse<{ message: string }>> {\n        return this.request<{ message: string }>(`/admin/pools/${poolId}/disburse`, {\n            method: 'POST',\n        });\n    }\n}\n\nexport const adminAPI = new AdminAPIExtended(API_BASE_URL);\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/lib/api/auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/lib/api/user.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":74,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":119,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":119,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":136,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":136,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3924,3927],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3924,3927],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":137,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3960,3963],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3960,3963],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":149,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":149,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4374,4377],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4374,4377],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":150,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4410,4413],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4410,4413],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":162,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4803,4806],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4803,4806],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":189,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":189,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":319,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":319,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MarketplaceResponse' is defined but never used.","line":391,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":391,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":486,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":486,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WalletUpdateRequest' is defined but never used.","line":510,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":510,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":564,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":564,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":703,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":703,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":779,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":779,"endColumn":23}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n    APIResponse,\n} from '../types/auth';\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8080/api/v1';\n\ninterface CompleteProfileRequest {\n    full_name: string;\n    phone?: string;\n    nik: string;\n    ktp_photo_url: string;\n    selfie_url: string;\n    bank_code: string;\n    account_number: string;\n    account_name: string;\n    company_name?: string;\n    country?: string;\n}\n\ninterface CompleteProfileResponse {\n    message: string;\n}\n\ninterface UploadFileResponse {\n    url: string;\n    hash: string;\n}\n\nclass UserAPI {\n    private baseURL: string;\n\n    constructor(baseURL: string) {\n        this.baseURL = baseURL;\n    }\n\n    private getAuthHeaders(): HeadersInit {\n        const token = typeof window !== 'undefined' ? localStorage.getItem('vessel_access_token') : null;\n        return {\n            'Content-Type': 'application/json',\n            ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        };\n    }\n\n    private async request<T>(\n        endpoint: string,\n        options: RequestInit = {}\n    ): Promise<APIResponse<T>> {\n        const url = `${this.baseURL}${endpoint}`;\n\n        const config: RequestInit = {\n            ...options,\n            headers: {\n                ...this.getAuthHeaders(),\n                ...options.headers,\n            },\n        };\n\n        try {\n            const response = await fetch(url, config);\n            const data = await response.json();\n\n            if (!response.ok) {\n                const errorMessage = typeof data.error === 'string' ? data.error : (data.error?.message || 'Terjadi kesalahan yang tidak diketahui');\n                return {\n                    success: false,\n                    error: {\n                        code: 'API_ERROR',\n                        message: errorMessage,\n                    },\n                };\n            }\n\n            return data;\n        } catch (error) {\n            return {\n                success: false,\n                error: {\n                    code: 'NETWORK_ERROR',\n                    message: 'Gagal terhubung ke server. Periksa koneksi internet Anda.',\n                },\n            };\n        }\n    }\n\n    async completeProfile(data: CompleteProfileRequest): Promise<APIResponse<CompleteProfileResponse>> {\n        return this.request<CompleteProfileResponse>('/user/complete-profile', {\n            method: 'POST',\n            body: JSON.stringify(data),\n        });\n    }\n\n    async uploadFile(file: File, type: string): Promise<APIResponse<UploadFileResponse>> {\n        const token = typeof window !== 'undefined' ? localStorage.getItem('vessel_access_token') : null;\n        const formData = new FormData();\n        formData.append('file', file);\n        formData.append('document_type', type);\n\n        try {\n            const response = await fetch(`${this.baseURL}/user/documents`, {\n                method: 'POST',\n                headers: {\n                    ...(token ? { Authorization: `Bearer ${token}` } : {}),\n                },\n                body: formData,\n            });\n            const data = await response.json();\n\n            if (!response.ok) {\n                return {\n                    success: false,\n                    error: data.error || {\n                        code: 'UPLOAD_ERROR',\n                        message: 'Gagal mengupload file',\n                    },\n                };\n            }\n\n            return data;\n        } catch (error) {\n            return {\n                success: false,\n                error: {\n                    code: 'NETWORK_ERROR',\n                    message: 'Gagal mengupload file',\n                },\n            };\n        }\n    }\n\n    async getProfile(): Promise<APIResponse<UserProfileResponse>> {\n        return this.request<UserProfileResponse>('/user/profile', {\n            method: 'GET',\n        });\n    }\n\n    async getBankAccount(): Promise<APIResponse<any>> {\n        return this.request<any>('/user/profile/bank-account', {\n            method: 'GET',\n        });\n    }\n\n    async getSupportedBanks(): Promise<APIResponse<Array<{ code: string; name: string }>>> {\n        return this.request<Array<{ code: string; name: string }>>('/user/profile/banks', {\n            method: 'GET',\n        });\n    }\n\n    // Mitra Methods\n    async applyMitra(data: SubmitMitraApplicationRequest): Promise<APIResponse<any>> {\n        return this.request<any>('/user/mitra/apply', {\n            method: 'POST',\n            body: JSON.stringify(data),\n        });\n    }\n\n    async getMitraStatus(): Promise<APIResponse<MitraApplicationResponse>> {\n        return this.request<MitraApplicationResponse>('/user/mitra/status', {\n            method: 'GET',\n        });\n    }\n\n    async uploadMitraDocument(file: File, type: string): Promise<APIResponse<any>> {\n        const token = typeof window !== 'undefined' ? localStorage.getItem('vessel_access_token') : null;\n        const formData = new FormData();\n        formData.append('file', file);\n        formData.append('document_type', type);\n\n        try {\n            const response = await fetch(`${this.baseURL}/user/mitra/documents`, {\n                method: 'POST',\n                headers: {\n                    ...(token ? { Authorization: `Bearer ${token}` } : {}),\n                },\n                body: formData,\n            });\n            const data = await response.json();\n\n            if (!response.ok) {\n                return {\n                    success: false,\n                    error: data.error || {\n                        code: 'UPLOAD_ERROR',\n                        message: 'Gagal mengupload dokumen',\n                    },\n                };\n            }\n\n            return { success: true, data };\n        } catch (error) {\n            return {\n                success: false,\n                error: {\n                    code: 'NETWORK_ERROR',\n                    message: 'Gagal mengupload dokumen',\n                },\n            };\n        }\n    }\n}\n\nexport interface UserProfileResponse {\n    id: string;\n    email: string;\n    username: string;\n    role: 'mitra' | 'investor' | 'admin';\n    is_verified: boolean;\n    profile_completed: boolean;\n    email_verified: boolean;\n    balance_idr: number;\n    created_at: string;\n}\n\nexport interface SubmitMitraApplicationRequest {\n    company_name: string;\n    company_type: 'PT' | 'CV' | 'UD';\n    npwp: string;\n    annual_revenue: '<1M' | '1M-5M' | '5M-25M' | '25M-100M' | '>100M';\n    address: string;\n    business_description: string;\n    website_url?: string;\n    year_founded: number;\n    key_products: string;\n    export_markets: string;\n}\n\nexport interface MitraApplicationResponse {\n    application: {\n        id: string;\n        status: 'pending' | 'approved' | 'rejected';\n        company_name: string;\n        company_type: string;\n        rejection_reason?: string;\n    };\n    documents_status: {\n        nib: boolean;\n        akta_pendirian: boolean;\n        ktp_direktur: boolean;\n    };\n    is_complete: boolean;\n}\n\n// Risk Questionnaire Types\nexport interface RiskQuestion {\n    id: number;\n    question: string;\n    options: { value: number; label: string }[];\n    required_for_catalyst?: boolean;\n    required_answer?: number;\n}\n\ninterface RiskQuestionsResponse {\n    questions: RiskQuestion[];\n    catalyst_unlock_rules: {\n        description: string;\n        required_q1: number;\n        required_q2: number;\n        required_q3: number;\n    };\n}\n\ninterface RiskQuestionnaireRequest {\n    q1_answer: number;\n    q2_answer: number;\n    q3_answer: number;\n}\n\nexport interface RiskQuestionnaireStatusResponse {\n    completed: boolean;\n    catalyst_unlocked: boolean;\n    completed_at?: string;\n    message: string;\n}\n\nclass RiskQuestionnaireAPI {\n    private baseURL: string;\n\n    constructor(baseURL: string) {\n        this.baseURL = baseURL;\n    }\n\n    private getAuthHeaders(): HeadersInit {\n        const token = typeof window !== 'undefined' ? localStorage.getItem('vessel_access_token') : null;\n        return {\n            'Content-Type': 'application/json',\n            ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        };\n    }\n\n    private async request<T>(\n        endpoint: string,\n        options: RequestInit = {}\n    ): Promise<APIResponse<T>> {\n        const url = `${this.baseURL}${endpoint}`;\n\n        const config: RequestInit = {\n            ...options,\n            headers: {\n                ...this.getAuthHeaders(),\n                ...options.headers,\n            },\n        };\n\n        try {\n            const response = await fetch(url, config);\n            const data = await response.json();\n\n            if (!response.ok) {\n                const errorMessage = typeof data.error === 'string' ? data.error : (data.error?.message || 'Terjadi kesalahan');\n                return {\n                    success: false,\n                    error: {\n                        code: 'API_ERROR',\n                        message: errorMessage,\n                    },\n                };\n            }\n\n            return data;\n        } catch (error) {\n            return {\n                success: false,\n                error: {\n                    code: 'NETWORK_ERROR',\n                    message: 'Gagal terhubung ke server',\n                },\n            };\n        }\n    }\n\n    async getQuestions(): Promise<APIResponse<RiskQuestionsResponse>> {\n        return this.request<RiskQuestionsResponse>('/risk-questionnaire/questions', {\n            method: 'GET',\n        });\n    }\n\n    async submit(data: RiskQuestionnaireRequest): Promise<APIResponse<RiskQuestionnaireStatusResponse>> {\n        return this.request<RiskQuestionnaireStatusResponse>('/risk-questionnaire', {\n            method: 'POST',\n            body: JSON.stringify(data),\n        });\n    }\n\n    async getStatus(): Promise<APIResponse<RiskQuestionnaireStatusResponse>> {\n        return this.request<RiskQuestionnaireStatusResponse>('/risk-questionnaire/status', {\n            method: 'GET',\n        });\n    }\n}\n\nexport interface MarketplacePool {\n    pool_id: string;\n    invoice_id: string;\n    project_title: string;\n    grade: string;\n    is_insured: boolean;\n    buyer_country: string;\n    buyer_country_flag: string;\n    buyer_company_name: string;\n    buyer_country_risk: string;\n    yield_range: string;\n    min_yield: number;\n    max_yield: number;\n    tenor_days: number;\n    tenor_display: string;\n    remaining_time: string;\n    funding_progress: number;\n    target_amount: number;\n    funded_amount: number;\n    remaining_amount: number;\n    is_fully_funded: boolean;\n    priority_progress: number;\n    catalyst_progress: number;\n    priority_target: number;\n    priority_funded: number;\n    catalyst_target: number;\n    catalyst_funded: number;\n    priority_interest_rate: number;\n    catalyst_interest_rate: number;\n}\n\nexport interface MarketplaceFilters {\n    grade?: string;\n    is_insured?: boolean;\n    min_amount?: number;\n    max_amount?: number;\n    sort_by?: 'yield_desc' | 'tenor_asc' | 'newest';\n    page?: number;\n    per_page?: number;\n}\n\ninterface MarketplaceResponse {\n    pools: MarketplacePool[];\n    total: number;\n    page: number;\n    per_page: number;\n    total_pages: number;\n}\n\n\n\nexport interface InvestorPortfolio {\n    total_funding: number;\n    total_expected_gain: number;\n    total_realized_gain: number;\n    priority_allocation: number;\n    catalyst_allocation: number;\n    active_investments: number;\n    completed_deals: number;\n    available_balance: number;\n}\n\nexport interface ActiveInvestment {\n    investment_id: string;\n    project_name: string;\n    invoice_number: string;\n    buyer_name: string;\n    buyer_country: string;\n    buyer_flag: string;\n    tranche: string;\n    tranche_display: string;\n    principal: number;\n    interest_rate: number;\n    estimated_return: number;\n    total_expected: number;\n    due_date: string;\n    days_remaining: number;\n    status: string;\n    status_display: string;\n    status_color: string;\n    invested_at: string;\n}\n\ninterface ActiveInvestmentListResponse {\n    investments: ActiveInvestment[];\n    total: number;\n    page: number;\n    per_page: number;\n    total_pages: number;\n}\n\nclass InvestmentAPI {\n    private baseURL: string;\n\n    constructor(baseURL: string) {\n        this.baseURL = baseURL;\n    }\n\n    private getAuthHeaders(): HeadersInit {\n        const token = typeof window !== 'undefined' ? localStorage.getItem('vessel_access_token') : null;\n        return {\n            'Content-Type': 'application/json',\n            ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        };\n    }\n\n    private async request<T>(\n        endpoint: string,\n        options: RequestInit = {}\n    ): Promise<APIResponse<T>> {\n        const url = `${this.baseURL}${endpoint}`;\n\n        const config: RequestInit = {\n            ...options,\n            headers: {\n                ...this.getAuthHeaders(),\n                ...options.headers,\n            },\n        };\n\n        try {\n            const response = await fetch(url, config);\n            const data = await response.json();\n\n            if (!response.ok) {\n                const errorMessage = typeof data.error === 'string' ? data.error : (data.error?.message || 'Terjadi kesalahan');\n                return {\n                    success: false,\n                    error: {\n                        code: 'API_ERROR',\n                        message: errorMessage,\n                    },\n                };\n            }\n\n            return data;\n        } catch (error) {\n            return {\n                success: false,\n                error: {\n                    code: 'NETWORK_ERROR',\n                    message: 'Gagal terhubung ke server',\n                },\n            };\n        }\n    }\n\n    async getPortfolio(): Promise<APIResponse<InvestorPortfolio>> {\n        return this.request<InvestorPortfolio>('/investments/portfolio', {\n            method: 'GET',\n        });\n    }\n\n    async getActiveInvestments(page: number = 1, perPage: number = 10): Promise<APIResponse<ActiveInvestmentListResponse>> {\n        return this.request<ActiveInvestmentListResponse>(`/investments/active?page=${page}&per_page=${perPage}`, {\n            method: 'GET',\n        });\n    }\n}\n\ninterface WalletUpdateRequest {\n    wallet_address: string;\n}\n\ninterface WalletUpdateResponse {\n    message: string;\n    wallet_address: string;\n}\n\nclass WalletAPI {\n    private baseURL: string;\n\n    constructor(baseURL: string) {\n        this.baseURL = baseURL;\n    }\n\n    private getAuthHeaders(): HeadersInit {\n        const token = typeof window !== 'undefined' ? localStorage.getItem('vessel_access_token') : null;\n        return {\n            'Content-Type': 'application/json',\n            ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        };\n    }\n\n    private async request<T>(\n        endpoint: string,\n        options: RequestInit = {}\n    ): Promise<APIResponse<T>> {\n        const url = `${this.baseURL}${endpoint}`;\n\n        const config: RequestInit = {\n            ...options,\n            headers: {\n                ...this.getAuthHeaders(),\n                ...options.headers,\n            },\n        };\n\n        try {\n            const response = await fetch(url, config);\n            const data = await response.json();\n\n            if (!response.ok) {\n                const errorMessage = typeof data.error === 'string' ? data.error : (data.error?.message || 'Terjadi kesalahan');\n                return {\n                    success: false,\n                    error: {\n                        code: 'API_ERROR',\n                        message: errorMessage,\n                    },\n                };\n            }\n\n            return data;\n        } catch (error) {\n            return {\n                success: false,\n                error: {\n                    code: 'NETWORK_ERROR',\n                    message: 'Gagal terhubung ke server',\n                },\n            };\n        }\n    }\n\n    async updateWallet(walletAddress: string): Promise<APIResponse<WalletUpdateResponse>> {\n        return this.request<WalletUpdateResponse>('/user/wallet', {\n            method: 'PUT',\n            body: JSON.stringify({ wallet_address: walletAddress }),\n        });\n    }\n}\n\nexport interface CreateInvoiceRequest {\n    buyer_company_name: string;\n    buyer_country: string;\n    buyer_email: string;\n    invoice_number: string;\n    original_currency: string;\n    original_amount: number;\n    locked_exchange_rate: number;\n    idr_amount: number;\n    due_date: string;\n    funding_duration_days: number;\n    priority_ratio: number;\n    catalyst_ratio: number;\n    priority_interest_rate: number;\n    catalyst_interest_rate: number;\n    is_repeat_buyer: boolean;\n    repeat_buyer_proof?: string;\n    data_confirmation: boolean;\n    description?: string;\n}\n\nexport interface Invoice {\n    id: string;\n    exporter_id: string;\n    buyer_name: string;\n    buyer_country: string;\n    invoice_number: string;\n    currency: string;\n    amount: number;\n    idr_amount?: number;\n    issue_date: string;\n    due_date: string;\n    description?: string;\n    status: string;\n    grade?: string;\n    is_repeat_buyer: boolean;\n    document_complete_score: number;\n    priority_ratio: number;\n    catalyst_ratio: number;\n    priority_interest_rate?: number;\n    catalyst_interest_rate?: number;\n    original_currency?: string;\n    original_amount?: number;\n    exchange_rate?: number;\n    funding_duration_days: number;\n    created_at: string;\n    updated_at: string;\n}\n\ninterface InvoiceListResponse {\n    invoices: Invoice[];\n    total: number;\n    page: number;\n    per_page: number;\n    total_pages: number;\n}\n\ninterface RepeatBuyerCheckResponse {\n    is_repeat_buyer: boolean;\n    message: string;\n    previous_transactions?: number;\n    funding_limit: number;\n}\n\ninterface CurrencyConvertResponse {\n    original_currency: string;\n    original_amount: number;\n    target_currency: string;\n    converted_amount: number;\n    exchange_rate: number;\n    buffer_rate: number;\n    locked_rate: number;\n    valid_until: string;\n}\n\nclass InvoiceAPI {\n    private baseURL: string;\n\n    constructor(baseURL: string) {\n        this.baseURL = baseURL;\n    }\n\n    private getAuthHeaders(): HeadersInit {\n        const token = typeof window !== 'undefined' ? localStorage.getItem('vessel_access_token') : null;\n        return {\n            'Content-Type': 'application/json',\n            ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        };\n    }\n\n    private async request<T>(\n        endpoint: string,\n        options: RequestInit = {}\n    ): Promise<APIResponse<T>> {\n        const url = `${this.baseURL}${endpoint}`;\n\n        const config: RequestInit = {\n            ...options,\n            headers: {\n                ...this.getAuthHeaders(),\n                ...options.headers,\n            },\n        };\n\n        try {\n            const response = await fetch(url, config);\n            const data = await response.json();\n\n            if (!response.ok) {\n                const errorMessage = typeof data.error === 'string' ? data.error : (data.error?.message || 'Terjadi kesalahan');\n                return {\n                    success: false,\n                    error: {\n                        code: 'API_ERROR',\n                        message: errorMessage,\n                    },\n                };\n            }\n\n            return data;\n        } catch (error) {\n            return {\n                success: false,\n                error: {\n                    code: 'NETWORK_ERROR',\n                    message: 'Gagal terhubung ke server',\n                },\n            };\n        }\n    }\n\n    async checkRepeatBuyer(buyerCompanyName: string): Promise<APIResponse<RepeatBuyerCheckResponse>> {\n        return this.request<RepeatBuyerCheckResponse>('/invoices/check-repeat-buyer', {\n            method: 'POST',\n            body: JSON.stringify({ buyer_company_name: buyerCompanyName }),\n        });\n    }\n\n    async createFundingRequest(data: CreateInvoiceRequest): Promise<APIResponse<Invoice>> {\n        return this.request<Invoice>('/invoices/funding-request', {\n            method: 'POST',\n            body: JSON.stringify(data),\n        });\n    }\n\n    async getMyInvoices(page: number = 1, perPage: number = 10, status?: string): Promise<APIResponse<InvoiceListResponse>> {\n        const params = new URLSearchParams({\n            page: page.toString(),\n            per_page: perPage.toString(),\n        });\n        if (status) params.append('status', status);\n\n        return this.request<InvoiceListResponse>(`/invoices?${params.toString()}`, {\n            method: 'GET',\n        });\n    }\n\n    async getInvoice(invoiceId: string): Promise<APIResponse<Invoice>> {\n        return this.request<Invoice>(`/invoices/${invoiceId}`, {\n            method: 'GET',\n        });\n    }\n\n    async submitInvoice(invoiceId: string): Promise<APIResponse<{ message: string }>> {\n        return this.request<{ message: string }>(`/invoices/${invoiceId}/submit`, {\n            method: 'POST',\n        });\n    }\n\n    async uploadDocument(invoiceId: string, file: File, documentType: string): Promise<APIResponse<{ id: string; file_url: string; file_hash: string }>> {\n        const token = typeof window !== 'undefined' ? localStorage.getItem('vessel_access_token') : null;\n        const formData = new FormData();\n        formData.append('file', file);\n        formData.append('document_type', documentType);\n\n        try {\n            const response = await fetch(`${this.baseURL}/invoices/${invoiceId}/documents`, {\n                method: 'POST',\n                headers: {\n                    ...(token ? { Authorization: `Bearer ${token}` } : {}),\n                },\n                body: formData,\n            });\n            const data = await response.json();\n\n            if (!response.ok) {\n                return {\n                    success: false,\n                    error: data.error || {\n                        code: 'UPLOAD_ERROR',\n                        message: 'Gagal mengupload dokumen',\n                    },\n                };\n            }\n\n            return { success: true, data };\n        } catch (error) {\n            return {\n                success: false,\n                error: {\n                    code: 'NETWORK_ERROR',\n                    message: 'Gagal mengupload dokumen',\n                },\n            };\n        }\n    }\n\n    async getDocuments(invoiceId: string): Promise<APIResponse<Array<{ id: string; document_type: string; file_name: string; file_url: string }>>> {\n        return this.request<Array<{ id: string; document_type: string; file_name: string; file_url: string }>>(`/invoices/${invoiceId}/documents`, {\n            method: 'GET',\n        });\n    }\n\n    async convertCurrency(currency: string, amount: number): Promise<APIResponse<CurrencyConvertResponse>> {\n        return this.request<CurrencyConvertResponse>('/currency/convert', {\n            method: 'POST',\n            body: JSON.stringify({ currency, amount }),\n        });\n    }\n\n    async getSupportedCurrencies(): Promise<APIResponse<Array<{ code: string; name: string }>>> {\n        return this.request<Array<{ code: string; name: string }>>('/currency/supported', {\n            method: 'GET',\n        });\n    }\n}\n\nexport const userAPI = new UserAPI(API_BASE_URL);\nexport const invoiceAPI = new InvoiceAPI(API_BASE_URL);\nexport const riskQuestionnaireAPI = new RiskQuestionnaireAPI(API_BASE_URL);\n\nexport const investmentAPI = new InvestmentAPI(API_BASE_URL);\nexport const walletAPI = new WalletAPI(API_BASE_URL);\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/lib/components/AuthGuard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/lib/components/DashboardLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/lib/components/LanguageSwitcher.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/lib/context/AuthContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/lib/context/InvestorWalletContext.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/lib/context/InvestorWalletContext.tsx:95:13\n  93 |     useEffect(() => {\n  94 |         if (isMock) {\n> 95 |             setIsMetaMaskInstalled(true);\n     |             ^^^^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  96 |             const saved = typeof window !== 'undefined' ? localStorage.getItem(INVESTOR_WALLET_KEY) : null;\n  97 |             if (saved) {\n  98 |                 try {","line":95,"column":13,"nodeType":null,"endLine":95,"endColumn":35},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/lib/context/InvestorWalletContext.tsx:145:13\n  143 |     useEffect(() => {\n  144 |         if (walletAddress) {\n> 145 |             fetchBalance(walletAddress);\n      |             ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  146 |         }\n  147 |     }, [walletAddress, fetchBalance]);\n  148 |","line":145,"column":13,"nodeType":null,"endLine":145,"endColumn":25}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { createContext, useContext, useState, useCallback, useEffect } from 'react';\n\ndeclare global {\n    interface Window {\n        ethereum?: {\n            isMetaMask?: boolean;\n            request: (args: { method: string; params?: unknown[] }) => Promise<unknown>;\n            on: (event: string, callback: (...args: unknown[]) => void) => void;\n            removeListener: (event: string, callback: (...args: unknown[]) => void) => void;\n        };\n    }\n}\n\ninterface InvestorUser {\n    walletAddress: string;\n    role: 'investor';\n    connectedAt: string;\n}\n\ninterface InvestorWalletContextType {\n    investor: InvestorUser | null;\n    walletAddress: string | null;\n    isConnecting: boolean;\n    isConnected: boolean;\n    isMetaMaskInstalled: boolean;\n    error: string | null;\n    chainId: number | null;\n    idrxBalance: string;\n    connectWallet: () => Promise<boolean>;\n    disconnectWallet: () => void;\n    switchToCorrectChain: () => Promise<boolean>;\n    refreshBalance: () => Promise<void>;\n}\n\nconst InvestorWalletContext = createContext<InvestorWalletContextType | undefined>(undefined);\n\nconst INVESTOR_WALLET_KEY = 'vessel_investor_wallet';\nconst EXPECTED_CHAIN_ID = parseInt(process.env.NEXT_PUBLIC_CHAIN_ID || '31337', 10);\n\nexport function InvestorWalletProvider({ children }: { children: React.ReactNode }) {\n    const isMock = process.env.NEXT_PUBLIC_WALLET_MOCK === '1';\n    const [investor, setInvestor] = useState<InvestorUser | null>(null);\n    const [walletAddress, setWalletAddress] = useState<string | null>(null);\n    const [isConnecting, setIsConnecting] = useState(false);\n    const [isMetaMaskInstalled, setIsMetaMaskInstalled] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    const [chainId, setChainId] = useState<number | null>(null);\n    const [idrxBalance, setIdrxBalance] = useState<string>('0');\n\n    const isConnected = investor !== null && walletAddress !== null;\n\n    // IDRX contract address from env\n    const IDRX_ADDRESS = process.env.NEXT_PUBLIC_IDRX_ADDRESS || '';\n\n    // Fetch IDRX balance\n    const fetchBalance = useCallback(async (address: string) => {\n        if (!address || !IDRX_ADDRESS || isMock) {\n            if (isMock) setIdrxBalance('1000000000'); // 1000 IDRX for demo\n            return;\n        }\n\n        try {\n            if (!window.ethereum) return;\n\n            // ERC20 balanceOf(address) function selector\n            const data = `0x70a08231000000000000000000000000${address.slice(2)}`;\n\n            const result = await window.ethereum.request({\n                method: 'eth_call',\n                params: [{ to: IDRX_ADDRESS, data }, 'latest'],\n            }) as string;\n\n            // Parse the result (it's in wei/smallest unit)\n            const balanceWei = BigInt(result);\n            // IDRX typically has 6 or 18 decimals - assuming 6 for stablecoin\n            const balance = Number(balanceWei) / 1e6;\n            setIdrxBalance(balance.toLocaleString('id-ID'));\n        } catch (err) {\n            console.error('Failed to fetch IDRX balance:', err);\n            setIdrxBalance('0');\n        }\n    }, [IDRX_ADDRESS, isMock]);\n\n    const refreshBalance = useCallback(async () => {\n        if (walletAddress) {\n            await fetchBalance(walletAddress);\n        }\n    }, [walletAddress, fetchBalance]);\n\n    // Load saved investor state on mount\n    useEffect(() => {\n        if (isMock) {\n            setIsMetaMaskInstalled(true);\n            const saved = typeof window !== 'undefined' ? localStorage.getItem(INVESTOR_WALLET_KEY) : null;\n            if (saved) {\n                try {\n                    const parsed = JSON.parse(saved);\n                    setInvestor(parsed);\n                    setWalletAddress(parsed.walletAddress);\n                } catch {\n                    localStorage.removeItem(INVESTOR_WALLET_KEY);\n                }\n            }\n            return;\n        }\n\n        if (typeof window !== 'undefined' && window.ethereum?.isMetaMask) {\n            setIsMetaMaskInstalled(true);\n\n            // Check if already connected\n            window.ethereum.request({ method: 'eth_accounts' })\n                .then((accounts) => {\n                    const accountList = accounts as string[];\n                    if (accountList.length > 0) {\n                        const saved = localStorage.getItem(INVESTOR_WALLET_KEY);\n                        if (saved) {\n                            try {\n                                const parsed = JSON.parse(saved);\n                                if (parsed.walletAddress.toLowerCase() === accountList[0].toLowerCase()) {\n                                    setInvestor(parsed);\n                                    setWalletAddress(accountList[0]);\n                                }\n                            } catch {\n                                localStorage.removeItem(INVESTOR_WALLET_KEY);\n                            }\n                        }\n                    }\n                })\n                .catch(console.error);\n\n            // Get current chain ID\n            window.ethereum.request({ method: 'eth_chainId' })\n                .then((id) => {\n                    setChainId(parseInt(id as string, 16));\n                })\n                .catch(console.error);\n        }\n    }, [isMock]);\n\n    // Fetch balance when wallet connects\n    useEffect(() => {\n        if (walletAddress) {\n            fetchBalance(walletAddress);\n        }\n    }, [walletAddress, fetchBalance]);\n\n    // Listen for account changes\n    useEffect(() => {\n        if (isMock || typeof window === 'undefined' || !window.ethereum) return;\n\n        const handleAccountsChanged = (accounts: unknown) => {\n            const accountList = accounts as string[];\n            if (accountList.length === 0) {\n                // User disconnected\n                setInvestor(null);\n                setWalletAddress(null);\n                localStorage.removeItem(INVESTOR_WALLET_KEY);\n            } else if (accountList[0].toLowerCase() !== walletAddress?.toLowerCase()) {\n                // Account changed\n                const newInvestor: InvestorUser = {\n                    walletAddress: accountList[0],\n                    role: 'investor',\n                    connectedAt: new Date().toISOString(),\n                };\n                setInvestor(newInvestor);\n                setWalletAddress(accountList[0]);\n                localStorage.setItem(INVESTOR_WALLET_KEY, JSON.stringify(newInvestor));\n            }\n        };\n\n        const handleChainChanged = (newChainId: unknown) => {\n            setChainId(parseInt(newChainId as string, 16));\n        };\n\n        window.ethereum.on('accountsChanged', handleAccountsChanged);\n        window.ethereum.on('chainChanged', handleChainChanged);\n\n        return () => {\n            window.ethereum?.removeListener('accountsChanged', handleAccountsChanged);\n            window.ethereum?.removeListener('chainChanged', handleChainChanged);\n        };\n    }, [walletAddress, isMock]);\n\n    const switchToCorrectChain = useCallback(async (): Promise<boolean> => {\n        if (isMock) return true;\n        if (!window.ethereum) return false;\n\n        try {\n            await window.ethereum.request({\n                method: 'wallet_switchEthereumChain',\n                params: [{ chainId: `0x${EXPECTED_CHAIN_ID.toString(16)}` }],\n            });\n            return true;\n        } catch (switchError: unknown) {\n            const err = switchError as { code?: number };\n            // Chain not added, try to add it\n            if (err.code === 4902) {\n                try {\n                    await window.ethereum.request({\n                        method: 'wallet_addEthereumChain',\n                        params: [{\n                            chainId: `0x${EXPECTED_CHAIN_ID.toString(16)}`,\n                            chainName: EXPECTED_CHAIN_ID === 31337 ? 'Hardhat Local' : 'Custom Network',\n                            nativeCurrency: {\n                                name: 'ETH',\n                                symbol: 'ETH',\n                                decimals: 18,\n                            },\n                            rpcUrls: [process.env.NEXT_PUBLIC_RPC_URL || 'http://127.0.0.1:8545'],\n                        }],\n                    });\n                    return true;\n                } catch {\n                    setError('Gagal menambahkan jaringan');\n                    return false;\n                }\n            }\n            setError('Gagal berganti jaringan');\n            return false;\n        }\n    }, [isMock]);\n\n    const connectWallet = useCallback(async (): Promise<boolean> => {\n        setIsConnecting(true);\n        setError(null);\n\n        if (isMock) {\n            const mockAddress = '0xdEAdbeEF0000000000000000000000000000dEaD';\n            const newInvestor: InvestorUser = {\n                walletAddress: mockAddress,\n                role: 'investor',\n                connectedAt: new Date().toISOString(),\n            };\n            setInvestor(newInvestor);\n            setWalletAddress(mockAddress);\n            localStorage.setItem(INVESTOR_WALLET_KEY, JSON.stringify(newInvestor));\n            setIsConnecting(false);\n            return true;\n        }\n\n        if (!window.ethereum?.isMetaMask) {\n            setError('MetaMask tidak terdeteksi. Silakan install MetaMask terlebih dahulu.');\n            setIsConnecting(false);\n            return false;\n        }\n\n        try {\n            // Request account access\n            const accounts = await window.ethereum.request({\n                method: 'eth_requestAccounts',\n            }) as string[];\n\n            if (accounts.length === 0) {\n                setError('Tidak ada akun yang dipilih');\n                setIsConnecting(false);\n                return false;\n            }\n\n            const address = accounts[0];\n\n            // Check chain ID\n            const currentChainId = await window.ethereum.request({ method: 'eth_chainId' }) as string;\n            const currentChainIdNum = parseInt(currentChainId, 16);\n            setChainId(currentChainIdNum);\n\n            // Switch chain if needed\n            if (currentChainIdNum !== EXPECTED_CHAIN_ID) {\n                const switched = await switchToCorrectChain();\n                if (!switched) {\n                    setIsConnecting(false);\n                    return false;\n                }\n            }\n\n            // Create investor user\n            const newInvestor: InvestorUser = {\n                walletAddress: address,\n                role: 'investor',\n                connectedAt: new Date().toISOString(),\n            };\n\n            setInvestor(newInvestor);\n            setWalletAddress(address);\n            localStorage.setItem(INVESTOR_WALLET_KEY, JSON.stringify(newInvestor));\n            setIsConnecting(false);\n            return true;\n        } catch (err: unknown) {\n            const error = err as { code?: number; message?: string };\n            if (error.code === 4001) {\n                setError('Koneksi wallet dibatalkan');\n            } else {\n                setError(error.message || 'Gagal menghubungkan wallet');\n            }\n            setIsConnecting(false);\n            return false;\n        }\n    }, [isMock, switchToCorrectChain]);\n\n    const disconnectWallet = useCallback(() => {\n        setInvestor(null);\n        setWalletAddress(null);\n        localStorage.removeItem(INVESTOR_WALLET_KEY);\n    }, []);\n\n    const value: InvestorWalletContextType = {\n        investor,\n        walletAddress,\n        isConnecting,\n        isConnected,\n        isMetaMaskInstalled,\n        error,\n        chainId,\n        idrxBalance,\n        connectWallet,\n        disconnectWallet,\n        switchToCorrectChain,\n        refreshBalance,\n    };\n\n    return <InvestorWalletContext.Provider value={value}>{children}</InvestorWalletContext.Provider>;\n}\n\nexport function useInvestorWallet() {\n    const context = useContext(InvestorWalletContext);\n\n    if (context === undefined) {\n        throw new Error('useInvestorWallet must be used within an InvestorWalletProvider');\n    }\n\n    return context;\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/lib/i18n/LanguageContext.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/lib/i18n/LanguageContext.tsx:29:13\n  27 |         const saved = localStorage.getItem(LANGUAGE_KEY) as Language | null;\n  28 |         if (saved && (saved === 'en' || saved === 'id')) {\n> 29 |             setLanguageState(saved);\n     |             ^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  30 |         }\n  31 |     }, []);\n  32 |","line":29,"column":13,"nodeType":null,"endLine":29,"endColumn":29}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { createContext, useContext, useState, useCallback, useEffect } from 'react';\nimport en from './translations/en.json';\nimport id from './translations/id.json';\n\ntype Language = 'en' | 'id';\ntype TranslationKeys = typeof en;\n\ninterface LanguageContextType {\n    language: Language;\n    setLanguage: (lang: Language) => void;\n    t: (key: string) => string;\n}\n\nconst translations: Record<Language, TranslationKeys> = { en, id };\n\nconst LanguageContext = createContext<LanguageContextType | undefined>(undefined);\n\nconst LANGUAGE_KEY = 'vessel_language';\n\nexport function LanguageProvider({ children }: { children: React.ReactNode }) {\n    const [language, setLanguageState] = useState<Language>('en');\n\n    // Load saved language on mount\n    useEffect(() => {\n        const saved = localStorage.getItem(LANGUAGE_KEY) as Language | null;\n        if (saved && (saved === 'en' || saved === 'id')) {\n            setLanguageState(saved);\n        }\n    }, []);\n\n    const setLanguage = useCallback((lang: Language) => {\n        setLanguageState(lang);\n        localStorage.setItem(LANGUAGE_KEY, lang);\n    }, []);\n\n    // Translation function - supports nested keys like \"nav.dashboard\"\n    const t = useCallback((key: string): string => {\n        const keys = key.split('.');\n        let value: unknown = translations[language];\n\n        for (const k of keys) {\n            if (value && typeof value === 'object' && k in value) {\n                value = (value as Record<string, unknown>)[k];\n            } else {\n                // Fallback to English if key not found in current language\n                let fallback: unknown = translations['en'];\n                for (const fk of keys) {\n                    if (fallback && typeof fallback === 'object' && fk in fallback) {\n                        fallback = (fallback as Record<string, unknown>)[fk];\n                    } else {\n                        return key; // Return key if not found in fallback either\n                    }\n                }\n                return typeof fallback === 'string' ? fallback : key;\n            }\n        }\n\n        return typeof value === 'string' ? value : key;\n    }, [language]);\n\n    return (\n        <LanguageContext.Provider value={{ language, setLanguage, t }}>\n            {children}\n        </LanguageContext.Provider>\n    );\n}\n\nexport function useLanguage() {\n    const context = useContext(LanguageContext);\n    if (context === undefined) {\n        throw new Error('useLanguage must be used within a LanguageProvider');\n    }\n    return context;\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/lib/providers/Providers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/lib/types/auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/mir4na/ameame/hackathon/base-indonesia-2025/vessel-fe/postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
